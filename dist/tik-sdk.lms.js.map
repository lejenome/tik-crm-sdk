{"version":3,"sources":["webpack://tikSDK.[name]/webpack/universalModuleDefinition","webpack://tikSDK.[name]/webpack/bootstrap","webpack://tikSDK.[name]/./src/core/base.js","webpack://tikSDK.[name]/./src/config.js","webpack://tikSDK.[name]/./src/lms/enrolls.js","webpack://tikSDK.[name]/./src/lms/lessons.js","webpack://tikSDK.[name]/./src/lms/instructors.js","webpack://tikSDK.[name]/./src/core/users.js","webpack://tikSDK.[name]/./src/lms/attachments.js","webpack://tikSDK.[name]/external {\"commonjs\":\"@sentry/browser\",\"commonjs2\":\"@sentry/browser\",\"amd\":\"@sentry/browser\",\"root\":\"Sentry\"}","webpack://tikSDK.[name]/./node_modules/querystringify/index.js","webpack://tikSDK.[name]/./src/lms/courses.js","webpack://tikSDK.[name]/./src/utils/cache.js","webpack://tikSDK.[name]/./src/lms/chapters.js","webpack://tikSDK.[name]/./src/lms/quizs.js","webpack://tikSDK.[name]/./src/lms/categories.js","webpack://tikSDK.[name]/./src/lms/students.js","webpack://tikSDK.[name]/./src/lms/webinars.js","webpack://tikSDK.[name]/./src/lms/attendees.js","webpack://tikSDK.[name]/./src/lms/reports.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__8__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","globalThis","tikSdkSession","authToken","instructorAuthToken","constructor","resource","model_name","verbose_name","verbose_name_plural","view_perm","add_perm","change_perm","delete_perm","lookup_field","useCache","list","validateCache","base_domain","base_url","configCache","cache","timeout","_cacheTimeout","clearInterval","cacheTimeout","setInterval","method","path","json","allow404","req","headers","url","qs","stringify","values","some","v","File","Blob","data","FormData","k","entries","Date","toISOString","Array","isArray","JSON","toString","append","undefined","console","log","session","Authorization","fetch","body","redirect","referrer","ok","includes","status","error","Error","statusText","response","e","Sentry","keys","captureException","toObj","obj","title","http","id","el","new","forceCreate","partial_update","instance","tikSdkConfig","$org","setConfig","API_BASE_URL","api_base_url","API_PREFIX","api_prefix","CACHE_PREFIX","cache_prefix","saas_base_domain","DEFAULT_CONFIG","SAAS_API_BASE_URL","VERSION","version","PROTOCOL","EntollsApi","BaseApi","super","course_id","provider","settings","order_id","user_id","user","course","deposit","paid","completed_lessons","is_active","padStart","LessonsApi","resourcetype","sku","thumbnail","description","free","comments","published","days","start_day","start_date","chapter","types","icon","display_text","InstructorsApi","UsersApi","first_name","last_name","full_name","roles","phone","email","attrs","unlimited_access","start_at","end_at","summary","is_featured","facebook_url","headline","is_staff","token","AttachmentsApi","has","decode","input","decodeURIComponent","replace","encode","encodeURIComponent","prefix","pairs","isNaN","push","length","join","parse","query","part","parser","result","exec","CoursesApi","video","video_url","category_id","category_title","chapters","level","language","saleoffers","price_net","tax_rate","forceCache","fallbackCache","async","lessonsApi","getLessonChapter","lesson","find","lessons","setupCourseLessons","count","index","is_open","immediate","daily","weekly","custom","schedule","lessons_duration","lessons_days","lessons_count","setupCourseSchedule","enroll","moment","created_at","now","lessonDeliveryDate","clone","add","canAccessLesson","ch","findLessonOnCourse","getLessonsCount","getLessonsDuration","duration","getLessonTrainer","getLessonCourse","trainer","fixEnroll","split","map","trim","filter","enrollsApi","getNextPrevLessons","prev","next","found","lesson_id","from","save","instructorsApi","color","Cache","localStorage","config","del","use_cache","set","res","fn","message","ChaptersApi","QuizsApi","CategoriesApi","StudentsApi","WebinarsApi","username","attendees","AttendeesApi","webinar_id","ReportsApi"],"mappings":"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","file":"tik-sdk.lms.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@sentry/browser\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@sentry/browser\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lms\"] = factory(require(\"@sentry/browser\"));\n\telse\n\t\troot[\"tikSDK\"] = root[\"tikSDK\"] || {}, root[\"tikSDK\"][\"lms\"] = factory(root[\"Sentry\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__8__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","import * as Sentry from '@sentry/browser'\nimport qs from 'querystringify'\nimport { base_url, base_domain } from '../config.js'\n\nif (!globalThis.tikSdkSession) {\n  globalThis.tikSdkSession = {\n    authToken: null,\n    instructorAuthToken: null,\n  }\n}\n\nclass BaseApi {\n  constructor() {\n    this.resource = null\n    this.model_name = ''\n    this.verbose_name = ''\n    this.verbose_name_plural = ''\n    this.view_perm = ''\n    this.add_perm = ''\n    this.change_perm = ''\n    this.delete_perm = ''\n    this.lookup_field = 'id'\n\n    this.useCache = {\n      list: false,\n      get: false,\n    }\n    this.validateCache = true\n  }\n\n  get base_domain() {\n    return base_domain()\n  }\n\n  get base_url() {\n    return base_url()\n  }\n\n  get session() {\n    return globalThis.tikSdkSession\n  }\n\n  configCache(cache, timeout) {\n    this.useCache = cache\n    if (this._cacheTimeout) {\n      clearInterval(this._cacheTimeout)\n    }\n    if (timeout) {\n      this.cacheTimeout = timeout\n      this._cacheTimeout = setInterval(() => {\n        this.validateCache = true\n      }, this.cacheTimeout)\n    }\n  }\n\n  async http(method, path, json, allow404 = false) {\n    if (path) {\n      path = `${this.resource}/${path}`\n    } else {\n      path = `${this.resource}`\n    }\n    let headers = {}\n    let url = `${this.base_url}${path}/`\n    let req\n    if (json && method === 'GET') {\n      url += qs.stringify(json, true)\n      json = null\n    } else if (json) {\n      if (\n        Object.values(json).some((v) => v instanceof File || v instanceof Blob)\n      ) {\n        const data = new FormData()\n        // eslint-disable-next-line prefer-const\n        for (let [k, v] of Object.entries(json)) {\n          if (v === null || v === undefined) {\n            v = ''\n          } else if (v instanceof Date) {\n            v = v.toISOString()\n          } else if (Array.isArray(v)) {\n            v = JSON.stringify(v)\n          } else if (v instanceof File || v instanceof Blob) {\n            // pass : v = v\n            // DO NOT DELETE, next conditions depend on it\n          } else if (v instanceof Object) {\n            v = JSON.stringify(v)\n          } else if (typeof v === 'boolean') {\n            v = v ? 'True' : 'False'\n          } else {\n            v = v.toString()\n          }\n          data.append(k, v)\n        }\n        json = data\n      } else {\n        json = JSON.stringify(json)\n        headers = {\n          'Content-Type': 'application/json; charset=utf-8',\n        }\n      }\n    } else {\n      json = undefined\n    }\n    console.log(method, path, json || '')\n    try {\n      if (this.session.authToken) {\n        headers.Authorization = 'Bearer ' + this.session.authToken\n      }\n      req = await fetch(url, {\n        method,\n        headers,\n        body: json,\n        mode: 'cors',\n        // credentials: 'include',\n        cache: 'no-cache',\n        redirect: 'follow',\n        referrer: 'no-referrer',\n      })\n      if (!req.ok && !(allow404 && [404, 401].includes(req.status))) {\n        const error = new Error(req.statusText || req.status)\n        error.response = req\n        throw error\n      }\n      if (method !== 'DELETE') {\n        return await req.json()\n      }\n    } catch (e) {\n      console.error(\n        'HTTP Error:',\n        url.toString(),\n        JSON.stringify(json),\n        req && req.status\n      )\n      console.log('Sentry', typeof Sentry, Sentry, Object.keys(Sentry))\n      if (typeof Sentry === 'object' && 'captureException' in Sentry) {\n        Sentry.captureException(e)\n      }\n      throw e\n    }\n  }\n\n  toObj(o) {\n    return o\n  }\n\n  toString(obj) {\n    if (obj.title) {\n      return obj.title\n    } else if (obj.name) {\n      return obj.name\n    } else {\n      return ''\n    }\n  }\n\n  async list() {\n    if (this.useCache.list && !this.validateCache && this.data) {\n      console.log(`[HTTP] ${this.resource}.list(): using cache`)\n    } else {\n      const d = await this.http('GET', '')\n      this.data = d\n      this.validateCache = false\n    }\n    return this.data\n  }\n\n  async get(id, allow404 = false) {\n    if (id) {\n      const el = await this.http(\n        'GET',\n        id,\n        /* json= */ null,\n        /* allow404= */ allow404\n      )\n      return this.toObj(el)\n    } else {\n      return this.new()\n    }\n    /*\n    // const el = this.data.filter((el) => el[this.lookup_field] === id);\n    if (el.length === 1) {\n      return el[0];\n    } else {\n      console.log(\"GET NEW\");\n      return this.new();\n    }\n    */\n  }\n\n  async save(\n    el,\n    id,\n    forceCreate = false,\n    partial_update = false,\n    allow404 = false\n  ) {\n    this.validateCache = true\n    if ((el[this.lookup_field] || id) && !forceCreate) {\n      const instance = await this.http(\n        partial_update ? 'PATCH' : 'PUT',\n        id || el[this.lookup_field],\n        el,\n        allow404\n      )\n      return this.toObj(instance)\n      /*\n      const instance = this.get(el[this.lookup_field]);\n      if (instance) {\n        const old = Object.assign({}, instance);\n        Object.assign(instance, el);\n        if (this.preUpdate) {\n          await this.preUpdate(old, instance);\n        }\n        if (this.postUpdate) {\n          await this.postUpdate(old, instance);\n        }\n      }\n      */\n    } else {\n      const instance = await this.http('POST', '', el, allow404)\n      return instance\n      /*\n      const nextId = Math.max(...this.data.map((c) => c[this.lookup_field])) + 1;\n      el[this.lookup_field] = nextId;\n      if (this.preCreate) {\n        await this.preCreate(el);\n      }\n      this.data.push(el);\n      if (this.postCreate) {\n        await this.postCreate(el);\n      }\n      */\n    }\n  }\n\n  new() {\n    return null\n  }\n\n  async delete(id) {\n    this.validateCache = true\n    return this.http('DELETE', id)\n  }\n}\n\nexport default BaseApi\n","import { version } from '../package.json'\n\nconst DEFAULT_CONFIG = {\n  // env: 'production',\n  API_BASE_URL: '',\n  SAAS_API_BASE_URL: '',\n  API_PREFIX: '/api/',\n  CACHE_PREFIX: '',\n  VERSION: version,\n  PROTOCOL: 'https',\n  // LANG: 'fr',\n}\n\nif (!globalThis.tikSdkConfig) {\n  globalThis.tikSdkConfig = {}\n}\n\n;(function setDefaultConfig() {\n  for (const k of Object.keys(DEFAULT_CONFIG)) {\n    if (!(k in globalThis.tikSdkConfig)) {\n      globalThis.tikSdkConfig[k] = DEFAULT_CONFIG[k]\n    }\n  }\n})()\n\nexport function setConfigValue(k, v) {\n  globalThis.tikSdkConfig[k] = v\n}\n\nexport function setConfig(c) {\n  for (const k of Object.keys(DEFAULT_CONFIG)) {\n    if (k in c) {\n      globalThis.tikSdkConfig[k] = c[k]\n    }\n  }\n}\n\nexport function setConfigOrganization($org) {\n  setConfig({\n    API_BASE_URL: $org.api_base_url,\n    API_PREFIX: $org.api_prefix,\n    CACHE_PREFIX: $org.cache_prefix,\n  })\n}\n\nexport function base_domain() {\n  return globalThis.tikSdkConfig.API_BASE_URL\n}\n\nexport function base_url() {\n  return base_domain() + globalThis.tikSdkConfig.API_PREFIX\n}\n\nexport function saas_base_domain() {\n  return globalThis.tikSdkConfig.SAAS_API_BASE_URL\n}\n\nexport function saas_base_url() {\n  return saas_base_domain() + globalThis.tikSdkConfig.API_PREFIX\n}\n\nexport default globalThis.tikSdkConfig\n","import BaseApi from '../core/base.js'\n\nexport class EntollsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'enrolls'\n    this.model_name = 'enroll'\n    this.verbose_name = 'Enroll'\n    this.verbose_name_plural = 'Enrolls'\n    this.view_perm = 'enroll:view'\n    this.add_perm = 'enroll:add'\n    this.change_perm = 'enroll:change'\n    this.delete_perm = 'enroll:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async registerOrder(\n    course_id,\n    provider,\n    settings\n    // { success_url, failure_url, coupon }\n  ) {\n    return await this.http('POST', `${course_id}/payment`, {\n      provider,\n      ...settings,\n    })\n  }\n\n  async orderSuccess(course_id, order_id) {\n    return await this.http('POST', `${course_id}/success`, {\n      order_id,\n    })\n  }\n\n  async orderFailure(course_id, order_id) {\n    return await this.http('POST', `${course_id}/failure`, {\n      order_id,\n    })\n  }\n\n  new() {\n    return {\n      user_id: null,\n      user: null,\n      course_id: null,\n      course: null,\n      deposit: 0,\n      paid: false,\n      completed_lessons: '',\n      order_id: null,\n      is_active: true,\n    }\n  }\n\n  toString(obj) {\n    return obj.id ? obj.id.toString().padStart(8, '0') : ''\n  }\n}\n\nconst api = new EntollsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class LessonsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'lessons'\n    this.model_name = 'lesson'\n    this.verbose_name = 'Lesson'\n    this.verbose_name_plural = 'Lessons'\n    this.view_perm = 'lesson:view'\n    this.add_perm = 'lesson:add'\n    this.change_perm = 'lesson:change'\n    this.delete_perm = 'lesson:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      resourcetype: null,\n      sku: '',\n      title: '',\n      thumbnail: null,\n      description: '',\n\n      free: false,\n      comments: 'visible',\n      published: false,\n\n      days: 1,\n      start_day: 0,\n      start_date: null,\n\n      chapter: null,\n      course: null,\n    }\n  }\n  types() {\n    return [\n      { name: 'VideoLesson', icon: 'video', display_text: 'Video Lesson' },\n      { name: 'PDFLesson', icon: 'file-pdf', display_text: 'PDF Lesson' },\n      {\n        name: 'RichTextLesson',\n        icon: 'align-justify',\n        display_text: 'Rich Text',\n      },\n      { name: 'EmbedLesson', icon: 'code', display_text: 'Embed' },\n      { name: 'Quiz', icon: 'list', display_text: 'Quiz' },\n      {\n        name: 'DownloadsContent',\n        icon: 'file-download',\n        display_text: 'Downloads Page',\n      },\n    ]\n  }\n}\n\nconst api = new LessonsApi()\n\nexport default api\n","import { UsersApi } from '../core/users.js'\n\nexport class InstructorsApi extends UsersApi {\n  constructor() {\n    super()\n    this.resource = 'instructors'\n    this.model_name = 'instructor'\n    this.verbose_name = 'Creator'\n    this.verbose_name_plural = 'Creators'\n    this.view_perm = 'instructor:view'\n    this.add_perm = 'instructor:add'\n    this.change_perm = 'instructor:change'\n    this.delete_perm = 'instructor:delete'\n\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async featured() {\n    return await this.http('GET', 'featured')\n  }\n\n  new() {\n    return {\n      first_name: '',\n      last_name: '',\n      full_name: '',\n      roles: ['instructor'],\n      phone: '',\n      email: '',\n      attrs: {\n        unlimited_access: true,\n        start_at: '08:00',\n        end_at: '18:00',\n        summary: '',\n        is_featured: false,\n        facebook_url: '',\n      },\n      description: '',\n      headline: '',\n      is_active: true,\n      is_staff: false,\n    }\n  }\n}\n\nconst api = new InstructorsApi()\n\nexport default api\n","import BaseApi from './base'\n\nexport class UsersApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'users'\n    this.model_name = 'user'\n    this.verbose_name = 'User'\n    this.verbose_name_plural = 'Users'\n    this.view_perm = 'user:view'\n    this.add_perm = 'user:add'\n    this.change_perm = 'user:change'\n    this.delete_perm = 'user:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async me() {\n    const obj = await this.http('GET', 'me', null, true)\n    return this.toObj(obj)\n  }\n\n  async activate(id, token) {\n    return await this.http('POST', `${id}/activate`, { token }, true)\n  }\n\n  async get_by_email(email) {\n    return await this.http('POST', 'email', { email }, true)\n  }\n\n  toString(obj) {\n    return `${obj.first_name || ''} ${obj.last_name || ''}`\n  }\n}\n\nconst api = new UsersApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class AttachmentsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'attachments'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new AttachmentsApi()\n\nexport default api\n","module.exports = __WEBPACK_EXTERNAL_MODULE__8__;","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","import BaseApi from '../core/base.js'\nimport enrollsApi from './enrolls'\nimport lessonsApi from './lessons'\nimport instructorsApi from './instructors'\nimport cache from '../utils/cache'\n\nexport class CoursesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'courses'\n    this.model_name = 'course'\n    this.verbose_name = 'Course'\n    this.verbose_name_plural = 'Courses'\n    this.view_perm = 'course:view'\n    this.add_perm = 'course:add'\n    this.change_perm = 'course:change'\n    this.delete_perm = 'course:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      sku: '',\n      title: '',\n      thumbnail: null,\n      description: '',\n      user_id: null,\n      user: null,\n\n      video: null,\n      video_url: null,\n\n      category_id: null,\n      category_title: '',\n\n      chapters: [],\n\n      level: 'beginner',\n      language: 'fr',\n      days: 30,\n      published: false,\n      is_active: true,\n      saleoffers: [],\n      price_net: 0,\n      tax_rate: 19,\n    }\n  }\n\n  async getCourse(id, forceCache = false) {\n    return await cache.fallbackCache(\n      'courses_get_' + id,\n      async () => await this.get(id),\n      forceCache\n    )\n  }\n\n  async listCourses(forceCache = false) {\n    return await cache.fallbackCache(\n      'courses_list',\n      async () => await this.list(),\n      forceCache\n    )\n  }\n\n  async getLesson(id, forceCache = false) {\n    return await cache.fallbackCache(\n      'lessons_get_' + id,\n      async () => await lessonsApi.get(id),\n      forceCache\n    )\n  }\n\n  async listEnrolledCourses() {\n    return await this.http('GET', `enrolled`)\n  }\n\n  getLessonChapter(lesson, course) {\n    return course.chapters.find((c) =>\n      c.lessons.some((l) => l.id === lesson.id)\n    )\n  }\n\n  setupCourseLessons(course) {\n    let count = 0\n    for (const m of course.chapters) {\n      for (const l of m.lessons) {\n        l.index = count\n        l.is_open = true\n        l.start_at = {\n          immediate: 0,\n          daily: 1,\n          weekly: 7,\n          custom: -1,\n        }[course.schedule]\n        l.start_at *= l.index\n        if (l.start_at === undefined || l.start_at < 0) {\n          l.start_at = l.start_date || l.start_day\n        }\n        count++\n      }\n    }\n    course.lessons_duration = course.days\n    course.lessons_days = course.days\n    course.lessons_count = count\n  }\n\n  setupCourseSchedule(course, enroll, moment) {\n    let created_at = null\n    if (enroll) {\n      created_at = moment(enroll.created_at)\n    }\n    const now = moment()\n    function lessonDeliveryDate(l) {\n      if (l.start_date) {\n        return moment(l.start_date)\n      } else if (enroll) {\n        return created_at.clone().add(l.start_at, 'days')\n        // .startOf('day')\n      } else {\n        return moment(l.start_at)\n      }\n    }\n    function canAccessLesson(l) {\n      if (enroll) {\n        return now > l.start_at\n      } else {\n        return !l.start_at\n      }\n    }\n    for (const ch of course.chapters) {\n      for (const l of ch.lessons) {\n        l.start_at = lessonDeliveryDate(l)\n        l.is_open = canAccessLesson(l)\n      }\n    }\n    return course\n  }\n\n  findLessonOnCourse(lesson, course) {\n    for (const ch of course.chapters) {\n      for (const l of ch.lessons) {\n        if (l.id === lesson.id) {\n          return l\n        }\n      }\n    }\n  }\n\n  getLessonsCount(course) {\n    let count = 0\n    for (const m of course.chapters) {\n      count += m.lessons.length\n    }\n    return count\n  }\n\n  getLessonsDuration(course) {\n    let count = 0\n    for (const m of course.chapters) {\n      for (const l of m.lessons) {\n        count += l.duration || 0\n      }\n    }\n    return count\n  }\n\n  getLessonTrainer(id) {\n    // FIXME\n    try {\n      return this.getLessonCourse(id).trainer\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  fixEnroll(enroll) {\n    if (enroll && typeof enroll.completed_lessons === 'string') {\n      enroll.completed_lessons = enroll.completed_lessons\n        .split(',')\n        .map((e) => e.trim())\n        .filter((e) => e)\n    }\n    return enroll\n  }\n\n  async getCourseEnroll(course_id, user_id, forceCache = false) {\n    // user_id = parseInt(user_id)\n\n    const enroll = await cache.fallbackCache(\n      'users_' + user_id + '_enrolls_' + course_id,\n      async () => await enrollsApi.get(course_id, true),\n      forceCache\n    )\n    if (enroll && enroll.id) {\n      return this.fixEnroll(enroll)\n    }\n  }\n\n  async getUserEnrolls() {\n    // user_id = parseInt(user_id)\n    return await enrollsApi.list()\n  }\n\n  getNextPrevLessons(course, lesson) {\n    let prev = null\n    let next = null\n    let found = false\n\n    for (const m of course.chapters) {\n      if (next) {\n        break\n      }\n      for (const l of m.lessons) {\n        if (found) {\n          next = l\n          break\n        }\n        if (lesson.id === l.id) {\n          found = true\n        }\n        if (!found) {\n          prev = l\n        }\n      }\n    }\n    return [prev, next]\n  }\n\n  async markCompleted(lesson_id, enroll) {\n    const completed_lessons = Array.from(enroll.completed_lessons)\n    if (!completed_lessons.includes(lesson_id)) {\n      completed_lessons.push(lesson_id)\n    }\n    enroll = await enrollsApi.save(\n      {\n        id: enroll.id,\n        course: enroll.course,\n        completed_lessons: completed_lessons.join(','),\n      },\n      enroll.id\n    )\n    return this.fixEnroll(enroll)\n  }\n\n  async enroll(course) {\n    // user_id = parseInt(user_id)\n    if (course.id) {\n      course = course.id\n    }\n    const enroll = await enrollsApi.save({\n      course,\n      completed_lessons: '',\n    })\n    return this.fixEnroll(enroll)\n  }\n\n  async getInstructor(id, forceCache) {\n    // id = parseInt(id)\n    return await cache.fallbackCache(\n      'instructors_get_' + id,\n      async () => await instructorsApi.get(id),\n      forceCache\n    )\n  }\n  status(obj) {\n    const disabled = {\n      display_text: 'Disabled',\n      color: 'secondary',\n    }\n    const draft = {\n      display_text: 'Draft',\n      color: 'warning',\n    }\n    const published = {\n      display_text: 'Published',\n      color: 'success',\n    }\n    return obj && obj.is_active ? (obj.published ? published : draft) : disabled\n  }\n}\n\nconst coursesApi = new CoursesApi()\n\nexport default coursesApi\n","import config from '../config'\n\nexport class Cache {\n  has(n) {\n    return (\n      globalThis.localStorage &&\n      globalThis.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n    )\n  }\n\n  del(n) {\n    if (globalThis.localStorage) {\n      delete globalThis.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n    }\n  }\n\n  get(n, use_cache = true) {\n    if (use_cache && this.has(n)) {\n      try {\n        return JSON.parse(\n          globalThis.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n        )\n      } catch (e) {\n        console.error('[tikSdk]', e)\n      }\n    }\n  }\n\n  set(n, res) {\n    if (globalThis.localStorage) {\n      const k = `${config.CACHE_PREFIX}_cache_${n}`\n      globalThis.localStorage[k] = JSON.stringify(res)\n    }\n  }\n\n  async withCache(n, fn, use_cache = false) {\n    const cache = this.get(n, use_cache)\n    if (cache) return cache\n    const res = await fn()\n    this.set(n, res)\n    return res\n  }\n\n  async fallbackCache(n, fn, forceCache = false) {\n    let res\n    if (forceCache) {\n      return this.get(n, true)\n    }\n    try {\n      res = await fn()\n      this.set(n, res)\n    } catch (e) {\n      if (e.message !== 'Forbidden') {\n        res = this.get(n, true)\n      } else {\n        throw e\n      }\n    }\n    return res\n  }\n}\n\nexport default new Cache()\n","import BaseApi from '../core/base.js'\n\nexport class ChaptersApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'chapters'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new ChaptersApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class QuizsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'quizs'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new QuizsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nclass CategoriesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'course-categories'\n    this.model_name = 'course-category'\n    this.verbose_name = 'Course Category'\n    this.verbose_name_plural = 'Course Categories'\n    this.view_perm = 'course-category:view'\n    this.add_perm = 'course-category:add'\n    this.change_perm = 'course-category:change'\n    this.delete_perm = 'course-category:delete'\n    this.configCache({ list: true }, 60 * 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      title: '',\n      thumbnail: undefined,\n      is_active: true,\n    }\n  }\n}\n\nconst categoriesApi = new CategoriesApi()\n\nexport default categoriesApi\n","import { UsersApi } from '../core/users.js'\n\nexport class StudentsApi extends UsersApi {\n  constructor() {\n    super()\n    this.resource = 'students'\n    this.model_name = 'student'\n    this.verbose_name = 'Learner'\n    this.verbose_name_plural = 'Learners'\n    this.view_perm = 'student:view'\n    this.add_perm = 'student:add'\n    this.change_perm = 'student:change'\n    this.delete_perm = 'student:delete'\n\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      first_name: '',\n      last_name: '',\n      full_name: '',\n      roles: ['student'],\n      phone: '',\n      email: '',\n      attrs: {\n        unlimited_access: false,\n        start_at: '08:00',\n        end_at: '18:00',\n        summary: '',\n        // is_featured: false,\n        facebook_url: '',\n      },\n      description: '',\n      headline: '',\n      is_active: true,\n      is_staff: false,\n    }\n  }\n}\n\nconst api = new StudentsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class WebinarsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'webinars'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async join(id, username) {\n    const res = await this.http('POST', `${id}/join`, {\n      username,\n    })\n    return res.url\n  }\n\n  async get_default() {\n    try {\n      const res = await this.http('GET', 'default')\n      return res\n    } catch (e) {\n      return null\n    }\n  }\n\n  async create_default(name, attendees) {\n    const res = await this.http('POST', 'default', {\n      name,\n      attendees,\n    })\n    return res\n  }\n}\n\nconst api = new WebinarsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class AttendeesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'attendees'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async registerOrder(\n    webinar_id,\n    provider,\n    settings\n    // { success_url, failure_url, coupon }\n  ) {\n    return await this.http('POST', `${webinar_id}/payment`, {\n      provider,\n      ...settings,\n    })\n  }\n\n  async orderSuccess(webinar_id, order_id) {\n    return await this.http('POST', `${webinar_id}/success`, {\n      order_id,\n    })\n  }\n\n  async orderFailure(webinar_id, order_id) {\n    return await this.http('POST', `${webinar_id}/failure`, {\n      order_id,\n    })\n  }\n}\n\nconst api = new AttendeesApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class ReportsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'reports'\n  }\n\n  async course(id) {\n    return await this.http('GET', `courses/${id}`)\n  }\n}\n\nconst api = new ReportsApi()\n\nexport default api\n"],"sourceRoot":""}