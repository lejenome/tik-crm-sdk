{"version":3,"sources":["webpack://tikSDK/webpack/universalModuleDefinition","webpack://tikSDK/webpack/bootstrap","webpack://tikSDK/./src/core/base.js","webpack://tikSDK/./src/config.js","webpack://tikSDK/./src/cms/newsletters.js","webpack://tikSDK/./src/permissions/base.js","webpack://tikSDK/./src/core/users.js","webpack://tikSDK/./src/crm/products.js","webpack://tikSDK/./src/organization.js","webpack://tikSDK/external {\"commonjs\":\"@sentry/browser\",\"commonjs2\":\"@sentry/browser\",\"amd\":\"@sentry/browser\",\"root\":\"Sentry\"}","webpack://tikSDK/./src/crm/staffs.js","webpack://tikSDK/./src/utils/cache.js","webpack://tikSDK/./src/crm/categories.js","webpack://tikSDK/./src/crm/delivery.js","webpack://tikSDK/./src/crm/stores.js","webpack://tikSDK/./src/lms/enrolls.js","webpack://tikSDK/./src/lms/lessons.js","webpack://tikSDK/./src/lms/instructors.js","webpack://tikSDK/./index.js","webpack://tikSDK/./node_modules/querystringify/index.js","webpack://tikSDK/./src/core/auth.js","webpack://tikSDK/(webpack)/buildin/global.js","webpack://tikSDK/./src/crm/clients.js","webpack://tikSDK/./src/crm/collections.js","webpack://tikSDK/./src/crm/commands.js","webpack://tikSDK/./src/crm/stock.js","webpack://tikSDK/./src/lms/attachments.js","webpack://tikSDK/./src/lms/courses.js","webpack://tikSDK/./src/lms/chapters.js","webpack://tikSDK/./src/lms/quizs.js","webpack://tikSDK/./src/lms/students.js","webpack://tikSDK/./src/lms/webinars.js","webpack://tikSDK/./src/lms/attendees.js","webpack://tikSDK/./src/lms/reports.js","webpack://tikSDK/./src/cms/forms.js","webpack://tikSDK/./src/cms/pages.js","webpack://tikSDK/./src/cms/posts.js","webpack://tikSDK/./src/cms/notify.js","webpack://tikSDK/./src/permissions/crm.js","webpack://tikSDK/./src/permissions/dashboard.js","webpack://tikSDK/./src/permissions/command.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__7__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","globalThis","tikSdkSession","authToken","instructorAuthToken","constructor","lookup_field","useCache","list","validateCache","base_domain","base_url","configCache","cache","timeout","_cacheTimeout","clearInterval","cacheTimeout","setInterval","method","path","json","allow404","resource","req","headers","url","qs","stringify","values","some","v","File","data","FormData","k","entries","append","JSON","undefined","console","log","session","Authorization","fetch","body","redirect","referrer","ok","includes","status","error","Error","statusText","response","e","toString","Sentry","keys","captureException","toObj","http","id","el","new","forceCreate","partial_update","instance","tikSdkConfig","$org","setConfig","API_BASE_URL","api_base_url","API_PREFIX","api_prefix","CACHE_PREFIX","cache_prefix","DEFAULT_CONFIG","VERSION","version","PROTOCOL","NewslettersApi","BaseApi","super","subscription","newsletter","email","save","subject","process","env","NEWSLETTER_DEFAULT_SUBJECT","full_name","fn","tikSdkPermissions","user","obj","UsersApi","token","ProductsApi","title","count","sku","category_id","category_title","is_active","saleoffers","price_net","tax_rate","cost_price","has_variants","is_shipping_required","is_digital","charge_taxes","charge_shipping","query","categoriesApi","defaultPrice","product","parseFloat","offerPrice","price","offer","discount_type","discount_percentage","discount_amount","count_min","reduce","cp","stockColor","displayName","icon","backgroundColor","color","OrganizationApi","attrs","payment_providers","_phone","phone","cover_file","picture_file","background_image_file","organizationApi","Organization","apply","$base_url","URL","http_protocol","protocol","http_port","port","domains","domain","type","api","admin","cdn","html2txt","html","replace","ctxt","hide_website","HIDE_WEBSITE","MODULES","split","installed_apps","INSTALLED_APPS","delivery_backends","DELIVERY_BACKENDS","description","description_txt","display_name","short_name","cover","static","picture","favicon","logo","background_image","location","slug","about_us","summary","about_us_fr","fb_url","facebook_url","twitter_url","youtube_url","instagram_url","linkedin_url","wiretransfer","mandat","default_currency","tax_stamp","maintenance_mode","MAINTENANCE_MODE","maintenance_token","MAINTENANCE_TOKEN","webapp","BASE_URL","piwik_site_id","PIWIK_SITE_ID","fb_pixel_id","FB_PIXEL_ID","fb_page_id","FB_PAGE_ID","fb_app_id","google_analytics_id","GOOGLE_ANALYTICS_ID","google_gtag_id","GOOGLE_GTAG_ID","locales","LOCALES","default_locale","newsletter_default_subject","ENV","val","$env","envar","Array","isArray","toUpperCase","join","startsWith","hasModule","md","hasDeliveryBackend","TikSdkOrganization","StaffsApi","roles","unlimited_access","start_at","end_at","code","filter","defineProperties","role","is_admin","is_freelance","writable","set","Cache","has","global","localStorage","config","del","use_cache","parse","res","forceCache","message","CategoriesApi","thumbnail","DeliveryCompaniesApi","done","canceled","address","find","it","is_primary","updateAttrs","typeAttrs","attr","default","types","ref","StoresApi","city","country","state","company_name","vat_number","postal_code","EntollsApi","course_id","provider","settings","order_id","LessonsApi","InstructorsApi","decode","input","decodeURIComponent","encode","encodeURIComponent","prefix","pairs","isNaN","push","length","part","parser","result","exec","AuthApi","me","staffsApi","resp","navigator","onLine","fetchMe","configureScope","scope","setUser","logout","password","access","g","Function","window","ClientsApi","model_name","model_name_plural","first_name","last_name","typeAchat","states","CollectionsApi","delivery_id","suivi_id","items","product_id","discount","itemPrice","item","productsApi","addItem","collection","max_count","changeItemProduct","removeItem","splice","indexOf","Math","round","CommadsApi","client_id","client_attrs","deliveryCompaniesApi","primary","store_id","storesApi","store_name","commercial_id","customer_note","staff_notes","total","setClient","command","client","totalHT","cmd","$organization","tva","ttc","shipment_id","command_id","user_id","commands","staff_id","map","commandTypes","commandStatus","date","dark","StockApi","assigned_at","AttachmentsApi","CoursesApi","fallbackCache","async","lessonsApi","getLessonChapter","lesson","course","chapters","lessons","setupCourseLessons","index","is_open","immediate","daily","weekly","custom","schedule","start_date","start_day","lessons_duration","days","lessons_days","lessons_count","setupCourseSchedule","enroll","moment","created_at","now","lessonDeliveryDate","clone","add","canAccessLesson","ch","findLessonOnCourse","getLessonsCount","getLessonsDuration","duration","getLessonTrainer","getLessonCourse","trainer","fixEnroll","completed_lessons","trim","enrollsApi","getNextPrevLessons","prev","next","found","lesson_id","from","instructorsApi","ChaptersApi","QuizsApi","StudentsApi","WebinarsApi","username","attendees","AttendeesApi","webinar_id","ReportsApi","FormsApi","form","fname","lname","newslettersApi","subscribe","PagesApi","PostsApi","FORM_SPECIAL_KEYS","NotifyApi","k_n","toLowerCase","credentials","refer","target","DISPLAY_NAME","to","EMAIL","then","catch","_","register","delivery_type","shipment"],"mappings":"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","file":"tik-sdk.full.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@sentry/browser\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@sentry/browser\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tikSDK\"] = factory(require(\"@sentry/browser\"));\n\telse\n\t\troot[\"tikSDK\"] = factory(root[\"Sentry\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__7__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","import * as Sentry from '@sentry/browser'\nimport qs from 'querystringify'\nimport { base_url, base_domain } from '../config.js'\n\nif (!globalThis.tikSdkSession) {\n  globalThis.tikSdkSession = {\n    authToken: null,\n    instructorAuthToken: null,\n  }\n}\n\nclass BaseApi {\n  constructor() {\n    this.lookup_field = 'id'\n    this.useCache = {\n      list: false,\n      get: false,\n    }\n    this.validateCache = true\n  }\n\n  get base_domain() {\n    return base_domain()\n  }\n\n  get base_url() {\n    return base_url()\n  }\n\n  get session() {\n    return globalThis.tikSdkSession\n  }\n\n  configCache(cache, timeout) {\n    this.useCache = cache\n    if (this._cacheTimeout) {\n      clearInterval(this._cacheTimeout)\n    }\n    if (timeout) {\n      this.cacheTimeout = timeout\n      this._cacheTimeout = setInterval(() => {\n        this.validateCache = true\n      }, this.cacheTimeout)\n    }\n  }\n\n  async http(method, path, json, allow404 = false) {\n    if (path) {\n      path = `${this.resource}/${path}`\n    } else {\n      path = `${this.resource}`\n    }\n    let headers = {}\n    let url = `${this.base_url}${path}/`\n    let req\n    if (json && method === 'GET') {\n      url += qs.stringify(json, true)\n      json = null\n    } else if (json) {\n      if (Object.values(json).some((v) => v instanceof File)) {\n        const data = new FormData()\n        for (let [k, v] of Object.entries(json)) {\n          if (v === null) {\n            v = ''\n          }\n          data.append(k, v)\n        }\n        json = data\n      } else {\n        json = JSON.stringify(json)\n        headers = {\n          'Content-Type': 'application/json; charset=utf-8',\n        }\n      }\n    } else {\n      json = undefined\n    }\n    console.log(method, path, json || '')\n    try {\n      if (this.session.authToken) {\n        headers.Authorization = 'Bearer ' + this.session.authToken\n      }\n      req = await fetch(url, {\n        method,\n        headers,\n        body: json,\n        mode: 'cors',\n        // credentials: 'include',\n        cache: 'no-cache',\n        redirect: 'follow',\n        referrer: 'no-referrer',\n      })\n      if (!req.ok && !(allow404 && [404, 401].includes(req.status))) {\n        const error = new Error(req.statusText || req.status)\n        error.response = req\n        throw error\n      }\n      if (method !== 'DELETE') {\n        return await req.json()\n      }\n    } catch (e) {\n      console.error(\n        'HTTP Error:',\n        url.toString(),\n        JSON.stringify(json),\n        req && req.status\n      )\n      console.log('Sentry', typeof Sentry, Sentry, Object.keys(Sentry))\n      if (typeof Sentry === 'object' && 'captureException' in Sentry) {\n        Sentry.captureException(e)\n      }\n      throw e\n    }\n  }\n\n  toObj(o) {\n    return o\n  }\n\n  async list() {\n    if (this.useCache.list && !this.validateCache && this.data) {\n      console.log(`[HTTP] ${this.resource}.list(): using cache`)\n    } else {\n      const d = await this.http('GET', '')\n      this.data = d\n      this.validateCache = false\n    }\n    return this.data\n  }\n\n  async get(id, allow404 = false) {\n    if (id) {\n      const el = await this.http(\n        'GET',\n        id,\n        /* json= */ null,\n        /* allow404= */ allow404\n      )\n      return this.toObj(el)\n    } else {\n      return this.new()\n    }\n    /*\n    // const el = this.data.filter((el) => el.id === id);\n    if (el.length === 1) {\n      return el[0];\n    } else {\n      console.log(\"GET NEW\");\n      return this.new();\n    }\n    */\n  }\n\n  async save(\n    el,\n    id,\n    forceCreate = false,\n    partial_update = false,\n    allow404 = false\n  ) {\n    this.validateCache = true\n    if ((el.id || id) && !forceCreate) {\n      const instance = await this.http(\n        partial_update ? 'PATCH' : 'PUT',\n        id || el.id,\n        el,\n        allow404\n      )\n      return this.toObj(instance)\n      /*\n      const instance = this.get(el.id);\n      if (instance) {\n        const old = Object.assign({}, instance);\n        Object.assign(instance, el);\n        if (this.preUpdate) {\n          await this.preUpdate(old, instance);\n        }\n        if (this.postUpdate) {\n          await this.postUpdate(old, instance);\n        }\n      }\n      */\n    } else {\n      const instance = await this.http('POST', '', el, allow404)\n      return instance\n      /*\n      const nextId = Math.max(...this.data.map((c) => c.id)) + 1;\n      el.id = nextId;\n      if (this.preCreate) {\n        await this.preCreate(el);\n      }\n      this.data.push(el);\n      if (this.postCreate) {\n        await this.postCreate(el);\n      }\n      */\n    }\n  }\n\n  new() {\n    return null\n  }\n\n  async delete(id) {\n    this.validateCache = true\n    return this.http('DELETE', id)\n  }\n}\n\nexport default BaseApi\n","import { version } from '../package.json'\n\nconst DEFAULT_CONFIG = {\n  // env: 'production',\n  API_BASE_URL: '',\n  API_PREFIX: '/api/',\n  CACHE_PREFIX: '',\n  VERSION: version,\n  PROTOCOL: 'https',\n  // LANG: 'fr',\n}\n\nif (!globalThis.tikSdkConfig) {\n  globalThis.tikSdkConfig = {}\n}\n\n;(function setDefaultConfig() {\n  for (const k of Object.keys(DEFAULT_CONFIG)) {\n    if (!(k in globalThis.tikSdkConfig)) {\n      globalThis.tikSdkConfig[k] = DEFAULT_CONFIG[k]\n    }\n  }\n})()\n\nexport function setConfigValue(k, v) {\n  globalThis.tikSdkConfig[k] = v\n}\n\nexport function setConfig(c) {\n  for (const k of Object.keys(DEFAULT_CONFIG)) {\n    if (k in c) {\n      globalThis.tikSdkConfig[k] = c[k]\n    }\n  }\n}\n\nexport function setConfigOrganization($org) {\n  setConfig({\n    API_BASE_URL: $org.api_base_url,\n    API_PREFIX: $org.api_prefix,\n    CACHE_PREFIX: $org.cache_prefix,\n  })\n}\n\nexport function base_domain() {\n  return globalThis.tikSdkConfig.API_BASE_URL\n}\n\nexport function base_url() {\n  return base_domain() + globalThis.tikSdkConfig.API_PREFIX\n}\n\nexport default globalThis.tikSdkConfig\n","import BaseApi from '../core/base'\n\nexport class NewslettersApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'subscriptions'\n  }\n\n  async subscribe(subscription, newsletter) {\n    console.log('Subscripton', subscription.email)\n    await this.save({\n      subject: newsletter || process.env.NEWSLETTER_DEFAULT_SUBJECT,\n      full_name: subscription.full_name || 'utilisateur',\n      email: subscription.email,\n    })\n  }\n}\n\nconst newslettersApi = new NewslettersApi()\nexport default newslettersApi\n","if (!globalThis.tikSdkPermissions) {\n  globalThis.tikSdkPermissions = {}\n}\n\nexport function register(name, fn) {\n  globalThis.tikSdkPermissions[name] = fn\n}\n\nexport function hasPerm(name, $org, user, obj) {\n  if (!(name in globalThis.tikSdkPermissions)) {\n    return false\n  }\n  return globalThis.tikSdkPermissions[name]($org, user, obj)\n}\n","import BaseApi from './base'\n\nexport class UsersApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'users'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async me() {\n    return await this.http('GET', 'me', null, true)\n    return this.toObj(obj)\n  }\n\n  async activate(id, token) {\n    return await this.http('POST', `${id}/activate`, { token }, true)\n  }\n\n  async get_by_email(email) {\n    return await this.http('POST', 'email', { email }, true)\n  }\n}\n\nconst api = new UsersApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\nimport categoriesApi from './categories.js'\n\nclass ProductsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'products'\n    this.configCache({ list: true }, 15 * 1000)\n  }\n\n  new() {\n    return {\n      title: '',\n      count: 0,\n      sku: '',\n      // status: \"In Stock\",\n      category_id: null,\n      category_title: '',\n      is_active: true,\n      saleoffers: [],\n      price_net: 0,\n      tax_rate: 19,\n      cost_price: 0,\n      has_variants: false,\n      is_shipping_required: true,\n      is_digital: false,\n      charge_taxes: true,\n      charge_shipping: false,\n      // weight:,\n    }\n  }\n\n  async addStock(p, count) {\n    return this.http('POST', `${p.sku}/stock`, { count })\n  }\n\n  async rapport(query) {\n    return this.http('GET', `rapport`, query)\n  }\n\n  async categories() {\n    return categoriesApi.list()\n  }\n\n  defaultPrice(product) {\n    return parseFloat(product.price_net) * (1 + product.tax_rate / 100)\n  }\n\n  offerPrice(price, count, offer) {\n    price = parseFloat(price)\n    if (offer.discount_type === '%' && offer.discount_percentage) {\n      price = parseFloat(price) * (1 - offer.discount_percentage / 100)\n    } else if (offer.discount_type === 'n' && offer.discount_amount) {\n      price = parseFloat(price) - parseFloat(offer.discount_amount)\n    }\n    return price * count\n  }\n\n  offer(product, count) {\n    let offer = { count_min: 0, discount_percentage: 0 }\n    if (product.saleoffers) {\n      offer = product.saleoffers.reduce(\n        (cp, p) =>\n          p.count_min <= count && p.count_min >= cp.count_min ? p : cp,\n        offer\n      )\n    }\n    return offer\n  }\n\n  price(product, count) {\n    const price = this.defaultPrice(product)\n    const offer = this.offer(product, count)\n    return this.offerPrice(price, count, offer)\n  }\n\n  stockColor(product) {\n    if (product.count < 300) {\n      return '#dd4b39'\n    } else if (product.count < 500) {\n      return '#f39c12'\n    } else {\n      return '#00a65a'\n    }\n  }\n\n  status() {\n    return [\n      {\n        name: 'stock',\n        displayName: 'Stock',\n        icon: 'fa fa-cubes',\n        backgroundColor: 'rgb(137, 255, 88)',\n      },\n      {\n        name: 'new',\n        displayName: 'Nouveaux',\n        icon: 'fa fa-shopping-cart',\n        backgroundColor: '#f6e06c',\n      },\n      {\n        name: 'scheduled',\n        displayName: 'Rservs',\n        icon: 'fa fa-hourglass-half',\n        backgroundColor: 'rgb(255, 255, 210)',\n        color: 'white',\n      },\n      {\n        name: 'inprogress',\n        displayName: 'En Cours',\n        icon: 'fa fa-truck',\n        backgroundColor: '#337ab7',\n      },\n      {\n        name: 'done',\n        displayName: 'Dlivrs',\n        icon: 'fa fa-check',\n        backgroundColor: '#89ff58',\n      },\n\n      {\n        name: 'canceled',\n        displayName: 'Annuls',\n        icon: 'fa fa-times',\n        backgroundColor: '#ff7b7b',\n      },\n\n      {\n        name: 'paid',\n        displayName: 'Pays',\n        icon: 'fa fa-money',\n        backgroundColor: 'rgb(32, 216, 223)',\n      },\n      {\n        name: 'returned',\n        displayName: 'Retourne Dpot',\n        icon: 'fa fa-cubes',\n        backgroundColor: '#000000',\n        color: 'white',\n      },\n      {\n        name: 'released',\n        displayName: 'Librs',\n        icon: 'fa fa-truck',\n        backgroundColor: '#131654',\n      },\n    ]\n  }\n}\n\nconst productsApi = new ProductsApi()\nexport default productsApi\n","import BaseApi from './core/base'\nimport { base_url } from './config'\n\nclass OrganizationApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'site'\n    // this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  toObj(object) {\n    if (!object.attrs) {\n      object.attrs = {}\n    }\n    if (!object.payment_providers) {\n      object.payment_providers = []\n    }\n    object._phone = object.phone\n    delete object.cover_file\n    delete object.picture_file\n    delete object.background_image_file\n    return object\n  }\n}\n\nexport const organizationApi = new OrganizationApi()\n\nexport class Organization {\n  constructor(data) {\n    if (data) {\n      this.apply(data)\n    }\n  }\n\n  async refresh() {\n    const data = await organizationApi.list()\n    if (data) {\n      this.apply(data)\n    }\n  }\n\n  apply(data) {\n    this.data = data\n    const $base_url = new URL(base_url())\n    this.http_protocol = ($base_url.protocol || 'https:') + '//'\n    this.http_port = $base_url.port ? `:${$base_url.port}` : ''\n    const domains = {}\n    for (const domain of data.domains) {\n      domains[domain.type] = domain.domain\n    }\n    if (!domains.api) {\n      domains.api = domains.admin\n    }\n    if (!domains.admin) {\n      domains.admin = domains.api\n    }\n    if (!domains.cdn) {\n      domains.cdn = domains.api\n    }\n\n    this.domains = domains\n\n    this.env(this)\n  }\n\n  html2txt(html) {\n    if (html) {\n      return html.replace(/<[^>]+>/g, '')\n    } else {\n      return ''\n    }\n  }\n\n  env(ctxt) {\n    if (!ctxt) {\n      ctxt = {}\n    }\n    ctxt.hide_website = !!(this.data.hide_website || process.env.HIDE_WEBSITE)\n    ctxt.modules = (this.data.modules || process.env.MODULES || '').split(',')\n    ctxt.installed_apps = (\n      this.data.installed_apps ||\n      process.env.INSTALLED_APPS ||\n      ''\n    ).split(',')\n    ctxt.delivery_backends = (\n      this.data.delivery_backends ||\n      process.env.DELIVERY_BACKENDS ||\n      ''\n    ).split(',')\n    ctxt.description = this.data.description || ''\n    ctxt.description_txt =\n      this.data.description_txt || this.html2txt(this.data.description) || ''\n    ctxt.display_name = this.data.display_name || this.data.name\n    ctxt.short_name = this.data.name\n    ctxt.cover = this.static(this.data.cover)\n    ctxt.picture = this.static(this.data.picture)\n    ctxt.favicon = this.static(this.data.favicon)\n    ctxt.logo = this.static(this.data.picture)\n    ctxt.background_image = this.static(this.data.background_image)\n    ctxt.email = this.data.email\n    ctxt.location = this.data.location\n    ctxt.phone = this.data.phone\n    ctxt.slug = this.data.slug\n    ctxt.cache_prefix = this.data.slug\n    ctxt.about_us = this.data.summary\n    ctxt.about_us_fr = this.data.summary\n    ctxt.fb_url = this.data.facebook_url\n    ctxt.twitter_url = this.data.twitter_url\n    ctxt.youtube_url = this.data.youtube_url\n    ctxt.instagram_url = this.data.instagram_url\n    ctxt.linkedin_url = this.data.linkedin_url\n    ctxt.wiretransfer = this.data.wiretransfer\n    ctxt.mandat = this.data.mandat\n    ctxt.payment_providers = this.data.payment_providers\n    ctxt.default_currency = this.data.default_currency\n    ctxt.tax_rate = this.data.tax_rate\n    ctxt.tax_stamp = this.data.tax_stamp\n    ctxt.api_prefix = process.env.API_PREFIX || '/api/'\n    ctxt.maintenance_mode =\n      this.data.maintenance_mode || process.env.MAINTENANCE_MODE\n    ctxt.maintenance_token =\n      this.data.maintenance_token || process.env.MAINTENANCE_TOKEN\n    ctxt.api_base_url = `${this.http_protocol}${this.domains.api}${this.http_port}`\n    if (this.domains.webapp) {\n      ctxt.base_url = `${this.http_protocol}${this.domains.webapp}`\n    } else {\n      ctxt.base_url = process.env.BASE_URL\n    }\n\n    ctxt.piwik_site_id = this.data.piwik_site_id || process.env.PIWIK_SITE_ID\n    ctxt.fb_pixel_id = this.data.fb_pixel_id || process.env.FB_PIXEL_ID\n    ctxt.fb_page_id = this.data.fb_page_id || process.env.FB_PAGE_ID\n    ctxt.fb_app_id = this.data.fb_app_id\n    ctxt.google_analytics_id =\n      this.data.google_analytics_id || process.env.GOOGLE_ANALYTICS_ID\n    ctxt.google_gtag_id = this.data.google_gtag_id || process.env.GOOGLE_GTAG_ID\n    ctxt.locales = (process.env.LOCALES || 'en-US,fr-FR').split(',')\n    ctxt.default_locale = this.data.default_locale\n    ctxt.newsletter_default_subject = 'default'\n    return ctxt\n  }\n\n  ENV(ctxt) {\n    if (!ctxt) {\n      ctxt = {}\n    }\n    function value(val) {\n      return val === null || val === undefined ? '' : val\n    }\n    const $env = this.env()\n    for (const envar of Object.keys($env)) {\n      const val = value($env[envar])\n      if (Array.isArray(val)) {\n        ctxt[envar.toUpperCase()] = val.join(',')\n      } else if (val && typeof val === 'object') {\n        for (const k of Object.keys(val)) {\n          const v = value(val[k])\n          ctxt[`${envar}_${k}`.toUpperCase()] = v\n        }\n      } else {\n        ctxt[envar.toUpperCase()] = val\n      }\n    }\n    return ctxt\n  }\n\n  static(path) {\n    if (path && path.startsWith('/'))\n      return `${this.http_protocol}${this.domains.cdn}${this.http_port}${path}`\n    else return path\n  }\n  hasModule(md) {\n    return this.modules.includes(md)\n  }\n  hasDeliveryBackend(md) {\n    return this.delivery_backends.includes(md)\n  }\n}\n\nif (!globalThis.TikSdkOrganization) {\n  globalThis.TikSdkOrganization = new Organization()\n}\nconst $organization = globalThis.TikSdkOrganization\nexport default $organization\n","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","import { UsersApi } from '../core/users.js'\n\nclass StaffsApi extends UsersApi {\n  constructor() {\n    super()\n    this.resource = 'staffs'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      full_name: '',\n      status: 'indoor',\n      roles: ['commercial'],\n      phone: '',\n      email: '',\n      attrs: {\n        unlimited_access: false,\n        // is_freelance: false,\n        start_at: '08:00',\n        end_at: '18:00',\n      },\n      is_active: true,\n    }\n  }\n\n  toObj(o) {\n    if (!o || o.code === 'user_not_found') return null\n    const ALL_ROLES = [\n      'admin',\n      'manager',\n      'finance',\n      'suivi',\n      'commercial',\n      'stock',\n      'freelance',\n    ]\n    o.roles = ALL_ROLES.filter((r) => o.roles.includes(r))\n    Object.defineProperties(o, {\n      role: {\n        get() {\n          return this.roles[0]\n        },\n      },\n      is_admin: {\n        get() {\n          return this.roles.includes('admin')\n        },\n      },\n      is_freelance: {\n        get() {\n          return this.roles.includes('freelance')\n        },\n      },\n      start_at: {\n        value: '08:00',\n        writable: false,\n      },\n      end_at: {\n        value: '18:00',\n        writable: false,\n      },\n      unlimited_access: {\n        get() {\n          return this.attrs.unlimited_access\n        },\n        set(val) {\n          this.attrs.unlimited_access = val\n        },\n      },\n    })\n    return o\n  }\n\n  async unlimited() {\n    return this.http('GET', 'unlimited')\n  }\n\n  roles() {\n    return [\n      'admin',\n      'manager',\n      'finance',\n      'suivi',\n      'commercial',\n      'stock',\n      ...((process.env.MODULES.includes('pos') && ['pos']) || []),\n    ]\n  }\n}\n\nconst staffsApi = new StaffsApi()\nexport default staffsApi\n","import config from '../config'\n\nexport class Cache {\n  has(n) {\n    return (\n      global.localStorage &&\n      global.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n    )\n  }\n\n  del(n) {\n    if (global.localStorage) {\n      delete global.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n    }\n  }\n\n  get(n, use_cache = true) {\n    if (use_cache && this.has(n)) {\n      try {\n        return JSON.parse(\n          global.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n        )\n      } catch (e) {}\n    }\n  }\n\n  set(n, res) {\n    if (global.localStorage) {\n      const k = `${config.CACHE_PREFIX}_cache_${n}`\n      global.localStorage[k] = JSON.stringify(res)\n    }\n  }\n\n  async withCache(n, fn, use_cache = false) {\n    const cache = this.get(n, use_cache)\n    if (cache) return cache\n    const res = await fn()\n    this.set(n, res)\n    return res\n  }\n\n  async fallbackCache(n, fn, forceCache = false) {\n    let res\n    if (forceCache) {\n      return this.get(n, true)\n    }\n    try {\n      res = await fn()\n      this.set(n, res)\n    } catch (e) {\n      if (e.message !== 'Forbidden') {\n        res = this.get(n, true)\n      } else {\n        throw e\n      }\n    }\n    return res\n  }\n}\n\nexport default new Cache()\n","import BaseApi from '../core/base.js'\n\nclass CategoriesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'categories'\n    this.configCache({ list: true }, 60 * 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      title: '',\n      thumbnail: undefined,\n      is_active: true,\n    }\n  }\n}\n\nconst categoriesApi = new CategoriesApi()\n\nexport default categoriesApi\n","import BaseApi from '../core/base.js'\n\nclass DeliveryCompaniesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'delivery-companies'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      type: 'aramex',\n      attrs: {},\n      name: '',\n      done: 0,\n      canceled: 0,\n      phone: '',\n      email: '',\n      address: '',\n      is_active: true,\n    }\n  }\n\n  async rapport(query) {\n    return this.http('GET', `rapport`, query)\n  }\n\n  async primary() {\n    return (await this.list()).find((it) => it.is_primary)\n  }\n\n  toObj(o) {\n    if (!o.attrs) {\n      o.attrs = {}\n    }\n    this.updateAttrs(o)\n    return o\n  }\n\n  updateAttrs(o) {\n    if (!o.type) {\n      return\n    }\n    const attrs = this.typeAttrs(o.type)\n    for (const attr of attrs) {\n      if (o.attrs[attr.name] === undefined) {\n        o.attrs[attr.name] = attr.default\n      }\n    }\n  }\n\n  typeAttrs(type) {\n    const res = this.types().find((it) => it.ref === type)\n    if (res) {\n      return res.attrs\n    } else {\n      return []\n    }\n  }\n\n  types() {\n    return [\n      {\n        ref: 'aramex',\n        name: 'Aramex',\n        color: 'rgb(228, 51, 51)',\n        attrs: [\n          { name: 'number', type: 'text', default: '' },\n          { name: 'pin', type: 'password', default: '' },\n          { name: 'entity', type: 'text', default: 'TUN' },\n          { name: 'country_code', type: 'text', default: 'TN' },\n        ],\n      },\n      {\n        ref: 'fparcel',\n        name: 'FParcel',\n        color: 'rgb(23, 97, 39)',\n        attrs: [],\n      },\n      {\n        ref: '1delivery',\n        name: 'First Delivery',\n        color: 'rgb(0, 141, 76)',\n        attrs: [],\n      },\n      {\n        ref: 'tnexpress',\n        name: 'Tunisia Express',\n        color: 'rgb(0, 128, 255)',\n        attrs: [\n          { name: 'username', type: 'text', default: '' },\n          { name: 'password', type: 'password', default: '' },\n          { name: 'api_key', type: 'text', default: '' },\n        ],\n      },\n    ]\n  }\n\n  status() {\n    return [\n      {\n        name: 'new',\n        displayName: 'Nouveaux',\n        icon: 'fa fa-hourglass-half',\n        backgroundColor: 'rgb(255,255,210)',\n        color: 'black',\n      },\n      {\n        name: 'created',\n        displayName: 'Command Confirme',\n        icon: 'fa fa-shopping-cart',\n        backgroundColor: 'rgb(246, 224, 108)',\n        color: 'black',\n      },\n      {\n        name: 'in_delivery_facility',\n        displayName: 'En Depot',\n        icon: 'fa fa-bank',\n        backgroundColor: 'rgb(212, 137, 69)',\n      },\n      {\n        name: 'out_for_delivery',\n        displayName: 'En Cours',\n        icon: 'fa fa-truck',\n        backgroundColor: '#337ab7',\n      },\n      {\n        name: 'returned_delivery_facility',\n        displayName: 'Echec',\n        icon: 'fa fa-warning',\n        backgroundColor: 'rgb(255, 123, 123)',\n      },\n      {\n        name: 'canceled',\n        displayName: 'Annul',\n        icon: 'fa fa-times',\n        backgroundColor: 'rgb(228, 51, 51)',\n      },\n      {\n        name: 'delivered',\n        displayName: 'Dlivr',\n        icon: 'fa fa-check',\n        backgroundColor: 'rgb(137, 255, 88)',\n      },\n      {\n        name: 'returned_shipper',\n        displayName: 'Retourne Definitif',\n        icon: 'fa fa-cubes',\n        backgroundColor: 'black',\n      },\n      {\n        name: 'paid',\n        displayName: 'Pay',\n        icon: 'fa fa-money',\n        backgroundColor: 'rgb(32, 216, 223)',\n      },\n    ]\n  }\n}\n\nconst deliveryCompaniesApi = new DeliveryCompaniesApi()\n\nexport default deliveryCompaniesApi\n","import BaseApi from '../core/base.js'\n\nclass StoresApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'stores'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      title: '',\n      thumbnail: undefined,\n      phone: '',\n      email: '',\n      address: '',\n      city: '',\n      country: 'TN',\n      state: 'Sfax',\n      company_name: '',\n      vat_number: '',\n      postal_code: 3000,\n      is_active: true,\n    }\n  }\n\n  async primary() {\n    return (await this.list()).find((it) => it.is_primary)\n  }\n}\n\nconst storesApi = new StoresApi()\n\nexport default storesApi\n","import BaseApi from '../core/base.js'\n\nexport class EntollsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'enrolls'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async registerOrder(\n    course_id,\n    provider,\n    settings\n    // { success_url, failure_url, coupon }\n  ) {\n    return await this.http('POST', `${course_id}/payment`, {\n      provider,\n      ...settings,\n    })\n  }\n\n  async orderSuccess(course_id, order_id) {\n    return await this.http('POST', `${course_id}/success`, {\n      order_id,\n    })\n  }\n\n  async orderFailure(course_id, order_id) {\n    return await this.http('POST', `${course_id}/failure`, {\n      order_id,\n    })\n  }\n}\n\nconst api = new EntollsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class LessonsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'lessons'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new LessonsApi()\n\nexport default api\n","import { UsersApi } from '../core/users.js'\n\nexport class InstructorsApi extends UsersApi {\n  constructor() {\n    super()\n    this.resource = 'instructors'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async featured() {\n    return await this.http('GET', 'featured')\n  }\n}\n\nconst api = new InstructorsApi()\n\nexport default api\n","export * from './src/index.js'\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","import * as Sentry from '@sentry/browser'\nimport BaseApi from './base.js'\n// import usersApi from './users.js'\nimport staffsApi from '../crm/staffs.js'\nimport cache from '../utils/cache.js'\n\nexport class AuthApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'token'\n    // this.configCache({ list: true }, 60 * 60 * 1000)\n    this.me = {}\n    this.ns = {\n      me: 'me',\n      token: 'token',\n      authToken: 'authToken',\n    }\n  }\n\n  async fetchMe() {\n    // return await usersApi.me()\n    return await staffsApi.me()\n  }\n\n  async currentUser() {\n    if (this.me && this.me.id) {\n      return this.me\n    } else {\n      let resp\n      if (cache.has(this.ns.me)) {\n        resp = cache.get(this.ns.me)\n      }\n      if (navigator.onLine) {\n        try {\n          resp = await this.fetchMe()\n        } catch (e) {}\n      }\n      if (!resp) {\n        await this.logout()\n        return null\n      }\n      cache.set(this.ns.me, resp)\n      this.me = resp\n\n      Sentry.configureScope((scope) => {\n        scope.setUser({ id: this.me.email })\n      })\n      return this.me\n    }\n  }\n\n  async login(email, password) {\n    const resp = await this.http('POST', '', { email, password }, true)\n    if (resp.access) {\n      this.session[this.ns.authToken] = resp.access\n      cache.set(this.ns.token, { token: resp.access })\n      return true\n    } else {\n      return false\n    }\n  }\n\n  async isLoggedin() {\n    const token = cache.get(this.ns.token)\n    if (token) {\n      let resp = true\n      if (navigator.onLine) {\n        resp = await this.http('POST', 'verify', token, true)\n        resp = resp && resp.code !== 'token_not_valid'\n      }\n      if (resp) {\n        this.session[this.ns.authToken] = token.token\n        console.log(this.session)\n        return true\n      }\n    }\n    cache.del(this.ns.token)\n    return false\n  }\n\n  async logout() {\n    this.me = {}\n    this.session[this.ns.authToken] = null\n    cache.del(this.ns.token)\n    cache.del(this.ns.me)\n    Sentry.configureScope((scope) => {\n      scope.setUser({})\n    })\n  }\n}\n\nconst authApi = new AuthApi()\nexport default authApi\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import BaseApi from '../core/base.js'\n\nclass ClientsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'clients'\n    this.configCache({ list: true }, 5 * 60 * 1000)\n    this.model_name = 'Client'\n    this.model_name_plural = 'Clients'\n  }\n\n  new() {\n    return {\n      full_name: '',\n      first_name: '',\n      last_name: '',\n      attrs: {\n        type: 'detail',\n        facebook_url: '',\n      },\n      phone: '',\n      address: '',\n      country: 'TN',\n      state: 'Sfax',\n      postal_code: '',\n      email: '',\n      company_name: '',\n      vat_number: '',\n    }\n  }\n\n  toObj(o) {\n    if (!o.attrs) {\n      o.attrs = {}\n    }\n    Object.defineProperties(o, {\n      type: {\n        get() {\n          return this.attrs.type\n        },\n        set(val) {\n          this.attrs.type = val\n        },\n      },\n    })\n    return o\n  }\n\n  async rapport(id) {\n    return this.http('GET', id + '/rapport')\n  }\n\n  async history(id) {\n    return this.http('GET', id + '/history')\n  }\n  typeAchat() {\n    return ['gros', 'detail']\n  }\n\n  states() {\n    return [\n      'Ariana',\n      'Beja',\n      'Ben Arous',\n      'Bizerte',\n      'Gabes',\n      'Gafsa',\n      'Jendouba',\n      'Kairouan',\n      'Kasserine',\n      'Kebili',\n      'Kef',\n      'Mahdia',\n      'Mannouba',\n      'Medenine',\n      'Monastir',\n      'Nabeul',\n      'Sfax',\n      'Sidi Bouzid',\n      'Siliana',\n      'Sousse',\n      'Tataouine',\n      'Tozeur',\n      'Tunis',\n      'Zaghouan',\n    ]\n  }\n}\n\nconst clientsApi = new ClientsApi()\nexport default clientsApi\n","import productsApi from './products.js'\nimport BaseApi from '../core/base.js'\n\nclass CollectionsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'collections'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      sku: '',\n      title: '',\n      description: '',\n      delivery_id: null,\n      suivi_id: null,\n      items: [\n        {\n          product_id: null,\n          name: '',\n          price: 0,\n          count: 0,\n        },\n      ],\n      discount: 0,\n      price_net: 0,\n      thumbnail: '',\n      is_active: true,\n    }\n  }\n\n  itemPrice(item) {\n    if (item.product_id) {\n      if (item.product) {\n        return productsApi.price(item.product, item.count)\n      } else {\n        // TODO\n      }\n    } else {\n      return parseFloat(item.price)\n    }\n  }\n\n  addItem(collection, product) {\n    let item\n    if (typeof product === 'object') {\n      item = collection.items.find((it) => it.product_id === product.id)\n      if (item) {\n        item.count++\n      } else {\n        item = {\n          title: product.title,\n          count: 1,\n          // price: product.price,\n          product_id: product.id,\n          max_count: product.count,\n          product,\n        }\n        collection.items.push(item)\n      }\n    } else {\n      item = {\n        title: '',\n        count: 0,\n        price: 0,\n        product_id: null,\n        max_count: 0,\n      }\n      collection.items.push(item)\n    }\n    item.price = this.itemPrice(item)\n    collection.price_net = this.price(collection)\n  }\n\n  changeItemProduct(collection, item, product) {\n    if (typeof product === 'string') {\n      item.product_id = null\n      item.product = null\n      item.title = product\n      item.max_count = 4294967295\n    } else {\n      item.product_id = product.id\n      item.product = product\n      item.title = product.title\n      item.max_count = product.count || 4294967295\n    }\n    item.price = 0\n    item.count = 1\n    item.price = this.itemPrice(item)\n    collection.price_net = this.price(collection)\n  }\n\n  removeItem(collection, item) {\n    collection.items.splice(collection.items.indexOf(item), 1)\n    collection.price_net = this.price(collection)\n  }\n\n  price(collection) {\n    const price =\n      collection.items.reduce((s, it) => this.itemPrice(it) + s, 0) -\n      parseFloat(collection.discount)\n    return Math.round(price * 100) / 100\n  }\n}\n\nconst collectionsApi = new CollectionsApi()\nexport default collectionsApi\n","import BaseApi from '../core/base.js'\n\nimport deliveryCompaniesApi from './delivery.js'\nimport storesApi from './stores.js'\nimport productsApi from './products.js'\nimport $organization from '../organization'\n\nclass CommadsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'commands'\n    this.configCache({ list: true }, 60 * 1000)\n  }\n\n  async new() {\n    return {\n      client_id: null,\n      client_attrs: {\n        full_name: '',\n        phone: '',\n        address: '',\n        country: 'TN',\n        state: '',\n        city: '',\n        postal_code: '',\n      },\n      type: 'delivery',\n      delivery_id: ((await deliveryCompaniesApi.primary()) || {}).id,\n      store_id: ((await storesApi.primary()) || {}).id,\n      store_name: ((await storesApi.primary()) || {}).title,\n      commercial_id: null,\n      suivi_id: null,\n      status: 'new',\n      customer_note: '',\n      staff_notes: [],\n      items: [\n        {\n          product_id: null,\n          title: '',\n          price: 0,\n          count: 0,\n        },\n      ],\n      discount: 0,\n      total: 0,\n    }\n  }\n\n  setClient(command, client) {\n    if (client) {\n      command.client_id = client.id\n      command.client_attrs.phone = client.phone\n      command.client_attrs.full_name = client.full_name\n      command.client_attrs.address = client.address\n      command.client_attrs.country = client.country\n      command.client_attrs.state = client.state\n      command.client_attrs.postal_code = client.postal_code\n    } else {\n      command.client_id = null\n      command.client_attrs = {}\n    }\n  }\n\n  itemPrice(item) {\n    if (item.product_id) {\n      if (item.product) {\n        return productsApi.price(item.product, item.count)\n      } else {\n        // TODO\n      }\n    } else {\n      return parseFloat(item.price)\n    }\n  }\n\n  addItem(command, product) {\n    let item\n    if (typeof product === 'object') {\n      item = command.items.find((it) => it.product_id === product.id)\n      if (item) {\n        item.count++\n      } else {\n        item = {\n          title: product.title,\n          count: 1,\n          // price: product.price,\n          product_id: product.id,\n          max_count: product.count,\n          product,\n        }\n        command.items.push(item)\n      }\n    } else {\n      item = {\n        title: '',\n        count: 0,\n        price: 0,\n        product_id: null,\n        max_count: 0,\n      }\n      command.items.push(item)\n    }\n    item.price = this.itemPrice(item)\n    command.total = this.price(command)\n  }\n\n  changeItemProduct(command, item, product) {\n    if (typeof product === 'string') {\n      item.product_id = null\n      item.product = null\n      item.title = product\n      item.max_count = 4294967295\n    } else {\n      item.product_id = product.id\n      item.product = product\n      item.title = product.title\n      item.max_count = product.count || 4294967295\n    }\n    item.price = 0\n    item.count = 1\n    item.price = this.itemPrice(item)\n    command.total = this.price(command)\n  }\n\n  removeItem(command, item) {\n    command.items.splice(command.items.indexOf(item), 1)\n    command.total = this.price(command)\n  }\n\n  price(command) {\n    const price =\n      command.items.reduce((s, it) => this.itemPrice(it) + s, 0) -\n      parseFloat(command.discount || 0)\n    return Math.round(price * 100) / 100\n  }\n\n  totalHT(cmd) {\n    if ($organization.tax_rate) {\n      return (\n        (parseFloat(cmd.total) + parseFloat(cmd.discount || 0)) /\n        (1 + parseFloat($organization.tax_rate) / 100)\n      )\n    } else {\n      return parseFloat(cmd.total) + parseFloat(cmd.discount || 0)\n    }\n  }\n\n  tva(cmd) {\n    if ($organization.tax_rate) {\n      return (\n        (parseFloat(cmd.total) /\n          (1 + parseFloat($organization.tax_rate) / 100)) *\n        (parseFloat($organization.tax_rate) / 100)\n      )\n    } else {\n      return 0 // parseFloat(cmd.total)\n    }\n  }\n\n  ttc(command) {\n    return parseFloat(command.total) + parseFloat($organization.tax_stamp || 0)\n  }\n\n  async rapport(query) {\n    return this.http('GET', 'rapport', query)\n  }\n\n  async deliver(cmd, shipment_id = null) {\n    if (shipment_id) {\n      return this.http('POST', `${cmd.id}/deliver`, {\n        command_id: cmd.id,\n        shipment_id,\n      })\n    } else {\n      return this.http('POST', `${cmd.id}/deliver`)\n    }\n  }\n\n  async track(cmd) {\n    return this.http('POST', `${cmd.id}/track`)\n  }\n\n  async shipment(cmd) {\n    return this.http('GET', `${cmd.id}/deliver`)\n  }\n\n  async assign(user_id, commands) {\n    return this.http('POST', 'assign', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async makeNew(user_id, commands) {\n    return this.http('POST', 'new', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async cash(user_id, commands) {\n    return this.http('POST', 'cash', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async paid(user_id, commands) {\n    return this.http('POST', 'paid', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async returned(user_id, commands) {\n    return this.http('POST', 'returned', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  commandTypes() {\n    return ['direct', 'delivery']\n  }\n\n  commandStatus() {\n    return [\n      'new',\n      'scheduled',\n      'inprogress',\n      'done',\n      'canceled',\n      'returned',\n      'cash',\n      'paid',\n    ]\n  }\n\n  /*\n  async postCreate(command) {\n    for (const item of command.items) {\n      if (item.product_id) {\n        const p = await productsApi.get(item.product_id);\n        p.count -= item.count;\n        await productsApi.save(p);\n      }\n    }\n  }\n  async postUpdate(oldC, newC) {\n    if (oldC.status !== 'canceled' && newC.status === 'canceled') {\n      for (const item of newC.items) {\n        if (item.product_id) {\n          const p = await productsApi.get(item.product_id);\n          p.count += item.count;\n          await productsApi.save(p);\n        }\n      }\n    }\n  }\n  */\n  status() {\n    return [\n      {\n        name: 'new',\n        displayName: 'Nouveaux',\n        icon: 'fa fa-shopping-cart',\n        backgroundColor: '#f6e06c',\n        date: 'created_at',\n      },\n      {\n        name: 'scheduled',\n        displayName: 'Rservs',\n        icon: 'fa fa-hourglass-half',\n        backgroundColor: 'rgb(255, 255, 210)',\n        date: 'scheduled_at',\n      },\n      {\n        name: 'inprogress',\n        displayName: 'En Cours',\n        icon: 'fa fa-truck',\n        backgroundColor: '#337ab7',\n        date: 'assigned_at',\n      },\n      {\n        name: 'done',\n        displayName: 'Dlivrs',\n        icon: 'fa fa-check',\n        backgroundColor: '#89ff58',\n        date: 'completed_at',\n      },\n\n      {\n        name: 'canceled',\n        displayName: 'Annuls',\n        icon: 'fa fa-times',\n        backgroundColor: '#ff7b7b',\n        date: 'completed_at',\n      },\n\n      {\n        name: 'cash',\n        displayName: 'Encaiss',\n        icon: 'fa fa-bank',\n        backgroundColor: '#e6e6e6',\n        date: 'cash_at',\n      },\n      {\n        name: 'paid',\n        displayName: 'Pays',\n        icon: 'fa fa-money',\n        backgroundColor: 'rgb(32, 216, 223)',\n        date: 'paid_at',\n      },\n      {\n        name: 'returned',\n        displayName: 'Retourne Dpot',\n        icon: 'fa fa-cubes',\n        backgroundColor: '#000000',\n        color: 'white',\n        date: 'paid_at',\n        dark: true,\n      },\n    ]\n  }\n}\n\nconst commandsApi = new CommadsApi()\nexport default commandsApi\n","import BaseApi from '../core/base.js'\n\nclass StockApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'stock'\n    this.configCache({ list: true }, 60 * 1000)\n  }\n\n  async report(assigned_at, suivi_id) {\n    return this.http('GET', 'report', {\n      assigned_at,\n      suivi_id,\n    })\n  }\n\n  async release(user_id, commands) {\n    return this.http('POST', 'release', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n}\n\nconst stockApi = new StockApi()\nexport default stockApi\n","import BaseApi from '../core/base.js'\n\nexport class AttachmentsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'attachments'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new AttachmentsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\nimport enrollsApi from './enrolls'\nimport lessonsApi from './lessons'\nimport instructorsApi from './instructors'\nimport cache from '../utils/cache'\n\nexport class CoursesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'courses'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async getCourse(id, forceCache = false) {\n    return await cache.fallbackCache(\n      'courses_get_' + id,\n      async () => await this.get(id),\n      forceCache\n    )\n  }\n\n  async listCourses(forceCache = false) {\n    return await cache.fallbackCache(\n      'courses_list',\n      async () => await this.list(),\n      forceCache\n    )\n  }\n\n  async getLesson(id, forceCache = false) {\n    return await cache.fallbackCache(\n      'lessons_get_' + id,\n      async () => await lessonsApi.get(id),\n      forceCache\n    )\n  }\n\n  async listEnrolledCourses() {\n    return await this.http('GET', `enrolled`)\n  }\n\n  getLessonChapter(lesson, course) {\n    return course.chapters.find((c) =>\n      c.lessons.some((l) => l.id === lesson.id)\n    )\n  }\n\n  setupCourseLessons(course) {\n    let count = 0\n    let duration = 0\n    let days = 0\n    for (const m of course.chapters) {\n      for (const l of m.lessons) {\n        l.index = count\n        l.is_open = true\n        l.start_at = {\n          immediate: 0,\n          daily: 1,\n          weekly: 7,\n          custom: -1,\n        }[course.schedule]\n        l.start_at *= l.index\n        if (l.start_at === undefined || l.start_at < 0) {\n          l.start_at = l.start_date || l.start_day\n        }\n        count++\n      }\n    }\n    course.lessons_duration = course.days\n    course.lessons_days = course.days\n    course.lessons_count = count\n  }\n\n  setupCourseSchedule(course, enroll, moment) {\n    let created_at = null\n    if (enroll) {\n      created_at = moment(enroll.created_at)\n    }\n    const now = moment()\n    function lessonDeliveryDate(l) {\n      if (l.start_date) {\n        return moment(l.start_date)\n      } else if (enroll) {\n        return created_at.clone().add(l.start_at, 'days')\n        // .startOf('day')\n      } else {\n        return moment(l.start_at)\n      }\n    }\n    function canAccessLesson(l) {\n      if (enroll) {\n        return now > l.start_at\n      } else {\n        return !l.start_at\n      }\n    }\n    for (const ch of course.chapters) {\n      for (const l of ch.lessons) {\n        l.start_at = lessonDeliveryDate(l)\n        l.is_open = canAccessLesson(l)\n      }\n    }\n    return course\n  }\n\n  findLessonOnCourse(lesson, course) {\n    for (const ch of course.chapters) {\n      for (const l of ch.lessons) {\n        if (l.id === lesson.id) {\n          return l\n        }\n      }\n    }\n  }\n\n  getLessonsCount(course) {\n    let count = 0\n    for (const m of course.chapters) {\n      count += m.lessons.length\n    }\n    return count\n  }\n\n  getLessonsDuration(course) {\n    let count = 0\n    for (const m of course.chapters) {\n      for (const l of m.lessons) {\n        count += l.duration || 0\n      }\n    }\n    return count\n  }\n\n  getLessonTrainer(id) {\n    // FIXME\n    try {\n      return this.getLessonCourse(id).trainer\n    } catch (e) {}\n  }\n\n  fixEnroll(enroll) {\n    if (enroll && typeof enroll.completed_lessons === 'string') {\n      enroll.completed_lessons = enroll.completed_lessons\n        .split(',')\n        .map((e) => e.trim())\n        .filter((e) => e)\n    }\n    return enroll\n  }\n\n  async getCourseEnroll(course_id, user_id, forceCache = false) {\n    // user_id = parseInt(user_id)\n\n    const enroll = await cache.fallbackCache(\n      'users_' + user_id + '_enrolls_' + course_id,\n      async () => await enrollsApi.get(course_id, true),\n      forceCache\n    )\n    if (enroll && enroll.id) {\n      return this.fixEnroll(enroll)\n    }\n  }\n\n  async getUserEnrolls(user_id) {\n    // user_id = parseInt(user_id)\n    return await enrollsApi.list()\n  }\n\n  getNextPrevLessons(course, lesson) {\n    let prev = null\n    let next = null\n    let found = false\n\n    for (const m of course.chapters) {\n      if (next) {\n        break\n      }\n      for (const l of m.lessons) {\n        if (found) {\n          next = l\n          break\n        }\n        if (lesson.id === l.id) {\n          found = true\n        }\n        if (!found) {\n          prev = l\n        }\n      }\n    }\n    return [prev, next]\n  }\n\n  async markCompleted(lesson_id, enroll) {\n    let completed_lessons = Array.from(enroll.completed_lessons)\n    if (!completed_lessons.includes(lesson_id)) {\n      completed_lessons.push(lesson_id)\n    }\n    enroll = await enrollsApi.save(\n      {\n        id: enroll.id,\n        course: enroll.course,\n        completed_lessons: completed_lessons.join(','),\n      },\n      enroll.id\n    )\n    return this.fixEnroll(enroll)\n  }\n\n  async enroll(course, user_id) {\n    // user_id = parseInt(user_id)\n    if (course.id) {\n      course = course.id\n    }\n    const enroll = await enrollsApi.save({\n      course,\n      completed_lessons: '',\n    })\n    return this.fixEnroll(enroll)\n  }\n\n  async getInstructor(id, forceCache) {\n    // id = parseInt(id)\n    return await cache.fallbackCache(\n      'instructors_get_' + id,\n      async () => await instructorsApi.get(id),\n      forceCache\n    )\n  }\n}\n\nconst coursesApi = new CoursesApi()\n\nexport default coursesApi\n","import BaseApi from '../core/base.js'\n\nexport class ChaptersApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'chapters'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new ChaptersApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class QuizsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'quizs'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new QuizsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class StudentsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'students'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async me() {\n    const obj = await this.http('GET', 'me', null, true)\n    return this.toObj(obj)\n  }\n\n  async activate(id, token) {\n    return await this.http('POST', `${id}/activate`, { token }, true)\n  }\n\n  async get_by_email(email) {\n    return await this.http('POST', 'email', { email }, true)\n  }\n}\n\nconst api = new StudentsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class WebinarsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'webinars'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async join(id, username) {\n    const res = await this.http('POST', `${id}/join`, {\n      username,\n    })\n    return res.url\n  }\n\n  async get_default() {\n    try {\n      const res = await this.http('GET', 'default')\n      return res\n    } catch (e) {\n      return null\n    }\n  }\n\n  async create_default(name, attendees) {\n    const res = await this.http('POST', 'default', {\n      name,\n      attendees,\n    })\n    return res\n  }\n}\n\nconst api = new WebinarsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class AttendeesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'attendees'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async registerOrder(\n    webinar_id,\n    provider,\n    settings\n    // { success_url, failure_url, coupon }\n  ) {\n    return await this.http('POST', `${webinar_id}/payment`, {\n      provider,\n      ...settings,\n    })\n  }\n\n  async orderSuccess(webinar_id, order_id) {\n    return await this.http('POST', `${webinar_id}/success`, {\n      order_id,\n    })\n  }\n\n  async orderFailure(webinar_id, order_id) {\n    return await this.http('POST', `${webinar_id}/failure`, {\n      order_id,\n    })\n  }\n}\n\nconst api = new AttendeesApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class ReportsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'reports'\n  }\n\n  async course(id) {\n    return await this.http('GET', `courses/${id}`)\n  }\n}\n\nconst api = new ReportsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\nimport newslettersApi from './newsletters'\n\nexport class FormsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'forms'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  name(form) {\n    if ('name' in form) {\n      return form.name\n    } else if ('full_name' in form) {\n      return form.full_name\n    } else if ('first_name' in form) {\n      return `${form.first_name} ${form.last_name || ''}`\n    } else if ('fname' in form) {\n      return `${form.fname} ${form.lname || ''}`\n    } else {\n      return ''\n    }\n  }\n\n  async submit(form, id) {\n    if (!form) {\n      console.log('Ignore form...')\n      return\n    }\n    console.log('Submit form...')\n    form.status = 'inprogress'\n    let res\n    try {\n      res = await this.http('POST', `${id}/submit`, form, true)\n      form.status = 'success'\n      if (form.email) {\n        await newslettersApi.subscribe({\n          email: form.email,\n          full_name: this.name(form),\n        })\n      }\n    } catch (e) {\n      form.status = 'failure'\n      throw e\n    }\n  }\n}\n\nconst api = new FormsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\nimport newslettersApi from './newsletters'\n\nexport class PagesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'pages'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new PagesApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class PostsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'posts'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new PostsApi()\n\nexport default api\n","import newslettersApi from './newsletters'\n\nconst FORM_SPECIAL_KEYS = [\n  'email',\n  'status',\n  'fname',\n  'lname',\n  'first_name',\n  'name',\n  'full_name',\n  'last_name',\n  'phone',\n  'target',\n  'message',\n]\n\nexport class NotifyApi {\n  message(form) {\n    let r = ''\n    const keys = Object.keys(form).filter((k) => !FORM_SPECIAL_KEYS.includes(k))\n    for (const k of keys) {\n      let k_n = k.replace(/[_-]+/, ' ').toLowerCase()\n      let v = form[k]\n      if (v) {\n        v.toString().trim()\n      }\n      r += `${k_n}: ${v}\\n`\n    }\n    if ('message' in form) {\n      r += `\\nmessage:\\n${form.message}\\n`\n    }\n    return r\n  }\n\n  name(form) {\n    if ('name' in form) {\n      return form.name\n    } else if ('full_name' in form) {\n      return form.full_name\n    } else if ('first_name' in form) {\n      return `${form.first_name} ${form.last_name || ''}`\n    } else if ('fname' in form) {\n      return `${form.fname} ${form.lname || ''}`\n    } else {\n      return ''\n    }\n  }\n\n  async save(form) {\n    if (!form || !form.email) {\n      console.log('Ignore form...')\n      return\n    }\n    console.log('Submit form...')\n    form.status = 'inprogress'\n    return fetch('https://api.admin.tik.tn/feedbacks/notify', {\n      method: 'POST',\n      redirect: 'manual',\n      credentials: 'omit',\n      refer: '',\n      body: JSON.stringify({\n        target: form.target || `New Submit - ${process.env.DISPLAY_NAME}`,\n        subject: '',\n        name: this.name(form),\n        phone: form.phone || '',\n        from: form.email,\n        to: process.env.EMAIL,\n        message: this.message(form),\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(async (res) => {\n        if (!res.ok) {\n          throw new Error('error')\n        }\n        form.status = 'success'\n        await newslettersApi.subscribe({\n          email: form.email,\n          full_name: this.name(form),\n        })\n      })\n      .catch((_) => {\n        form.status = 'failure'\n        throw new Error('error')\n      })\n  }\n}\n\nconst api = new NotifyApi()\nexport default api\n","import { register } from './base'\n\nregister('client:view', ($org, user, obj) =>\n  ['admin', 'manager', 'finance'].includes(user.role)\n)\n\nregister('client:delete', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n\nregister('store:view', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n\nregister('store:add', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n\nregister('store:edit', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n\nregister('delivery:view', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n\nregister('delivery:add', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n\nregister('product:edit', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n\nregister('product:add', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n\nregister('product:add-quantity', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n\nregister(\n  'collection:edit',\n  ($org, user, obj) =>\n    $org.hasModule('collections') && ['admin', 'manager'].includes(user.role)\n)\n\nregister(\n  'collection:add',\n  ($org, user, obj) =>\n    $org.hasModule('collections') && ['admin', 'manager'].includes(user.role)\n)\n\nregister('staff:edit', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n\nregister('staff:add', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n","import { register } from './base'\n\nregister('dashboard:view-tags', ($org, user, obj) =>\n  ['admin', 'manager', 'stock'].includes(user.role)\n)\n\nregister('dashboard:edit-tags', ($org, user, obj) =>\n  ['admin', 'manager', 'stock'].includes(user.role)\n)\n\nregister('command:view', ($org, user, obj) =>\n  ['admin', 'manager', 'finance'].includes(user.role)\n)\n\nregister(\n  'dashboard:view',\n  ($org, user, obj) =>\n    $org.hasModule('commands') &&\n    (['admin', 'manager', 'finance', 'suivi', 'stock'].includes(user.role) ||\n      user.is_freelance)\n)\n\nregister('dashboard:filter', ($org, user, obj) =>\n  ['admin', 'manager', 'finance'].includes(user.role)\n)\n\nregister('dashboard:view-products-chart', ($org, user, obj) =>\n  ['admin', 'manager', 'finance', 'stock'].includes(user.role)\n)\n\nregister('dashboard:filter-stock-suivi', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n","import { register } from './base'\n\nregister('command:assign', ($org, user, obj) =>\n  ['admin', 'suivi', 'manager', 'finance'].includes(user.role)\n)\n\nregister(\n  'command:mark-new',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance', 'commercial'].includes(user.role) &&\n    obj.status === 'scheduled'\n)\n\nregister(\n  'command:mark-done',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance', 'suivi'].includes(user.role) &&\n    obj.status === 'inprogress'\n)\n\nregister(\n  'command:mark-canceled',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance', 'suivi'].includes(user.role) &&\n    object.status === 'inprogress'\n)\n\nregister(\n  'command:mark-returned',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance', 'suivi', 'stock'].includes(user.role) &&\n    ['canceled', 'inprogress'].includes(obj.status)\n)\n\nregister(\n  'command:mark-cash',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance'].includes(user.role) &&\n    ['done', 'inprogress'].includes(obj.status)\n)\n\nregister(\n  'command:mark-paid',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance'].includes(user.role) &&\n    ['cash', 'inprogress'].includes(obj.status)\n)\n\nregister(\n  'command:print-quote',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance', 'stock', 'suivi'].includes(user.role) &&\n    obj.id &&\n    ['inprogress', 'done', 'canceled'].includes(obj.status)\n)\n\nregister(\n  'command:print-invoice',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance'].includes(user.role) &&\n    ['inprogress', 'done', 'cash', 'paid'].includes(obj.status)\n)\n\nregister(\n  'command:print-aramex-label',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance', 'stock'].includes(user.role) &&\n    $org.hasDeliveryBackend('aramex') &&\n    ['aramex'].includes(obj.delivery_type) &&\n    ['inprogress', 'done', 'cash', 'paid'].includes(obj.status)\n)\n\nregister(\n  'command:export-fparcel',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance', 'stock'].includes(user.role) &&\n    $org.hasDeliveryBackend('fparcel') &&\n    ['fparcel'].includes(obj.delivery_type) &&\n    ['inprogress'].includes(obj.status)\n)\n\nregister(\n  'command:export',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance', 'stock'].includes(user.role) &&\n    $org.hasModule('export') &&\n    ['inprogress'].includes(obj.status)\n)\n\nregister(\n  'command:view-history',\n  ($org, user, obj) =>\n    obj.id && ['admin', 'manager', 'finance'].includes(user.role)\n)\n\nregister('command:delete', ($org, user, obj) =>\n  ['admin', 'manager'].includes(user.role)\n)\n\nregister(\n  'command:turnback-inprogress',\n  ($org, user, obj) =>\n    obj &&\n    obj.type === 'delivery' &&\n    ['done', 'canceled'].includes(obj.status) &&\n    ['admin', 'manager'].includes(user.role)\n)\n\nregister(\n  'command:view-shipment',\n  ($org, user, obj) =>\n    ['admin', 'suivi', 'manager', 'finance'].includes(user.role) &&\n    $org.hasDeliveryBackend(obj.delivery_type) &&\n    ['inprogress', 'done', 'cash', 'paid', 'returned'].includes(obj.status)\n)\n\nregister(\n  'command:create-shipment',\n  ($org, user, obj) =>\n    ['admin', 'suivi', 'manager', 'finance'].includes(user.role) &&\n    $org.hasDeliveryBackend(obj.delivery_type) &&\n    ['new'].includes(obj.status)\n)\n\nregister(\n  'command:assign-shipment',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance'].includes(user.role) &&\n    $org.hasDeliveryBackend(obj.delivery_type) &&\n    ['aramex'].includes(obj.delivery_id) &&\n    !obj.shipment &&\n    ['inprogress'].includes(obj.status)\n)\n\nregister('command:mass-assign-shipment', ($org, user, obj) =>\n  ['admin', 'manager', 'finance'].includes(user.role)\n)\n\nregister(\n  'command:track-shipment',\n  ($org, user, obj) =>\n    ['admin', 'manager', 'finance'].includes(user.role) &&\n    $org.hasDeliveryBackend(obj.delivery_type) &&\n    obj.shipment &&\n    obj.shipment.shipment_id &&\n    ['inprogress', 'done', 'cash'].includes(obj.status)\n)\nregister(\n  'command:view-cash',\n  ($org, user, obj) => ['admin'].includes(user.role) && obj.status === 'done'\n)\n\nregister(\n  'command:view-paid',\n  ($org, user, obj) =>\n    ['admin'].includes(user.role) && ['cash', 'paid'].includes(obj.status)\n)\n\nregister(\n  'command:view-returned',\n  ($org, user, obj) =>\n    ['admin'].includes(user.role) &&\n    ['canceled', 'returned'].includes(obj.status)\n)\n\nregister('command:mark-released', ($org, user, obj) =>\n  ['admin', 'manager', 'stock'].includes(user.role)\n)\n\nregister(\n  'command:invoice',\n  ($org, user, obj) =>\n    ['inprogress', 'done', 'cash', 'paid'].includes(obj.status) &&\n    ['admin', 'manager', 'finance'].includes(user.role)\n)\n\nregister('command:add', ($org, user, obj) =>\n  ['admin', 'manager', 'finance', 'commercial'].includes(user.role)\n)\n"],"sourceRoot":""}