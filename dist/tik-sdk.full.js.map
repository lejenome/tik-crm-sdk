{"version":3,"sources":["webpack://tikSDK/webpack/universalModuleDefinition","webpack://tikSDK/webpack/bootstrap","webpack://tikSDK/./src/core/base.js","webpack://tikSDK/./src/config.js","webpack://tikSDK/./src/crm/products.js","webpack://tikSDK/external {\"commonjs\":\"@sentry/browser\",\"commonjs2\":\"@sentry/browser\",\"amd\":\"@sentry/browser\",\"root\":\"Sentry\"}","webpack://tikSDK/./src/crm/staffs.js","webpack://tikSDK/./src/crm/categories.js","webpack://tikSDK/./src/crm/delivery.js","webpack://tikSDK/./src/crm/stores.js","webpack://tikSDK/./index.js","webpack://tikSDK/./src/core/auth.js","webpack://tikSDK/./node_modules/querystringify/index.js","webpack://tikSDK/./src/utils/cache.js","webpack://tikSDK/(webpack)/buildin/global.js","webpack://tikSDK/./src/core/users.js","webpack://tikSDK/./src/crm/clients.js","webpack://tikSDK/./src/crm/collections.js","webpack://tikSDK/./src/crm/commands.js","webpack://tikSDK/./src/organization.js","webpack://tikSDK/./src/crm/stock.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__3__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","session","authToken","instructorAuthToken","base_domain","config","API_BASE_URL","base_url","API_PREFIX","constructor","lookup_field","useCache","list","validateCache","configCache","cache","timeout","_cacheTimeout","clearInterval","cacheTimeout","setInterval","method","path","json","allow404","resource","headers","values","some","v","File","data","FormData","k","entries","append","JSON","stringify","undefined","console","log","req","url","qs","Authorization","fetch","body","redirect","referrer","ok","includes","status","error","Error","statusText","response","e","toString","Sentry","keys","captureException","toObj","http","id","el","new","forceCreate","partial_update","instance","DEFAULT_CONFIG","CACHE_PREFIX","VERSION","version","PROTOCOL","assign","ProductsApi","BaseApi","super","title","count","sku","category_id","category_title","is_active","saleoffers","price_net","tax_rate","cost_price","has_variants","is_shipping_required","is_digital","charge_taxes","charge_shipping","query","categoriesApi","defaultPrice","product","parseFloat","offerPrice","price","offer","discount_type","discount_percentage","discount_amount","count_min","reduce","cp","stockColor","displayName","icon","backgroundColor","color","StaffsApi","full_name","roles","phone","email","attrs","unlimited_access","start_at","end_at","obj","filter","defineProperties","role","is_admin","is_freelance","writable","set","val","process","env","MODULES","CategoriesApi","thumbnail","DeliveryCompaniesApi","type","done","canceled","address","find","it","is_primary","types","ref","default","StoresApi","city","country","state","company_name","vat_number","postal_code","AuthApi","me","token","staffsApi","resp","has","navigator","onLine","fetchMe","configureScope","scope","setUser","logout","password","access","code","del","decode","input","decodeURIComponent","replace","encode","encodeURIComponent","prefix","pairs","isNaN","push","length","join","parse","part","parser","result","exec","Cache","global","localStorage","use_cache","res","fn","forceCache","message","g","Function","window","UsersApi","ClientsApi","first_name","last_name","facebook_url","typeAchat","states","CollectionsApi","description","delivery_id","suivi_id","items","product_id","discount","itemPrice","item","productsApi","addItem","collection","max_count","changeItemProduct","removeItem","splice","indexOf","Math","round","CommadsApi","client_id","client_attrs","deliveryCompaniesApi","primary","store_id","storesApi","store_name","commercial_id","customer_note","staff_notes","total","setClient","command","client","totalHT","cmd","$organization","tva","ttc","tax_stamp","shipment_id","command_id","user_id","commands","staff_id","map","commandTypes","commandStatus","date","dark","OrganizationApi","payment_providers","_phone","cover_file","picture_file","organizationApi","Organization","apply","$base_url","URL","http_protocol","protocol","http_port","port","domains","domain","api","admin","cdn","html2txt","html","ctxt","split","delivery_backends","DELIVERY_BACKENDS","description_txt","display_name","short_name","cover","static","picture","favicon","logo","background_image","location","slug","cache_prefix","about_us","summary","about_us_fr","fb_url","twitter_url","youtube_url","instagram_url","linkedin_url","wiretransfer","mandat","default_currency","api_prefix","maintenance_mode","MAINTENANCE_MODE","maintenance_token","MAINTENANCE_TOKEN","webapp","BASE_URL","piwik_site_id","PIWIK_SITE_ID","fb_pixel_id","FB_PIXEL_ID","fb_page_id","FB_PAGE_ID","fb_app_id","google_analytics_id","GOOGLE_ANALYTICS_ID","google_gtag_id","GOOGLE_GTAG_ID","locales","LOCALES","default_locale","newsletter_default_subject","ENV","$env","envar","Array","isArray","toUpperCase","startsWith","StockApi","assigned_at"],"mappings":"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","file":"tik-sdk.full.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@sentry/browser\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@sentry/browser\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tikSDK\"] = factory(require(\"@sentry/browser\"));\n\telse\n\t\troot[\"tikSDK\"] = factory(root[\"Sentry\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__3__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","import * as Sentry from '@sentry/browser'\nimport qs from 'querystringify'\nimport config from '../config.js'\n\nexport const session = {\n  authToken: null,\n  instructorAuthToken: null,\n}\n\nexport function base_domain() {\n  return config.API_BASE_URL\n  /*\n  if (process.env.NODE_ENV !== 'production') {\n    return process.env.API_BASE_URL_DEV || process.env.API_BASE_URL\n  } else {\n    return process.env.API_BASE_URL\n  }\n  */\n}\n\nexport function base_url() {\n  return base_domain() + config.API_PREFIX\n  /*\n  if (process.env.NODE_ENV !== 'production') {\n    return (\n      (process.env.API_BASE_URL_DEV || process.env.API_BASE_URL) +\n      (process.env.API_PREFIX_DEV || process.env.API_PREFIX || '/api/')\n    )\n  } else {\n    return process.env.API_BASE_URL + (process.env.API_PREFIX || '/api/')\n  }\n  */\n}\n\nclass BaseApi {\n  constructor() {\n    // this.base_domain = base_domain()\n    // this.base_url = base_url()\n    this.lookup_field = 'id'\n    this.useCache = {\n      list: false,\n      get: false,\n    }\n    this.validateCache = true\n  }\n  get base_domain() {\n    return base_domain()\n  }\n  get base_url() {\n    return base_url()\n  }\n\n  configCache(cache, timeout) {\n    this.useCache = cache\n    if (this._cacheTimeout) {\n      clearInterval(this._cacheTimeout)\n    }\n    if (timeout) {\n      this.cacheTimeout = timeout\n      this._cacheTimeout = setInterval(() => {\n        this.validateCache = true\n      }, this.cacheTimeout)\n    }\n  }\n\n  async http(method, path, json, allow404 = false) {\n    if (path) {\n      path = `${this.resource}/${path}`\n    } else {\n      path = `${this.resource}`\n    }\n    let headers = {}\n    if (json) {\n      if (Object.values(json).some((v) => v instanceof File)) {\n        const data = new FormData()\n        for (let [k, v] of Object.entries(json)) {\n          if (v === null) {\n            v = ''\n          }\n          data.append(k, v)\n        }\n        json = data\n      } else {\n        json = JSON.stringify(json)\n        headers = {\n          'Content-Type': 'application/json; charset=utf-8',\n        }\n      }\n    } else {\n      json = undefined\n    }\n    console.log(method, path, json || '')\n    let url = `${this.base_url}${path}/`\n    if (json && method === 'GET') {\n      url += qs.stringify(json, true)\n      json = null\n    }\n    let req\n    try {\n      if (session.authToken) {\n        headers.Authorization = 'Bearer ' + session.authToken\n      }\n      req = await fetch(url, {\n        method,\n        headers,\n        body: json,\n        mode: 'cors',\n        // credentials: 'include',\n        cache: 'no-cache',\n        redirect: 'follow',\n        referrer: 'no-referrer',\n      })\n      if (!req.ok && !(allow404 && [404, 401].includes(req.status))) {\n        const error = new Error(req.statusText || req.status)\n        error.response = req\n        throw error\n      }\n      if (method !== 'DELETE') {\n        return await req.json()\n      }\n    } catch (e) {\n      console.error(\n        'HTTP Error:',\n        url.toString(),\n        JSON.stringify(json),\n        req && req.status\n      )\n      console.log(\"Sentry\", typeof Sentry, Sentry, Object.keys(Sentry))\n      if (typeof Sentry === 'object' && \"captureException\" in Sentry) {\n        Sentry.captureException(e)\n      }\n      throw e\n    }\n  }\n\n  toObj(o) {\n    return o\n  }\n\n  async list() {\n    if (this.useCache.list && !this.validateCache && this.data) {\n      console.log(`[HTTP] ${this.resource}.list(): using cache`)\n    } else {\n      const d = await this.http('GET', '')\n      this.data = d\n      this.validateCache = false\n    }\n    return this.data\n  }\n\n  async get(id, allow404 = false) {\n    if (id) {\n      const el = await this.http(\n        'GET',\n        id,\n        /* json= */ null,\n        /* allow404= */ allow404\n      )\n      return this.toObj(el)\n    } else {\n      return this.new()\n    }\n    /*\n    // const el = this.data.filter((el) => el.id === id);\n    if (el.length === 1) {\n      return el[0];\n    } else {\n      console.log(\"GET NEW\");\n      return this.new();\n    }\n    */\n  }\n\n  async save(\n    el,\n    id,\n    forceCreate = false,\n    partial_update = false,\n    allow404 = false\n  ) {\n    this.validateCache = true\n    if ((el.id || id) && !forceCreate) {\n      const instance = await this.http(\n        partial_update ? 'PATCH' : 'PUT',\n        id || el.id,\n        el,\n        allow404\n      )\n      return this.toObj(instance)\n      /*\n      const instance = this.get(el.id);\n      if (instance) {\n        const old = Object.assign({}, instance);\n        Object.assign(instance, el);\n        if (this.preUpdate) {\n          await this.preUpdate(old, instance);\n        }\n        if (this.postUpdate) {\n          await this.postUpdate(old, instance);\n        }\n      }\n      */\n    } else {\n      const instance = await this.http('POST', '', el, allow404)\n      return instance\n      /*\n      const nextId = Math.max(...this.data.map((c) => c.id)) + 1;\n      el.id = nextId;\n      if (this.preCreate) {\n        await this.preCreate(el);\n      }\n      this.data.push(el);\n      if (this.postCreate) {\n        await this.postCreate(el);\n      }\n      */\n    }\n  }\n\n  new() {\n    return null\n  }\n\n  async delete(id) {\n    this.validateCache = true\n    return this.http('DELETE', id)\n  }\n}\n\nexport default BaseApi\n","import { version } from '../package.json'\n\nconst DEFAULT_CONFIG = {\n  // env: 'production',\n  API_BASE_URL: '',\n  API_PREFIX: '/api/',\n  CACHE_PREFIX: '',\n  VERSION: version,\n  PROTOCOL: 'https',\n  // LANG: 'fr',\n}\n\nconst config = Object.assign({}, DEFAULT_CONFIG)\n\nexport function setConfigValue(k, v) {\n  config[k] = v\n}\n\nexport function setConfig(c) {\n  for (const k of Object.keys(DEFAULT_CONFIG)) {\n    if (k in c) {\n      config[k] = c[k]\n    }\n  }\n}\n\nexport default config\n","import BaseApi from '../core/base.js'\nimport categoriesApi from './categories.js'\n\nclass ProductsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'products'\n    this.configCache({ list: true }, 15 * 1000)\n  }\n\n  new() {\n    return {\n      title: '',\n      count: 0,\n      sku: '',\n      // status: \"In Stock\",\n      category_id: null,\n      category_title: '',\n      is_active: true,\n      saleoffers: [],\n      price_net: 0,\n      tax_rate: 19,\n      cost_price: 0,\n      has_variants: false,\n      is_shipping_required: true,\n      is_digital: false,\n      charge_taxes: true,\n      charge_shipping: false,\n      // weight:,\n    }\n  }\n\n  async addStock(p, count) {\n    return this.http('POST', `${p.sku}/stock`, { count })\n  }\n\n  async rapport(query) {\n    return this.http('GET', `rapport`, query)\n  }\n\n  async categories() {\n    return categoriesApi.list()\n  }\n\n  defaultPrice(product) {\n    return parseFloat(product.price_net) * (1 + product.tax_rate / 100)\n  }\n\n  offerPrice(price, count, offer) {\n    price = parseFloat(price)\n    if (offer.discount_type === '%' && offer.discount_percentage) {\n      price = parseFloat(price) * (1 - offer.discount_percentage / 100)\n    } else if (offer.discount_type === 'n' && offer.discount_amount) {\n      price = parseFloat(price) - parseFloat(offer.discount_amount)\n    }\n    return price * count\n  }\n\n  offer(product, count) {\n    let offer = { count_min: 0, discount_percentage: 0 }\n    if (product.saleoffers) {\n      offer = product.saleoffers.reduce(\n        (cp, p) =>\n          p.count_min <= count && p.count_min >= cp.count_min ? p : cp,\n        offer\n      )\n    }\n    return offer\n  }\n\n  price(product, count) {\n    const price = this.defaultPrice(product)\n    const offer = this.offer(product, count)\n    return this.offerPrice(price, count, offer)\n  }\n\n  stockColor(product) {\n    if (product.count < 300) {\n      return '#dd4b39'\n    } else if (product.count < 500) {\n      return '#f39c12'\n    } else {\n      return '#00a65a'\n    }\n  }\n\n  status() {\n    return [\n      {\n        name: 'stock',\n        displayName: 'Stock',\n        icon: 'fa fa-cubes',\n        backgroundColor: 'rgb(137, 255, 88)',\n      },\n      {\n        name: 'new',\n        displayName: 'Nouveaux',\n        icon: 'fa fa-shopping-cart',\n        backgroundColor: '#f6e06c',\n      },\n      {\n        name: 'scheduled',\n        displayName: 'Réservés',\n        icon: 'fa fa-hourglass-half',\n        backgroundColor: 'rgb(255, 255, 210)',\n        color: 'white',\n      },\n      {\n        name: 'inprogress',\n        displayName: 'En Cours',\n        icon: 'fa fa-truck',\n        backgroundColor: '#337ab7',\n      },\n      {\n        name: 'done',\n        displayName: 'Délivrés',\n        icon: 'fa fa-check',\n        backgroundColor: '#89ff58',\n      },\n\n      {\n        name: 'canceled',\n        displayName: 'Annulés',\n        icon: 'fa fa-times',\n        backgroundColor: '#ff7b7b',\n      },\n\n      {\n        name: 'paid',\n        displayName: 'Payés',\n        icon: 'fa fa-money',\n        backgroundColor: 'rgb(32, 216, 223)',\n      },\n      {\n        name: 'returned',\n        displayName: 'Retourne Dépot',\n        icon: 'fa fa-cubes',\n        backgroundColor: '#000000',\n        color: 'white',\n      },\n      {\n        name: 'released',\n        displayName: 'Libérés',\n        icon: 'fa fa-truck',\n        backgroundColor: '#131654',\n      },\n    ]\n  }\n}\n\nconst productsApi = new ProductsApi()\nexport default productsApi\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","import BaseApi from '../core/base.js'\n\nclass StaffsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'staffs'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      full_name: '',\n      status: 'indoor',\n      roles: ['commercial'],\n      phone: '',\n      email: '',\n      attrs: {\n        unlimited_access: false,\n        // is_freelance: false,\n        start_at: '08:00',\n        end_at: '18:00',\n      },\n      is_active: true,\n    }\n  }\n\n  async me() {\n    const obj = await this.http('GET', 'me', null, true)\n    return this.toObj(obj)\n  }\n\n  toObj(o) {\n    const ALL_ROLES = [\n      'admin',\n      'manager',\n      'finance',\n      'suivi',\n      'commercial',\n      'stock',\n      'freelance',\n    ]\n    o.roles = ALL_ROLES.filter((r) => o.roles.includes(r))\n    Object.defineProperties(o, {\n      role: {\n        get() {\n          return this.roles[0]\n        },\n      },\n      is_admin: {\n        get() {\n          return this.roles.includes('admin')\n        },\n      },\n      is_freelance: {\n        get() {\n          return this.roles.includes('freelance')\n        },\n      },\n      start_at: {\n        value: '08:00',\n        writable: false,\n      },\n      end_at: {\n        value: '18:00',\n        writable: false,\n      },\n      unlimited_access: {\n        get() {\n          return this.attrs.unlimited_access\n        },\n        set(val) {\n          this.attrs.unlimited_access = val\n        },\n      },\n    })\n    return o\n  }\n\n  async unlimited() {\n    return this.http('GET', 'unlimited')\n  }\n\n  roles() {\n    return [\n      'admin',\n      'manager',\n      'finance',\n      'suivi',\n      'commercial',\n      'stock',\n      ...((process.env.MODULES.includes('pos') && ['pos']) || []),\n    ]\n  }\n}\n\nconst staffsApi = new StaffsApi()\nexport default staffsApi\n","import BaseApi from '../core/base.js'\n\nclass CategoriesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'categories'\n    this.configCache({ list: true }, 60 * 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      title: '',\n      thumbnail: undefined,\n      is_active: true,\n    }\n  }\n}\n\nconst categoriesApi = new CategoriesApi()\n\nexport default categoriesApi\n","import BaseApi from '../core/base.js'\n\nclass DeliveryCompaniesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'delivery-companies'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      type: 'aramex',\n      attrs: {},\n      name: '',\n      done: 0,\n      canceled: 0,\n      phone: '',\n      email: '',\n      address: '',\n      is_active: true,\n    }\n  }\n\n  async rapport(query) {\n    return this.http('GET', `rapport`, query)\n  }\n\n  async primary() {\n    return (await this.list()).find((it) => it.is_primary)\n  }\n\n  types() {\n    return [\n      {\n        ref: 'aramex',\n        name: 'Aramex',\n        color: 'rgb(228, 51, 51)',\n        attrs: [\n          { name: 'number', type: 'text', default: '' },\n          { name: 'pin', type: 'password', default: '' },\n          { name: 'entity', type: 'text', default: 'TUN' },\n          { name: 'country_code', type: 'text', default: 'TN' },\n        ],\n      },\n      {\n        ref: 'fparcel',\n        name: 'FParcel',\n        color: 'rgb(23, 97, 39)',\n        attrs: [],\n      },\n      {\n        ref: '1delivery',\n        name: 'First Delivery',\n        color: 'rgb(0, 141, 76)',\n        attrs: [],\n      },\n      {\n        ref: 'tnexpress',\n        name: 'Tunisia Express',\n        color: 'rgb(0, 128, 255)',\n        attrs: [\n          { name: 'username', type: 'text', default: '' },\n          { name: 'password', type: 'password', default: '' },\n          { name: 'api_key', type: 'text', default: '' },\n        ],\n      },\n    ]\n  }\n\n  status() {\n    return [\n      {\n        name: 'new',\n        displayName: 'Nouveaux',\n        icon: 'fa fa-hourglass-half',\n        backgroundColor: 'rgb(255,255,210)',\n        color: 'black',\n      },\n      {\n        name: 'created',\n        displayName: 'Command Confirmée',\n        icon: 'fa fa-shopping-cart',\n        backgroundColor: 'rgb(246, 224, 108)',\n        color: 'black',\n      },\n      {\n        name: 'in_delivery_facility',\n        displayName: 'En Depot',\n        icon: 'fa fa-bank',\n        backgroundColor: 'rgb(212, 137, 69)',\n      },\n      {\n        name: 'out_for_delivery',\n        displayName: 'En Cours',\n        icon: 'fa fa-truck',\n        backgroundColor: '#337ab7',\n      },\n      {\n        name: 'returned_delivery_facility',\n        displayName: 'Echec',\n        icon: 'fa fa-warning',\n        backgroundColor: 'rgb(255, 123, 123)',\n      },\n      {\n        name: 'canceled',\n        displayName: 'Annulé',\n        icon: 'fa fa-times',\n        backgroundColor: 'rgb(228, 51, 51)',\n      },\n      {\n        name: 'delivered',\n        displayName: 'Délivré',\n        icon: 'fa fa-check',\n        backgroundColor: 'rgb(137, 255, 88)',\n      },\n      {\n        name: 'returned_shipper',\n        displayName: 'Retourne Definitif',\n        icon: 'fa fa-cubes',\n        backgroundColor: 'black',\n      },\n      {\n        name: 'paid',\n        displayName: 'Payé',\n        icon: 'fa fa-money',\n        backgroundColor: 'rgb(32, 216, 223)',\n      },\n    ]\n  }\n}\n\nconst deliveryCompaniesApi = new DeliveryCompaniesApi()\n\nexport default deliveryCompaniesApi\n","import BaseApi from '../core/base.js'\n\nclass StoresApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'stores'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      title: '',\n      thumbnail: undefined,\n      phone: '',\n      email: '',\n      address: '',\n      city: '',\n      country: 'TN',\n      state: 'Sfax',\n      company_name: '',\n      vat_number: '',\n      postal_code: 3000,\n      is_active: true,\n    }\n  }\n\n  async primary() {\n    return (await this.list()).find((it) => it.is_primary)\n  }\n}\n\nconst storesApi = new StoresApi()\n\nexport default storesApi\n","export * from './src/index.js'\n","import * as Sentry from '@sentry/browser'\nimport BaseApi, { session } from './base.js'\n// import usersApi from './users.js'\nimport staffsApi from '../crm/staffs.js'\nimport cache from '../utils/cache.js'\n\nexport class AuthApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'token'\n    // this.configCache({ list: true }, 60 * 60 * 1000)\n    this.me = {}\n    this.ns = {\n      me: 'me',\n      token: 'token',\n      authToken: 'authToken',\n    }\n  }\n\n  async fetchMe() {\n    // return await usersApi.me()\n    return await staffsApi.me()\n  }\n\n  async currentUser() {\n    if (this.me && this.me.id) {\n      return this.me\n    } else {\n      let resp\n      if (cache.has(this.ns.me)) {\n        resp = cache.get(this.ns.me)\n      }\n      if (navigator.onLine) {\n        try {\n          resp = await this.fetchMe()\n        } catch (e) {}\n      }\n      if (!resp) {\n        await this.logout()\n        return null\n      }\n      cache.set(this.ns.me, resp)\n      this.me = resp\n\n      Sentry.configureScope((scope) => {\n        scope.setUser({ id: this.me.email })\n      })\n      return this.me\n    }\n  }\n\n  async login(email, password) {\n    const resp = await this.http('POST', '', { email, password }, true)\n    if (resp.access) {\n      session[this.ns.authToken] = resp.access\n      cache.set(this.ns.token, { token: resp.access })\n      return true\n    } else {\n      return false\n    }\n  }\n\n  async isLoggedin() {\n    const token = cache.get(this.ns.token)\n    if (token) {\n      let resp = true\n      if (navigator.onLine) {\n        resp = await this.http('POST', 'verify', token, true)\n        resp = resp && resp.code !== 'token_not_valid'\n      }\n      if (resp) {\n        session[this.ns.authToken] = token.token\n        console.log(session)\n        return true\n      }\n    }\n    cache.del(this.ns.token)\n    return false\n  }\n\n  async logout() {\n    this.me = {}\n    session[this.ns.authToken] = null\n    cache.del(this.ns.token)\n    cache.del(this.ns.me)\n    Sentry.configureScope((scope) => {\n      scope.setUser({})\n    })\n  }\n}\n\nconst authApi = new AuthApi()\nexport default authApi\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","import config from '../config'\n\nexport class Cache {\n  has(n) {\n    return (\n      global.localStorage &&\n      global.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n    )\n  }\n\n  del(n) {\n    if (global.localStorage) {\n      delete global.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n    }\n  }\n\n  get(n, use_cache = true) {\n    if (use_cache && this.has(n)) {\n      try {\n        return JSON.parse(\n          global.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n        )\n      } catch (e) {}\n    }\n  }\n\n  set(n, res) {\n    if (global.localStorage) {\n      const k = `${config.CACHE_PREFIX}_cache_${n}`\n      global.localStorage[k] = JSON.stringify(res)\n    }\n  }\n\n  async withCache(n, fn, use_cache = false) {\n    const cache = this.get(n, use_cache)\n    if (cache) return cache\n    const res = await fn()\n    this.set(n, res)\n    return res\n  }\n\n  async fallbackCache(n, fn, forceCache = false) {\n    let res\n    if (forceCache) {\n      return this.get(n, true)\n    }\n    try {\n      res = await fn()\n      this.set(n, res)\n    } catch (e) {\n      if (e.message !== 'Forbidden') {\n        res = this.get(n, true)\n      } else {\n        throw e\n      }\n    }\n    return res\n  }\n}\n\nexport default new Cache()\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import BaseApi from './base'\n\nexport class UsersApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'users'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async me() {\n    return await this.http('GET', 'me', null, true)\n  }\n\n  async activate(id, token) {\n    return await this.http('POST', `${id}/activate`, { token }, true)\n  }\n\n  async get_by_email(email) {\n    return await this.http('POST', 'email', { email }, true)\n  }\n}\n\nconst api = new UsersApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nclass ClientsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'clients'\n    this.configCache({ list: true }, 5 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      full_name: '',\n      first_name: '',\n      last_name: '',\n      attrs: {\n        type: 'detail',\n        facebook_url: '',\n      },\n      phone: '',\n      address: '',\n      country: 'TN',\n      state: 'Sfax',\n      postal_code: '',\n      email: '',\n      company_name: '',\n      vat_number: '',\n    }\n  }\n\n  toObj(o) {\n    if (!o.attrs) {\n      o.attrs = {}\n    }\n    Object.defineProperties(o, {\n      type: {\n        get() {\n          return this.attrs.type\n        },\n        set(val) {\n          this.attrs.type = val\n        },\n      },\n    })\n    return o\n  }\n\n  typeAchat() {\n    return ['gros', 'detail']\n  }\n\n  states() {\n    return [\n      'Ariana',\n      'Beja',\n      'Ben Arous',\n      'Bizerte',\n      'Gabes',\n      'Gafsa',\n      'Jendouba',\n      'Kairouan',\n      'Kasserine',\n      'Kebili',\n      'Kef',\n      'Mahdia',\n      'Mannouba',\n      'Medenine',\n      'Monastir',\n      'Nabeul',\n      'Sfax',\n      'Sidi Bouzid',\n      'Siliana',\n      'Sousse',\n      'Tataouine',\n      'Tozeur',\n      'Tunis',\n      'Zaghouan',\n    ]\n  }\n\n  async rapport(id) {\n    return this.http('GET', id + '/rapport')\n  }\n\n  async history(id) {\n    return this.http('GET', id + '/history')\n  }\n}\n\nconst clientsApi = new ClientsApi()\nexport default clientsApi\n","import productsApi from './products.js'\nimport BaseApi from '../core/base.js'\n\nclass CollectionsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'collections'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      sku: '',\n      title: '',\n      description: '',\n      delivery_id: null,\n      suivi_id: null,\n      items: [\n        {\n          product_id: null,\n          name: '',\n          price: 0,\n          count: 0,\n        },\n      ],\n      discount: 0,\n      price_net: 0,\n      thumbnail: '',\n      is_active: true,\n    }\n  }\n\n  itemPrice(item) {\n    if (item.product_id) {\n      if (item.product) {\n        return productsApi.price(item.product, item.count)\n      } else {\n        // TODO\n      }\n    } else {\n      return parseFloat(item.price)\n    }\n  }\n\n  addItem(collection, product) {\n    let item\n    if (typeof product === 'object') {\n      item = collection.items.find((it) => it.product_id === product.id)\n      if (item) {\n        item.count++\n      } else {\n        item = {\n          title: product.title,\n          count: 1,\n          // price: product.price,\n          product_id: product.id,\n          max_count: product.count,\n          product,\n        }\n        collection.items.push(item)\n      }\n    } else {\n      item = {\n        title: '',\n        count: 0,\n        price: 0,\n        product_id: null,\n        max_count: 0,\n      }\n      collection.items.push(item)\n    }\n    item.price = this.itemPrice(item)\n    collection.price_net = this.price(collection)\n  }\n\n  changeItemProduct(collection, item, product) {\n    if (typeof product === 'string') {\n      item.product_id = null\n      item.product = null\n      item.title = product\n      item.max_count = 4294967295\n    } else {\n      item.product_id = product.id\n      item.product = product\n      item.title = product.title\n      item.max_count = product.count || 4294967295\n    }\n    item.price = 0\n    item.count = 1\n    item.price = this.itemPrice(item)\n    collection.price_net = this.price(collection)\n  }\n\n  removeItem(collection, item) {\n    collection.items.splice(collection.items.indexOf(item), 1)\n    collection.price_net = this.price(collection)\n  }\n\n  price(collection) {\n    const price =\n      collection.items.reduce((s, it) => this.itemPrice(it) + s, 0) -\n      parseFloat(collection.discount)\n    return Math.round(price * 100) / 100\n  }\n}\n\nconst collectionsApi = new CollectionsApi()\nexport default collectionsApi\n","import BaseApi from '../core/base.js'\n\nimport deliveryCompaniesApi from './delivery.js'\nimport storesApi from './stores.js'\nimport productsApi from './products.js'\nimport $organization from '../organization'\n\nclass CommadsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'commands'\n    this.configCache({ list: true }, 60 * 1000)\n  }\n\n  async new() {\n    return {\n      client_id: null,\n      client_attrs: {\n        full_name: '',\n        phone: '',\n        address: '',\n        country: 'TN',\n        state: '',\n        city: '',\n        postal_code: '',\n      },\n      type: 'delivery',\n      delivery_id: (await deliveryCompaniesApi.primary()).id,\n      store_id: (await storesApi.primary()).id,\n      store_name: (await storesApi.primary()).title,\n      commercial_id: null,\n      suivi_id: null,\n      status: 'new',\n      customer_note: '',\n      staff_notes: [],\n      items: [\n        {\n          product_id: null,\n          title: '',\n          price: 0,\n          count: 0,\n        },\n      ],\n      discount: 0,\n      total: 0,\n    }\n  }\n\n  setClient(command, client) {\n    if (client) {\n      command.client_id = client.id\n      command.client_attrs.phone = client.phone\n      command.client_attrs.full_name = client.full_name\n      command.client_attrs.address = client.address\n      command.client_attrs.country = client.country\n      command.client_attrs.state = client.state\n      command.client_attrs.postal_code = client.postal_code\n    } else {\n      command.client_id = null\n      command.client_attrs = {}\n    }\n  }\n\n  itemPrice(item) {\n    if (item.product_id) {\n      if (item.product) {\n        return productsApi.price(item.product, item.count)\n      } else {\n        // TODO\n      }\n    } else {\n      return parseFloat(item.price)\n    }\n  }\n\n  addItem(command, product) {\n    let item\n    if (typeof product === 'object') {\n      item = command.items.find((it) => it.product_id === product.id)\n      if (item) {\n        item.count++\n      } else {\n        item = {\n          title: product.title,\n          count: 1,\n          // price: product.price,\n          product_id: product.id,\n          max_count: product.count,\n          product,\n        }\n        command.items.push(item)\n      }\n    } else {\n      item = {\n        title: '',\n        count: 0,\n        price: 0,\n        product_id: null,\n        max_count: 0,\n      }\n      command.items.push(item)\n    }\n    item.price = this.itemPrice(item)\n    command.total = this.price(command)\n  }\n\n  changeItemProduct(command, item, product) {\n    if (typeof product === 'string') {\n      item.product_id = null\n      item.product = null\n      item.title = product\n      item.max_count = 4294967295\n    } else {\n      item.product_id = product.id\n      item.product = product\n      item.title = product.title\n      item.max_count = product.count || 4294967295\n    }\n    item.price = 0\n    item.count = 1\n    item.price = this.itemPrice(item)\n    command.total = this.price(command)\n  }\n\n  removeItem(command, item) {\n    command.items.splice(command.items.indexOf(item), 1)\n    command.total = this.price(command)\n  }\n\n  price(command) {\n    const price =\n      command.items.reduce((s, it) => this.itemPrice(it) + s, 0) -\n      parseFloat(command.discount || 0)\n    return Math.round(price * 100) / 100\n  }\n\n  totalHT(cmd) {\n    if ($organization.tax_rate) {\n      return (\n        (parseFloat(cmd.total) + parseFloat(cmd.discount || 0)) /\n        (1 + parseFloat($organization.tax_rate) / 100)\n      )\n    } else {\n      return parseFloat(cmd.total) + parseFloat(cmd.discount || 0)\n    }\n  }\n\n  tva(cmd) {\n    if ($organization.tax_rate) {\n      return (\n        (parseFloat(cmd.total) /\n          (1 + parseFloat($organization.tax_rate) / 100)) *\n        (parseFloat($organization.tax_rate) / 100)\n      )\n    } else {\n      return 0 // parseFloat(cmd.total)\n    }\n  }\n\n  ttc(command) {\n    return parseFloat(command.total) + parseFloat($organization.tax_stamp || 0)\n  }\n\n  async rapport(query) {\n    return this.http('GET', 'rapport', query)\n  }\n\n  async deliver(cmd, shipment_id = null) {\n    if (shipment_id) {\n      return this.http('POST', `${cmd.id}/deliver`, {\n        command_id: cmd.id,\n        shipment_id,\n      })\n    } else {\n      return this.http('POST', `${cmd.id}/deliver`)\n    }\n  }\n\n  async track(cmd) {\n    return this.http('POST', `${cmd.id}/track`)\n  }\n\n  async shipment(cmd) {\n    return this.http('GET', `${cmd.id}/deliver`)\n  }\n\n  async assign(user_id, commands) {\n    return this.http('POST', 'assign', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async makeNew(user_id, commands) {\n    return this.http('POST', 'new', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async cash(user_id, commands) {\n    return this.http('POST', 'cash', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async paid(user_id, commands) {\n    return this.http('POST', 'paid', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async returned(user_id, commands) {\n    return this.http('POST', 'returned', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  commandTypes() {\n    return ['direct', 'delivery']\n  }\n\n  commandStatus() {\n    return [\n      'new',\n      'scheduled',\n      'inprogress',\n      'done',\n      'canceled',\n      'returned',\n      'cash',\n      'paid',\n    ]\n  }\n\n  /*\n  async postCreate(command) {\n    for (const item of command.items) {\n      if (item.product_id) {\n        const p = await productsApi.get(item.product_id);\n        p.count -= item.count;\n        await productsApi.save(p);\n      }\n    }\n  }\n  async postUpdate(oldC, newC) {\n    if (oldC.status !== 'canceled' && newC.status === 'canceled') {\n      for (const item of newC.items) {\n        if (item.product_id) {\n          const p = await productsApi.get(item.product_id);\n          p.count += item.count;\n          await productsApi.save(p);\n        }\n      }\n    }\n  }\n  */\n  status() {\n    return [\n      {\n        name: 'new',\n        displayName: 'Nouveaux',\n        icon: 'fa fa-shopping-cart',\n        backgroundColor: '#f6e06c',\n        date: 'created_at',\n      },\n      {\n        name: 'scheduled',\n        displayName: 'Réservés',\n        icon: 'fa fa-hourglass-half',\n        backgroundColor: 'rgb(255, 255, 210)',\n        date: 'scheduled_at',\n      },\n      {\n        name: 'inprogress',\n        displayName: 'En Cours',\n        icon: 'fa fa-truck',\n        backgroundColor: '#337ab7',\n        date: 'assigned_at',\n      },\n      {\n        name: 'done',\n        displayName: 'Délivrés',\n        icon: 'fa fa-check',\n        backgroundColor: '#89ff58',\n        date: 'completed_at',\n      },\n\n      {\n        name: 'canceled',\n        displayName: 'Annulés',\n        icon: 'fa fa-times',\n        backgroundColor: '#ff7b7b',\n        date: 'completed_at',\n      },\n\n      {\n        name: 'cash',\n        displayName: 'Encaisés',\n        icon: 'fa fa-bank',\n        backgroundColor: '#e6e6e6',\n        date: 'cash_at',\n      },\n      {\n        name: 'paid',\n        displayName: 'Payés',\n        icon: 'fa fa-money',\n        backgroundColor: 'rgb(32, 216, 223)',\n        date: 'paid_at',\n      },\n      {\n        name: 'returned',\n        displayName: 'Retourne Dépot',\n        icon: 'fa fa-cubes',\n        backgroundColor: '#000000',\n        color: 'white',\n        date: 'paid_at',\n        dark: true,\n      },\n    ]\n  }\n}\n\nconst commandsApi = new CommadsApi()\nexport default commandsApi\n","import BaseApi, { base_url } from './core/base'\n\nclass OrganizationApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'site'\n    // this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  toObj(object) {\n    if (!object.attrs) {\n      object.attrs = {}\n    }\n    if (!object.payment_providers) {\n      object.payment_providers = []\n    }\n    object._phone = object.phone\n    delete object.cover_file\n    delete object.picture_file\n    return object\n  }\n}\n\nexport const organizationApi = new OrganizationApi()\n\nexport class Organization {\n  constructor(data) {\n    if (data) {\n      this.apply(data)\n    }\n  }\n\n  async refresh() {\n    const data = await organizationApi.list()\n    if (data) {\n      this.apply(data)\n    }\n  }\n\n  apply(data) {\n    this.data = data\n    const $base_url = new URL(base_url())\n    this.http_protocol = ($base_url.protocol || 'https:') + '//'\n    this.http_port = $base_url.port ? `:${$base_url.port}` : ''\n    const domains = {}\n    for (const domain of data.domains) {\n      domains[domain.type] = domain.domain\n    }\n    if (!domains.api) {\n      domains.api = domains.admin\n    }\n    if (!domains.admin) {\n      domains.admin = domains.api\n    }\n    if (!domains.cdn) {\n      domains.cdn = domains.api\n    }\n\n    this.domains = domains\n\n    this.env(this)\n  }\n\n  html2txt(html) {\n    if (html) {\n      return html.replace(/<[^>]+>/g, '')\n    } else {\n      return ''\n    }\n  }\n\n  env(ctxt) {\n    if (!ctxt) {\n      ctxt = {}\n    }\n    ctxt.modules = (this.data.modules || process.env.MODULES || '').split(',')\n    ctxt.delivery_backends = (\n      this.data.delivery_backends ||\n      process.env.DELIVERY_BACKENDS ||\n      ''\n    ).split(',')\n    ctxt.description = this.data.description || ''\n    ctxt.description_txt =\n      this.data.description_txt || this.html2txt(this.data.description) || ''\n    ctxt.display_name = this.data.display_name || this.data.name\n    ctxt.short_name = this.data.name\n    ctxt.cover = this.static(this.data.cover)\n    ctxt.picture = this.static(this.data.picture)\n    ctxt.favicon = this.static(this.data.favicon)\n    ctxt.logo = this.static(this.data.picture)\n    ctxt.background_image = this.static(this.data.background_image)\n    ctxt.email = this.data.email\n    ctxt.location = this.data.location\n    ctxt.phone = this.data.phone\n    ctxt.slug = this.data.slug\n    ctxt.cache_prefix = this.data.slug\n    ctxt.about_us = this.data.summary\n    ctxt.about_us_fr = this.data.summary\n    ctxt.fb_url = this.data.facebook_url\n    ctxt.twitter_url = this.data.twitter_url\n    ctxt.youtube_url = this.data.youtube_url\n    ctxt.instagram_url = this.data.instagram_url\n    ctxt.linkedin_url = this.data.linkedin_url\n    ctxt.wiretransfer = this.data.wiretransfer\n    ctxt.mandat = this.data.mandat\n    ctxt.payment_providers = this.data.payment_providers\n    ctxt.default_currency = this.data.default_currency\n    ctxt.tax_rate = this.data.tax_rate\n    ctxt.tax_stamp = this.data.tax_stamp\n    ctxt.api_prefix = process.env.API_PREFIX || '/api/'\n    ctxt.maintenance_mode =\n      this.data.maintenance_mode || process.env.MAINTENANCE_MODE\n    ctxt.maintenance_token =\n      this.data.maintenance_token || process.env.MAINTENANCE_TOKEN\n    if (this.domains.webapp) {\n      ctxt.base_url = `${this.http_protocol}${this.domains.webapp}`\n    } else {\n      ctxt.base_url = process.env.BASE_URL\n    }\n\n    ctxt.piwik_site_id = this.data.piwik_site_id || process.env.PIWIK_SITE_ID\n    ctxt.fb_pixel_id = this.data.fb_pixel_id || process.env.FB_PIXEL_ID\n    ctxt.fb_page_id = this.data.fb_page_id || process.env.FB_PAGE_ID\n    ctxt.fb_app_id = this.data.fb_app_id\n    ctxt.google_analytics_id =\n      this.data.google_analytics_id || process.env.GOOGLE_ANALYTICS_ID\n    ctxt.google_gtag_id = this.data.google_gtag_id || process.env.GOOGLE_GTAG_ID\n    ctxt.locales = (process.env.LOCALES || 'en-US,fr-FR').split(',')\n    ctxt.default_locale = this.data.default_locale\n    ctxt.newsletter_default_subject = 'default'\n    return ctxt\n  }\n\n  ENV(ctxt) {\n    if (!ctxt) {\n      ctxt = {}\n    }\n    function value(val) {\n      return val === null || val === undefined ? '' : val\n    }\n    const $env = this.env()\n    for (const envar of Object.keys($env)) {\n      const val = value($env[envar])\n      if (Array.isArray(val)) {\n        ctxt[envar.toUpperCase()] = val.join(',')\n      } else if (val && typeof val === 'object') {\n        for (const k of Object.keys(val)) {\n          const v = value(val[k])\n          ctxt[`${envar}_${k}`.toUpperCase()] = v\n        }\n      } else {\n        ctxt[envar.toUpperCase()] = val\n      }\n    }\n    return ctxt\n  }\n\n  static(path) {\n    if (path && path.startsWith('/'))\n      return `${this.http_protocol}${this.domains.cdn}${this.http_port}${path}`\n    else return path\n  }\n}\n\nconst $organization = new Organization()\nexport default $organization\n","import BaseApi from '../core/base.js'\n\nclass StockApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'stock'\n    this.configCache({ list: true }, 60 * 1000)\n  }\n\n  async report(assigned_at, suivi_id) {\n    return this.http('GET', 'report', {\n      assigned_at,\n      suivi_id,\n    })\n  }\n\n  async release(user_id, commands) {\n    return this.http('POST', 'release', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n}\n\nconst stockApi = new StockApi()\nexport default stockApi\n"],"sourceRoot":""}