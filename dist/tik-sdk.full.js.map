{"version":3,"sources":["webpack://tikSDK/webpack/universalModuleDefinition","webpack://tikSDK/webpack/bootstrap","webpack://tikSDK/./src/core/base.js","webpack://tikSDK/./src/config.js","webpack://tikSDK/./src/core/users.js","webpack://tikSDK/./src/permissions/base.js","webpack://tikSDK/./src/saas/base.js","webpack://tikSDK/./src/cms/newsletters.js","webpack://tikSDK/./src/crm/products.js","webpack://tikSDK/./src/organization.js","webpack://tikSDK/external {\"commonjs\":\"@sentry/browser\",\"commonjs2\":\"@sentry/browser\",\"amd\":\"@sentry/browser\",\"root\":\"Sentry\"}","webpack://tikSDK/./src/core/auth.js","webpack://tikSDK/./src/crm/staffs.js","webpack://tikSDK/./src/utils/cache.js","webpack://tikSDK/./src/crm/categories.js","webpack://tikSDK/./src/crm/commands.js","webpack://tikSDK/./src/crm/delivery.js","webpack://tikSDK/./src/crm/stores.js","webpack://tikSDK/./src/lms/enrolls.js","webpack://tikSDK/./src/lms/lessons.js","webpack://tikSDK/./src/lms/instructors.js","webpack://tikSDK/./src/saas/users.js","webpack://tikSDK/./index.js","webpack://tikSDK/./node_modules/querystringify/index.js","webpack://tikSDK/./src/crm/clients.js","webpack://tikSDK/./src/crm/collections.js","webpack://tikSDK/./src/crm/orders.js","webpack://tikSDK/./src/crm/stock.js","webpack://tikSDK/./src/lms/attachments.js","webpack://tikSDK/./src/lms/courses.js","webpack://tikSDK/./src/lms/chapters.js","webpack://tikSDK/./src/lms/quizs.js","webpack://tikSDK/./src/lms/categories.js","webpack://tikSDK/./src/lms/students.js","webpack://tikSDK/./src/lms/meetings.js","webpack://tikSDK/./src/lms/attendees.js","webpack://tikSDK/./src/lms/reports.js","webpack://tikSDK/./src/cms/forms.js","webpack://tikSDK/./src/cms/pages.js","webpack://tikSDK/./src/cms/posts.js","webpack://tikSDK/./src/cms/notify.js","webpack://tikSDK/./src/permissions/crm.js","webpack://tikSDK/./src/permissions/lms.js","webpack://tikSDK/./src/permissions/dashboard.js","webpack://tikSDK/./src/permissions/command.js","webpack://tikSDK/./src/saas/auth.js","webpack://tikSDK/./src/saas/organizations.js","webpack://tikSDK/./src/saas/subscriptions.js","webpack://tikSDK/./src/saas/offers.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__8__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","globalThis","tikSdkSession","authToken","instructorAuthToken","constructor","resource","model_name","verbose_name","verbose_name_plural","view_perm","add_perm","change_perm","delete_perm","lookup_field","useCache","list","validateCache","base_domain","base_url","get_url","path","configCache","cache","timeout","_cacheTimeout","clearInterval","cacheTimeout","setInterval","method","json","allow404","req","headers","url","qs","stringify","values","some","v","File","Blob","data","FormData","k","entries","Date","toISOString","Array","isArray","JSON","toString","append","undefined","console","log","session","Authorization","fetch","body","redirect","referrer","ok","includes","status","error","Error","statusText","response","e","Sentry","keys","captureException","toObj","obj","title","http","id","el","new","forceCreate","partial_update","instance","tikSdkConfig","$org","setConfig","API_BASE_URL","api_base_url","API_PREFIX","api_prefix","CACHE_PREFIX","cache_prefix","saas_base_domain","DEFAULT_CONFIG","SAAS_API_BASE_URL","VERSION","version","PROTOCOL","UsersApi","BaseApi","super","token","email","first_name","last_name","fn","tikSdkPermissions","user","roles","length","ALL_ROLES","ACTIVE_ROLES","TOP_ADMINS","SUIVIS","COMMERCIALS","STOCK_TEAM","POS_TEAM","tikSdkSaasSession","SaasApiMixin","saas_base_url","SaasBaseApi","NewslettersApi","subscription","newsletter","save","subject","process","NEWSLETTER_DEFAULT_SUBJECT","full_name","ProductsApi","stock_count","sku","category_id","category_title","is_active","saleoffers","price_net","tax_rate","cost_price","has_variants","is_shipping_required","is_digital","charge_taxes","charge_shipping","stockAdjustment","delta","query","categoriesApi","defaultPrice","product","parseFloat","offerPrice","price","count","offer","discount_type","discount_percentage","discount_amount","count_min","reduce","cp","stockColor","stock_alert_limit","stock_warning_limit","displayName","icon","backgroundColor","color","OrganizationApi","attrs","config_attrs","permissions","payment_providers","cover_file","picture_file","background_image_file","domains","origins","domain","type","origin","api","admin","cdn","$domains","$origins","$base_url","URL","http_protocol","protocol","http_port","port","organizationApi","Organization","apply","get_by_domain","get_by_referer","env","html2txt","html","replace","ctxt","hide_website","HIDE_WEBSITE","MODULES","split","installed_apps","INSTALLED_APPS","delivery_backends","DELIVERY_BACKENDS","description","description_txt","display_name","short_name","cover","static","picture","favicon","logo","background_image","location","phone","slug","about_us","summary","about_us_fr","fb_url","facebook_url","twitter_url","youtube_url","instagram_url","linkedin_url","wiretransfer","mandat","default_currency","tax_stamp","maintenance_mode","MAINTENANCE_MODE","maintenance_token","MAINTENANCE_TOKEN","webapp","BASE_URL","piwik_site_id","PIWIK_SITE_ID","fb_pixel_id","FB_PIXEL_ID","fb_page_id","FB_PAGE_ID","fb_app_id","google_analytics_id","GOOGLE_ANALYTICS_ID","google_gtag_id","GOOGLE_GTAG_ID","locales","LOCALES","default_locale","newsletter_default_subject","ENV","val","$env","envar","toUpperCase","join","startsWith","hasModule","md","hasDeliveryBackend","TikSdkOrganization","AuthApi","me","staffsApi","resp","has","navigator","onLine","fetchMe","set","configureScope","scope","setUser","logout","password","access_token","code","del","uid","new_password1","new_password2","password1","password2","provider","href","params","StaffsApi","unlimited_access","start_at","end_at","is_staff","filter","defineProperties","role","is_admin","is_freelance","writable","Cache","localStorage","config","use_cache","parse","res","forceCache","message","CategoriesApi","thumbnail","CommandsApi","client_id","client_attrs","address","country","state","city","postal_code","delivery_id","deliveryCompaniesApi","primary","store_id","storesApi","store_name","commercial_id","suivi_id","customer_note","staff_notes","items","product_id","discount","total","padStart","setClient","command","client","itemPrice","item","productsApi","addItem","find","it","max_count","push","changeItemProduct","removeItem","splice","indexOf","Math","round","totalHT","cmd","$organization","tva","ttc","shipment_id","command_id","user_id","commands","staff_id","map","commandTypes","commandStatus","date","dark","ShipmentCompaniesApi","done","canceled","is_primary","updateAttrs","typeAttrs","attr","default","types","ref","StoresApi","company_name","vat_number","EntollsApi","course_id","settings","order_id","course","deposit","paid","completed_lessons","LessonsApi","resourcetype","free","comments","published","days","start_day","start_date","chapter","display_text","InstructorsApi","is_featured","headline","TenantUsersApi","decode","input","decodeURIComponent","encode","encodeURIComponent","prefix","pairs","isNaN","part","parser","result","exec","ClientsApi","typeAchat","states","CollectionsApi","collection","OrdersApi","variant","StockApi","assigned_at","AttachmentsApi","CoursesApi","video","video_url","chapters","level","language","fallbackCache","async","lessonsApi","getLessonChapter","lesson","lessons","setupCourseLessons","index","is_open","immediate","daily","weekly","custom","schedule","lessons_duration","lessons_days","lessons_count","setupCourseSchedule","enroll","moment","created_at","now","lessonDeliveryDate","clone","add","canAccessLesson","ch","findLessonOnCourse","getLessonsCount","getLessonsDuration","duration","getLessonTrainer","getLessonCourse","trainer","fixEnroll","trim","enrollsApi","getNextPrevLessons","prev","next","found","lesson_id","from","instructorsApi","ChaptersApi","QuizsApi","StudentsApi","MeetingsApi","webinar","recorded","max_participants","hard_duration","guest_allowed","registration_open","username","AttendeesApi","webinar_id","ReportsApi","FormsApi","form","fname","lname","newslettersApi","subscribe","PagesApi","PostsApi","FORM_SPECIAL_KEYS","NotifyApi","k_n","toLowerCase","credentials","refer","target","DISPLAY_NAME","to","EMAIL","then","catch","_","register","hasRole","delivery_type","shipment","TenantAuthApi","usersApi","OrganizationsApi","_phone","plan_id","SubscriptionsApi","subscription_id","OffersApi"],"mappings":"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","file":"tik-sdk.full.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@sentry/browser\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@sentry/browser\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tikSDK\"] = factory(require(\"@sentry/browser\"));\n\telse\n\t\troot[\"tikSDK\"] = factory(root[\"Sentry\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__8__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","import * as Sentry from '@sentry/browser'\nimport qs from 'querystringify'\nimport { base_url, base_domain } from '../config.js'\n\nif (!globalThis.tikSdkSession) {\n  globalThis.tikSdkSession = {\n    authToken: null,\n    instructorAuthToken: null,\n  }\n}\n\nclass BaseApi {\n  constructor() {\n    this.resource = null\n    this.model_name = ''\n    this.verbose_name = ''\n    this.verbose_name_plural = ''\n    this.view_perm = ''\n    this.add_perm = ''\n    this.change_perm = ''\n    this.delete_perm = ''\n    this.lookup_field = 'id'\n\n    this.useCache = {\n      list: false,\n      get: false,\n    }\n    this.validateCache = true\n  }\n\n  get base_domain() {\n    return base_domain()\n  }\n\n  get base_url() {\n    return base_url()\n  }\n\n  get session() {\n    return globalThis.tikSdkSession\n  }\n\n  get_url(path) {\n    if (path) {\n      path = `${this.resource}/${path}`\n    } else {\n      path = `${this.resource}`\n    }\n    return `${this.base_url}${path}/`\n  }\n\n  configCache(cache, timeout) {\n    this.useCache = cache\n    if (this._cacheTimeout) {\n      clearInterval(this._cacheTimeout)\n    }\n    if (timeout) {\n      this.cacheTimeout = timeout\n      this._cacheTimeout = setInterval(() => {\n        this.validateCache = true\n      }, this.cacheTimeout)\n    }\n  }\n\n  async http(method, path, json, allow404 = false) {\n    let headers = {}\n    let url = this.get_url(path)\n    let req\n    if (json && method === 'GET') {\n      url += qs.stringify(json, true)\n      json = null\n    } else if (json) {\n      if (\n        Object.values(json).some((v) => v instanceof File || v instanceof Blob)\n      ) {\n        const data = new FormData()\n        // eslint-disable-next-line prefer-const\n        for (let [k, v] of Object.entries(json)) {\n          if (v === null || v === undefined) {\n            v = ''\n          } else if (v instanceof Date) {\n            v = v.toISOString()\n          } else if (Array.isArray(v)) {\n            v = JSON.stringify(v)\n          } else if (v instanceof File || v instanceof Blob) {\n            // pass : v = v\n            // DO NOT DELETE, next conditions depend on it\n          } else if (v instanceof Object) {\n            v = JSON.stringify(v)\n          } else if (typeof v === 'boolean') {\n            v = v ? 'True' : 'False'\n          } else {\n            v = v.toString()\n          }\n          data.append(k, v)\n        }\n        json = data\n      } else {\n        json = JSON.stringify(json)\n        headers = {\n          'Content-Type': 'application/json; charset=utf-8',\n        }\n      }\n    } else {\n      json = undefined\n    }\n    console.log(method, path, json || '')\n    try {\n      if (this.session.authToken) {\n        headers.Authorization = 'Bearer ' + this.session.authToken\n      }\n      req = await fetch(url, {\n        method,\n        headers,\n        body: json,\n        mode: 'cors',\n        // credentials: 'include',\n        cache: 'no-cache',\n        redirect: 'follow',\n        referrer: 'no-referrer',\n      })\n      if (!req.ok && !(allow404 && [404, 401].includes(req.status))) {\n        const error = new Error(req.statusText || req.status)\n        error.response = req\n        throw error\n      }\n      if (method !== 'DELETE') {\n        return await req.json()\n      }\n    } catch (e) {\n      console.error(\n        'HTTP Error:',\n        url.toString(),\n        JSON.stringify(json),\n        req && req.status\n      )\n      console.log('Sentry', typeof Sentry, Sentry, Object.keys(Sentry))\n      if (typeof Sentry === 'object' && 'captureException' in Sentry) {\n        Sentry.captureException(e)\n      }\n      throw e\n    }\n  }\n\n  toObj(o) {\n    return o\n  }\n\n  toString(obj) {\n    if (obj.title) {\n      return obj.title\n    } else if (obj.name) {\n      return obj.name\n    } else {\n      return ''\n    }\n  }\n\n  async list() {\n    if (this.useCache.list && !this.validateCache && this.data) {\n      console.log(`[HTTP] ${this.resource}.list(): using cache`)\n    } else {\n      const d = await this.http('GET', '')\n      this.data = d\n      this.validateCache = false\n    }\n    return this.data\n  }\n\n  async get(id, allow404 = false) {\n    if (id) {\n      const el = await this.http(\n        'GET',\n        id,\n        /* json= */ null,\n        /* allow404= */ allow404\n      )\n      return this.toObj(el)\n    } else {\n      return this.new()\n    }\n    /*\n    // const el = this.data.filter((el) => el[this.lookup_field] === id);\n    if (el.length === 1) {\n      return el[0];\n    } else {\n      console.log(\"GET NEW\");\n      return this.new();\n    }\n    */\n  }\n\n  async save(\n    el,\n    id,\n    forceCreate = false,\n    partial_update = false,\n    allow404 = false\n  ) {\n    this.validateCache = true\n    if ((el[this.lookup_field] || id) && !forceCreate) {\n      const instance = await this.http(\n        partial_update ? 'PATCH' : 'PUT',\n        id || el[this.lookup_field],\n        el,\n        allow404\n      )\n      return this.toObj(instance)\n      /*\n      const instance = this.get(el[this.lookup_field]);\n      if (instance) {\n        const old = Object.assign({}, instance);\n        Object.assign(instance, el);\n        if (this.preUpdate) {\n          await this.preUpdate(old, instance);\n        }\n        if (this.postUpdate) {\n          await this.postUpdate(old, instance);\n        }\n      }\n      */\n    } else {\n      const instance = await this.http('POST', '', el, allow404)\n      return instance\n      /*\n      const nextId = Math.max(...this.data.map((c) => c[this.lookup_field])) + 1;\n      el[this.lookup_field] = nextId;\n      if (this.preCreate) {\n        await this.preCreate(el);\n      }\n      this.data.push(el);\n      if (this.postCreate) {\n        await this.postCreate(el);\n      }\n      */\n    }\n  }\n\n  new() {\n    return null\n  }\n\n  async delete(id) {\n    this.validateCache = true\n    return this.http('DELETE', id)\n  }\n}\n\nexport default BaseApi\n","import { version } from '../package.json'\n\nconst DEFAULT_CONFIG = {\n  // env: 'production',\n  API_BASE_URL: '',\n  SAAS_API_BASE_URL: '',\n  API_PREFIX: '/api/',\n  CACHE_PREFIX: '',\n  VERSION: version,\n  PROTOCOL: 'https',\n  // LANG: 'fr',\n}\n\nif (!globalThis.tikSdkConfig) {\n  globalThis.tikSdkConfig = {}\n}\n\n;(function setDefaultConfig() {\n  for (const k of Object.keys(DEFAULT_CONFIG)) {\n    if (!(k in globalThis.tikSdkConfig)) {\n      globalThis.tikSdkConfig[k] = DEFAULT_CONFIG[k]\n    }\n  }\n})()\n\nexport function setConfigValue(k, v) {\n  globalThis.tikSdkConfig[k] = v\n}\n\nexport function setConfig(c) {\n  for (const k of Object.keys(DEFAULT_CONFIG)) {\n    if (k in c) {\n      globalThis.tikSdkConfig[k] = c[k]\n    }\n  }\n}\n\nexport function setConfigOrganization($org) {\n  setConfig({\n    API_BASE_URL: $org.api_base_url,\n    API_PREFIX: $org.api_prefix,\n    CACHE_PREFIX: $org.cache_prefix,\n  })\n}\n\nexport function base_domain() {\n  return globalThis.tikSdkConfig.API_BASE_URL\n}\n\nexport function base_url() {\n  return base_domain() + globalThis.tikSdkConfig.API_PREFIX\n}\n\nexport function saas_base_domain() {\n  return globalThis.tikSdkConfig.SAAS_API_BASE_URL\n}\n\nexport function saas_base_url() {\n  return saas_base_domain() + globalThis.tikSdkConfig.API_PREFIX\n}\n\nexport default globalThis.tikSdkConfig\n","import BaseApi from './base'\n\nexport class UsersApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'users'\n    this.model_name = 'user'\n    this.verbose_name = 'User'\n    this.verbose_name_plural = 'Users'\n    this.view_perm = 'user:view'\n    this.add_perm = 'user:add'\n    this.change_perm = 'user:change'\n    this.delete_perm = 'user:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async me() {\n    const obj = await this.http('GET', 'me', null, true)\n    return this.toObj(obj)\n  }\n\n  async activate(id, token) {\n    return await this.http('POST', `${id}/activate`, { token }, true)\n  }\n\n  async get_by_email(email) {\n    return await this.http('POST', 'email', { email }, true)\n  }\n\n  toString(obj) {\n    return `${obj.first_name || ''} ${obj.last_name || ''}`\n  }\n}\n\nconst api = new UsersApi()\n\nexport default api\n","if (!globalThis.tikSdkPermissions) {\n  globalThis.tikSdkPermissions = {}\n}\n\nexport const ROLES = {\n  ALL_ROLES: ['admin', 'manager', 'finance', 'suivi', 'commercial', 'stock'],\n  ACTIVE_ROLES: ['admin', 'manager', 'finance', 'suivi', 'commercial'],\n  TOP_ADMINS: ['admin', 'manager'],\n  SUIVIS: ['admin', 'manager', 'finance', 'suivi'],\n  COMMERCIALS: ['admin', 'manager', 'finance', 'commercial'],\n  STOCK_TEAM: ['admin', 'manager', 'stock'],\n  POS_TEAM: ['admin', 'manager', 'pos'],\n}\n\nexport function register(name, fn) {\n  globalThis.tikSdkPermissions[name] = fn\n}\n\nexport function hasPerm(name, $org, user, obj) {\n  if (!(name in globalThis.tikSdkPermissions)) {\n    console.error('permission not found', name)\n    return false\n  }\n  return globalThis.tikSdkPermissions[name]($org, user, obj)\n}\n\nexport function hasRole(user, ...roles) {\n  if (roles.length === 1 && Array.isArray(roles[0])) {\n    roles = roles[0]\n  }\n  return roles.some((r) => user.roles.includes(r))\n}\n","import { saas_base_url, saas_base_domain } from '../config.js'\nimport BaseApi from '../core/base.js'\n\nif (!globalThis.tikSdkSaasSession) {\n  globalThis.tikSdkSaasSession = {\n    authToken: null,\n  }\n}\n\nexport const SaasApiMixin = (BaseApi) =>\n  class extends BaseApi {\n    get base_domain() {\n      return saas_base_domain()\n    }\n\n    get base_url() {\n      return saas_base_url()\n    }\n\n    get session() {\n      return globalThis.tikSdkSaasSession\n    }\n  }\n\nclass SaasBaseApi extends SaasApiMixin(BaseApi) {}\n\nexport default SaasBaseApi\n","import BaseApi from '../core/base'\n\nexport class NewslettersApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'subscriptions'\n  }\n\n  async subscribe(subscription, newsletter) {\n    console.log('Subscripton', subscription.email)\n    await this.save({\n      subject: newsletter || process.env.NEWSLETTER_DEFAULT_SUBJECT,\n      full_name: subscription.full_name || 'utilisateur',\n      email: subscription.email,\n    })\n  }\n}\n\nconst newslettersApi = new NewslettersApi()\nexport default newslettersApi\n","import BaseApi from '../core/base.js'\nimport categoriesApi from './categories.js'\n\nclass ProductsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'products'\n    this.model_name = 'product'\n    this.verbose_name = 'Product'\n    this.verbose_name_plural = 'Products'\n    this.view_perm = 'product:view'\n    this.add_perm = 'product:add'\n    this.change_perm = 'product:change'\n    this.delete_perm = 'product:delete'\n    this.lookup_field = 'sku'\n    this.configCache({ list: true }, 15 * 1000)\n  }\n\n  new() {\n    return {\n      title: '',\n      stock_count: 0,\n      sku: '',\n      // status: \"In Stock\",\n      category_id: null,\n      category_title: '',\n      is_active: true,\n      saleoffers: [],\n      price_net: 0,\n      tax_rate: 19,\n      cost_price: 0,\n      has_variants: false,\n      is_shipping_required: true,\n      is_digital: false,\n      charge_taxes: true,\n      charge_shipping: false,\n      // weight:,\n    }\n  }\n\n  async addStock(p, stockAdjustment) {\n    if (typeof stockAdjustment === 'number') {\n      stockAdjustment = { delta: stockAdjustment }\n    }\n    return this.http('POST', `${p.sku}/stock`, stockAdjustment)\n  }\n\n  async rapport(query) {\n    return this.http('GET', `rapport`, query)\n  }\n\n  async categories() {\n    return categoriesApi.list()\n  }\n\n  defaultPrice(product) {\n    return parseFloat(product.price_net) * (1 + product.tax_rate / 100)\n  }\n\n  offerPrice(price, count, offer) {\n    price = parseFloat(price)\n    if (offer.discount_type === '%' && offer.discount_percentage) {\n      price = parseFloat(price) * (1 - offer.discount_percentage / 100)\n    } else if (offer.discount_type === 'n' && offer.discount_amount) {\n      price = parseFloat(price) - parseFloat(offer.discount_amount)\n    }\n    return price * count\n  }\n\n  offer(product, count) {\n    let offer = { count_min: 0, discount_percentage: 0 }\n    if (product.saleoffers) {\n      offer = product.saleoffers.reduce(\n        (cp, p) =>\n          p.count_min <= count && p.count_min >= cp.count_min ? p : cp,\n        offer\n      )\n    }\n    return offer\n  }\n\n  price(product, count) {\n    const price = this.defaultPrice(product)\n    const offer = this.offer(product, count)\n    return this.offerPrice(price, count, offer)\n  }\n\n  stockColor(product) {\n    if (product.stock_count < product.stock_alert_limit) {\n      return '#dd4b39'\n    } else if (product.stock_count < product.stock_warning_limit) {\n      return '#f39c12'\n    } else {\n      return '#00a65a'\n    }\n  }\n\n  status() {\n    return [\n      {\n        name: 'stock',\n        displayName: 'Stock',\n        icon: 'fa fa-cubes',\n        backgroundColor: 'rgb(137, 255, 88)',\n      },\n      {\n        name: 'new',\n        displayName: 'Nouveaux',\n        icon: 'fa fa-shopping-cart',\n        backgroundColor: '#f6e06c',\n      },\n      {\n        name: 'scheduled',\n        displayName: 'Réservés',\n        icon: 'fa fa-hourglass-half',\n        backgroundColor: 'rgb(255, 255, 210)',\n        color: 'white',\n      },\n      {\n        name: 'inprogress',\n        displayName: 'En Cours',\n        icon: 'fa fa-truck',\n        backgroundColor: '#337ab7',\n      },\n      {\n        name: 'done',\n        displayName: 'Délivrés',\n        icon: 'fa fa-check',\n        backgroundColor: '#89ff58',\n      },\n\n      {\n        name: 'canceled',\n        displayName: 'Annulés',\n        icon: 'fa fa-times',\n        backgroundColor: '#ff7b7b',\n      },\n\n      {\n        name: 'paid',\n        displayName: 'Payés',\n        icon: 'fa fa-money',\n        backgroundColor: 'rgb(32, 216, 223)',\n      },\n      {\n        name: 'returned',\n        displayName: 'Retourne Dépot',\n        icon: 'fa fa-cubes',\n        backgroundColor: '#000000',\n        color: 'white',\n      },\n      {\n        name: 'released',\n        displayName: 'Libérés',\n        icon: 'fa fa-truck',\n        backgroundColor: '#131654',\n      },\n    ]\n  }\n}\n\nconst productsApi = new ProductsApi()\nexport default productsApi\n","import BaseApi from './core/base'\nimport {\n  base_url,\n  base_domain,\n  saas_base_url,\n  saas_base_domain,\n} from './config.js'\n\nclass OrganizationApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'site'\n    // this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  get base_domain() {\n    return globalThis.tikSdkConfig.API_BASE_URL\n      ? base_domain()\n      : saas_base_domain()\n  }\n\n  get base_url() {\n    return globalThis.tikSdkConfig.API_BASE_URL ? base_url() : saas_base_url()\n  }\n\n  toObj(object) {\n    if (!object.attrs) {\n      object.attrs = {}\n    }\n    if (!object.config_attrs) {\n      object.config_attrs = {}\n    }\n    if (!object.permissions) {\n      object.permissions = []\n    }\n    if (!object.payment_providers) {\n      object.payment_providers = []\n    }\n    delete object.cover_file\n    delete object.picture_file\n    delete object.background_image_file\n\n    const domains = {}\n    const origins = {}\n    for (const domain of object.domains) {\n      domains[domain.type] = domain.domain\n      origins[domain.type] = domain.origin\n    }\n    if (!domains.api) {\n      domains.api = domains.admin\n      origins.api = origins.admin\n    }\n    if (!domains.admin) {\n      domains.admin = domains.api\n      origins.admin = origins.api\n    }\n    if (!domains.cdn) {\n      domains.cdn = domains.api\n      origins.cdn = origins.api\n    }\n\n    object.$domains = domains\n    object.$origins = origins\n\n    const $base_url = new URL(object.$origins.api)\n    object.http_protocol = ($base_url.protocol || 'https:') + '//'\n    object.http_port = $base_url.port ? `:${$base_url.port}` : ''\n\n    return object\n  }\n\n  async get() {\n    const obj = await this.list()\n    return this.toObj(obj)\n  }\n\n  async get_by_domain(domain) {\n    const obj = await this.http('GET', domain)\n    return this.toObj(obj)\n  }\n\n  async get_by_referer() {\n    const obj = await this.http('GET', 'hostname')\n    return this.toObj(obj)\n  }\n}\n\nexport const organizationApi = new OrganizationApi()\n\nexport class Organization {\n  constructor(data) {\n    if (data) {\n      this.apply(data)\n    }\n  }\n\n  async refresh() {\n    const data = await organizationApi.get()\n    if (data) {\n      this.apply(data)\n    }\n  }\n\n  async refresh_by_domain(domain) {\n    const data = await organizationApi.get_by_domain(domain)\n    if (data) {\n      this.apply(data)\n    }\n  }\n\n  async refresh_by_referer() {\n    const data = await organizationApi.get_by_referer()\n    if (data) {\n      this.apply(data)\n    }\n  }\n\n  apply(data) {\n    data = organizationApi.toObj(data)\n    this.data = data\n    this.domains = data.$domains\n    this.origins = data.$origins\n    this.env(this)\n  }\n\n  html2txt(html) {\n    if (html) {\n      return html.replace(/<[^>]+>/g, '')\n    } else {\n      return ''\n    }\n  }\n\n  env(ctxt) {\n    if (!ctxt) {\n      ctxt = {}\n    }\n    ctxt.hide_website = !!(this.data.hide_website || process.env.HIDE_WEBSITE)\n    ctxt.modules = (this.data.modules || process.env.MODULES || '').split(',')\n    ctxt.installed_apps = (\n      this.data.installed_apps ||\n      process.env.INSTALLED_APPS ||\n      ''\n    ).split(',')\n    ctxt.delivery_backends = (\n      this.data.delivery_backends ||\n      process.env.DELIVERY_BACKENDS ||\n      ''\n    ).split(',')\n    ctxt.description = this.data.description || ''\n    ctxt.description_txt =\n      this.data.description_txt || this.html2txt(this.data.description) || ''\n    ctxt.display_name = this.data.display_name || this.data.name\n    ctxt.short_name = this.data.name\n    ctxt.cover = this.static(this.data.cover)\n    ctxt.picture = this.static(this.data.picture)\n    ctxt.favicon = this.static(this.data.favicon)\n    ctxt.logo = this.static(this.data.picture)\n    ctxt.background_image = this.static(this.data.background_image)\n    ctxt.email = this.data.email\n    ctxt.location = this.data.location\n    ctxt.phone = this.data.phone\n    ctxt.slug = this.data.slug\n    ctxt.cache_prefix = this.data.slug\n    ctxt.about_us = this.data.summary\n    ctxt.about_us_fr = this.data.summary\n    ctxt.fb_url = this.data.facebook_url\n    ctxt.twitter_url = this.data.twitter_url\n    ctxt.youtube_url = this.data.youtube_url\n    ctxt.instagram_url = this.data.instagram_url\n    ctxt.linkedin_url = this.data.linkedin_url\n    ctxt.wiretransfer = this.data.wiretransfer\n    ctxt.mandat = this.data.mandat\n    ctxt.payment_providers = this.data.payment_providers\n    ctxt.default_currency = this.data.default_currency\n    ctxt.tax_rate = this.data.tax_rate\n    ctxt.tax_stamp = this.data.tax_stamp\n    ctxt.api_prefix = process.env.API_PREFIX || '/api/'\n    ctxt.maintenance_mode =\n      this.data.maintenance_mode || process.env.MAINTENANCE_MODE\n    ctxt.maintenance_token =\n      this.data.maintenance_token || process.env.MAINTENANCE_TOKEN\n    ctxt.api_base_url = this.data.$origins.api\n    if (this.data.$origins.webapp) {\n      ctxt.base_url = this.data.$origins.webapp\n    } else {\n      ctxt.base_url = process.env.BASE_URL\n    }\n\n    ctxt.piwik_site_id = this.data.piwik_site_id || process.env.PIWIK_SITE_ID\n    ctxt.fb_pixel_id = this.data.fb_pixel_id || process.env.FB_PIXEL_ID\n    ctxt.fb_page_id = this.data.fb_page_id || process.env.FB_PAGE_ID\n    ctxt.fb_app_id = this.data.fb_app_id\n    ctxt.google_analytics_id =\n      this.data.google_analytics_id || process.env.GOOGLE_ANALYTICS_ID\n    ctxt.google_gtag_id = this.data.google_gtag_id || process.env.GOOGLE_GTAG_ID\n    ctxt.locales = (process.env.LOCALES || 'en-US,fr-FR').split(',')\n    ctxt.default_locale = this.data.default_locale\n    ctxt.newsletter_default_subject = 'default'\n    return ctxt\n  }\n\n  ENV(ctxt) {\n    if (!ctxt) {\n      ctxt = {}\n    }\n    function value(val) {\n      return val === null || val === undefined ? '' : val\n    }\n    const $env = this.env()\n    for (const envar of Object.keys($env)) {\n      const val = value($env[envar])\n      if (Array.isArray(val)) {\n        ctxt[envar.toUpperCase()] = val.join(',')\n      } else if (val && typeof val === 'object') {\n        for (const k of Object.keys(val)) {\n          const v = value(val[k])\n          ctxt[`${envar}_${k}`.toUpperCase()] = v\n        }\n      } else {\n        ctxt[envar.toUpperCase()] = val\n      }\n    }\n    return ctxt\n  }\n\n  static(path) {\n    if (path && path.startsWith('/')) return `${this.data.$origins.cdn}${path}`\n    else return path\n  }\n  hasModule(md) {\n    return this.modules.includes(md)\n  }\n  hasDeliveryBackend(md) {\n    return this.delivery_backends.includes(md)\n  }\n}\n\nif (!globalThis.TikSdkOrganization) {\n  globalThis.TikSdkOrganization = new Organization()\n}\nconst $organization = globalThis.TikSdkOrganization\nexport default $organization\n","module.exports = __WEBPACK_EXTERNAL_MODULE__8__;","import * as Sentry from '@sentry/browser'\nimport BaseApi from './base.js'\n// import usersApi from './users.js'\nimport staffsApi from '../crm/staffs.js'\nimport cache from '../utils/cache.js'\n\nexport class AuthApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'auth'\n    // this.configCache({ list: true }, 60 * 60 * 1000)\n    this.me = {}\n    this.ns = {\n      me: 'me',\n      token: 'token',\n      authToken: 'authToken',\n    }\n  }\n\n  async fetchMe() {\n    // return await usersApi.me()\n    return await staffsApi.me()\n  }\n\n  async user() {\n    const obj = await this.http('GET', 'user', null, true)\n    return this.toObj(obj)\n  }\n\n  async currentUser() {\n    if (this.me && this.me.id) {\n      return this.me\n    } else {\n      let resp\n      if (cache.has(this.ns.me)) {\n        resp = cache.get(this.ns.me)\n      }\n      if (navigator.onLine) {\n        try {\n          resp = await this.fetchMe()\n        } catch (e) {\n          console.error(e)\n        }\n      }\n      if (!resp) {\n        await this.logout()\n        return null\n      }\n      cache.set(this.ns.me, resp)\n      this.me = resp\n\n      Sentry.configureScope((scope) => {\n        scope.setUser({ id: this.me.email })\n      })\n      return this.me\n    }\n  }\n\n  async login(email, password) {\n    email = email || undefined // email is optional if using auth_token as password\n    const resp = await this.http('POST', 'login', { email, password }, true)\n    if (resp.access_token) {\n      this.session[this.ns.authToken] = resp.access_token\n      cache.set(this.ns.token, { token: resp.access_token })\n      return true\n    } else {\n      return false\n    }\n  }\n\n  async isLoggedin() {\n    const token = cache.get(this.ns.token)\n    if (token) {\n      let resp = true\n      if (navigator.onLine) {\n        resp = await this.http('POST', 'token/verify', token, true)\n        resp = resp && resp.code !== 'token_not_valid'\n      }\n      if (resp) {\n        this.session[this.ns.authToken] = token.token\n        console.log(this.session)\n        return true\n      }\n    }\n    cache.del(this.ns.token)\n    return false\n  }\n\n  async logout() {\n    await this.http('POST', 'logout', {})\n    this.me = {}\n    this.session[this.ns.authToken] = null\n    cache.del(this.ns.token)\n    cache.del(this.ns.me)\n    Sentry.configureScope((scope) => {\n      scope.setUser({})\n    })\n  }\n\n  async emailAuthToken(email) {\n    return await this.http('POST', 'email_token', { email }, true)\n  }\n\n  async passwordRequestReset(email) {\n    return await this.http('POST', 'password/reset', { email }, true)\n  }\n\n  async passwordReset({ token, uid, password }) {\n    return await this.http('POST', 'password/reset/confirm', {\n      uid,\n      token,\n      new_password1: password,\n      new_password2: password,\n    })\n  }\n\n  async confirmEmail(key) {\n    return await this.http('POST', 'register/verify-email', { key }, true)\n  }\n\n  async register(user) {\n    return await this.http('POST', 'register', {\n      ...user,\n      password1: user.password,\n      password2: user.password,\n    })\n  }\n\n  async socialaccounts() {\n    return await this.http('GET', 'socialaccounts')\n  }\n\n  async socialapps() {\n    return await this.http('GET', 'socialapps')\n    /*\n    return [\n      'google',\n      'linkedin_oauth2',\n      'microsoft',\n      'facebook',\n      'twitter',\n    ]\n    */\n  }\n  async redirectSocialLogin(provider) {\n    const url = this.get_url(provider)\n    globalThis.location.href = url\n  }\n\n  async socialLogin(provider, params) {\n    const resp = await this.http('POST', `${provider}`, params, true)\n    if (resp.access_token) {\n      this.session[this.ns.authToken] = resp.access_token\n      cache.set(this.ns.token, { token: resp.access_token })\n      return true\n    } else {\n      return false\n    }\n  }\n}\n\nconst authApi = new AuthApi()\nexport default authApi\n","import { UsersApi } from '../core/users.js'\n\nclass StaffsApi extends UsersApi {\n  constructor() {\n    super()\n    this.resource = 'staffs'\n    this.model_name = 'staff'\n    this.verbose_name = 'Staff'\n    this.verbose_name_plural = 'Staffs'\n    this.view_perm = 'staff:view'\n    this.add_perm = 'staff:add'\n    this.change_perm = 'staff:change'\n    this.delete_perm = 'staff:delete'\n\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      first_name: '',\n      last_name: '',\n      full_name: '',\n      // status: 'indoor',\n      roles: ['commercial'],\n      phone: '',\n      email: '',\n      attrs: {\n        unlimited_access: false,\n        start_at: '08:00',\n        end_at: '18:00',\n      },\n      is_active: true,\n      is_staff: true,\n    }\n  }\n\n  toObj(o) {\n    if (!o || o.code === 'user_not_found') return null\n    const ALL_ROLES = [\n      'admin',\n      'manager',\n      'finance',\n      'suivi',\n      'commercial',\n      'stock',\n      'freelance',\n    ]\n    o.roles = ALL_ROLES.filter((r) => o.roles.includes(r))\n    if (!o.attrs) {\n      o.attrs = {}\n    }\n    Object.defineProperties(o, {\n      role: {\n        get() {\n          return this.roles[0]\n        },\n      },\n      is_admin: {\n        get() {\n          return this.roles.includes('admin')\n        },\n      },\n      is_freelance: {\n        get() {\n          return this.roles.includes('freelance')\n        },\n      },\n      start_at: {\n        value: '08:00',\n        writable: false,\n      },\n      end_at: {\n        value: '18:00',\n        writable: false,\n      },\n      unlimited_access: {\n        get() {\n          return this.attrs.unlimited_access\n        },\n        set(val) {\n          this.attrs.unlimited_access = val\n        },\n      },\n    })\n    return o\n  }\n\n  toString(obj) {\n    return `${obj.first_name || ''} ${obj.last_name || ''}`\n  }\n\n  async unlimited() {\n    return this.http('GET', 'unlimited')\n  }\n\n  roles() {\n    return [\n      'admin',\n      'manager',\n      'finance',\n      'suivi',\n      'commercial',\n      'stock',\n      ...((process.env.MODULES.includes('pos') && ['pos']) || []),\n    ]\n  }\n}\n\nconst staffsApi = new StaffsApi()\nexport default staffsApi\n","import config from '../config'\n\nexport class Cache {\n  has(n) {\n    return (\n      globalThis.localStorage &&\n      globalThis.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n    )\n  }\n\n  del(n) {\n    if (globalThis.localStorage) {\n      delete globalThis.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n    }\n  }\n\n  get(n, use_cache = true) {\n    if (use_cache && this.has(n)) {\n      try {\n        return JSON.parse(\n          globalThis.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n        )\n      } catch (e) {\n        console.error('[tikSdk]', e)\n      }\n    }\n  }\n\n  set(n, res) {\n    if (globalThis.localStorage) {\n      const k = `${config.CACHE_PREFIX}_cache_${n}`\n      globalThis.localStorage[k] = JSON.stringify(res)\n    }\n  }\n\n  async withCache(n, fn, use_cache = false) {\n    const cache = this.get(n, use_cache)\n    if (cache) return cache\n    const res = await fn()\n    this.set(n, res)\n    return res\n  }\n\n  async fallbackCache(n, fn, forceCache = false) {\n    let res\n    if (forceCache) {\n      return this.get(n, true)\n    }\n    try {\n      res = await fn()\n      this.set(n, res)\n    } catch (e) {\n      if (e.message !== 'Forbidden') {\n        res = this.get(n, true)\n      } else {\n        throw e\n      }\n    }\n    return res\n  }\n}\n\nexport default new Cache()\n","import BaseApi from '../core/base.js'\n\nclass CategoriesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'categories'\n    this.model_name = 'category'\n    this.verbose_name = 'Category'\n    this.verbose_name_plural = 'Categories'\n    this.view_perm = 'category:view'\n    this.add_perm = 'category:add'\n    this.change_perm = 'category:change'\n    this.delete_perm = 'category:delete'\n    this.configCache({ list: true }, 60 * 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      title: '',\n      thumbnail: undefined,\n      is_active: true,\n    }\n  }\n}\n\nconst categoriesApi = new CategoriesApi()\n\nexport default categoriesApi\n","import BaseApi from '../core/base.js'\n\nimport deliveryCompaniesApi from './delivery.js'\nimport storesApi from './stores.js'\nimport productsApi from './products.js'\nimport $organization from '../organization'\n\nexport class CommandsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'commands'\n    this.model_name = 'command'\n    this.verbose_name = 'Command'\n    this.verbose_name_plural = 'Commands'\n    this.view_perm = 'command:view'\n    this.add_perm = 'command:add'\n    this.change_perm = 'command:change'\n    this.delete_perm = 'command:delete'\n    this.configCache({ list: true }, 60 * 1000)\n  }\n\n  async new() {\n    return {\n      client_id: null,\n      client_attrs: {\n        full_name: '',\n        phone: '',\n        address: '',\n        country: 'TN',\n        state: '',\n        city: '',\n        postal_code: '',\n      },\n      type: 'delivery',\n      delivery_id: ((await deliveryCompaniesApi.primary()) || {}).id,\n      store_id: ((await storesApi.primary()) || {}).id,\n      store_name: ((await storesApi.primary()) || {}).title,\n      commercial_id: null,\n      suivi_id: null,\n      status: 'new',\n      customer_note: '',\n      staff_notes: [],\n      items: [\n        {\n          product_id: null,\n          title: '',\n          price: 0,\n          count: 0,\n        },\n      ],\n      discount: 0,\n      total: 0,\n    }\n  }\n\n  toString(obj) {\n    return obj.id ? obj.id.toString().padStart(8, '0') : ''\n  }\n\n  setClient(command, client) {\n    if (client) {\n      command.client_id = client.id\n      command.client_attrs.phone = client.phone\n      command.client_attrs.full_name = client.full_name\n      command.client_attrs.address = client.address\n      command.client_attrs.country = client.country\n      command.client_attrs.state = client.state\n      command.client_attrs.postal_code = client.postal_code\n    } else {\n      command.client_id = null\n      command.client_attrs = {}\n    }\n  }\n\n  itemPrice(item) {\n    if (item.product_id) {\n      if (item.product) {\n        return productsApi.price(item.product, item.count)\n      } else {\n        // FIXME\n        return parseFloat(item.price)\n      }\n    } else {\n      return parseFloat(item.price)\n    }\n  }\n\n  addItem(command, product) {\n    let item\n    if (typeof product === 'object') {\n      item = command.items.find((it) => it.product_id === product.id)\n      if (item) {\n        item.count++\n      } else {\n        item = {\n          title: product.title,\n          count: 1,\n          // price: product.price,\n          product_id: product.id,\n          max_count: product.count,\n          product,\n        }\n        command.items.push(item)\n      }\n    } else {\n      item = {\n        title: '',\n        count: 0,\n        price: 0,\n        product_id: null,\n        max_count: 0,\n      }\n      command.items.push(item)\n    }\n    item.price = this.itemPrice(item)\n    command.total = this.price(command)\n  }\n\n  changeItemProduct(command, item, product) {\n    if (typeof product === 'string') {\n      item.product_id = null\n      item.product = null\n      item.title = product\n      item.max_count = 4294967295\n    } else {\n      item.product_id = product.id\n      item.product = product\n      item.title = product.title\n      item.max_count = product.count || 4294967295\n    }\n    item.price = 0\n    item.count = 1\n    item.price = this.itemPrice(item)\n    command.total = this.price(command)\n  }\n\n  removeItem(command, item) {\n    command.items.splice(command.items.indexOf(item), 1)\n    command.total = this.price(command)\n  }\n\n  price(command) {\n    const price =\n      command.items.reduce((s, it) => this.itemPrice(it) + s, 0) -\n      parseFloat(command.discount || 0)\n    return Math.round(price * 100) / 100\n  }\n\n  totalHT(cmd) {\n    if ($organization.tax_rate) {\n      return (\n        (parseFloat(cmd.total) + parseFloat(cmd.discount || 0)) /\n        (1 + parseFloat($organization.tax_rate) / 100)\n      )\n    } else {\n      return parseFloat(cmd.total) + parseFloat(cmd.discount || 0)\n    }\n  }\n\n  tva(cmd) {\n    if ($organization.tax_rate) {\n      return (\n        (parseFloat(cmd.total) /\n          (1 + parseFloat($organization.tax_rate) / 100)) *\n        (parseFloat($organization.tax_rate) / 100)\n      )\n    } else {\n      return 0 // parseFloat(cmd.total)\n    }\n  }\n\n  ttc(command) {\n    return parseFloat(command.total) + parseFloat($organization.tax_stamp || 0)\n  }\n\n  async rapport(query) {\n    return this.http('GET', 'rapport', query)\n  }\n\n  async deliver(cmd, shipment_id = null) {\n    if (shipment_id) {\n      return this.http('POST', `${cmd.id}/deliver`, {\n        command_id: cmd.id,\n        shipment_id,\n      })\n    } else {\n      return this.http('POST', `${cmd.id}/deliver`)\n    }\n  }\n\n  async track(cmd) {\n    return this.http('POST', `${cmd.id}/track`)\n  }\n\n  async shipment(cmd) {\n    return this.http('GET', `${cmd.id}/deliver`)\n  }\n\n  async assign(user_id, commands) {\n    return this.http('POST', 'assign', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async makeNew(user_id, commands) {\n    return this.http('POST', 'new', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async cash(user_id, commands) {\n    return this.http('POST', 'cash', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async paid(user_id, commands) {\n    return this.http('POST', 'paid', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async returned(user_id, commands) {\n    return this.http('POST', 'returned', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  commandTypes() {\n    return ['direct', 'delivery']\n  }\n\n  commandStatus() {\n    return [\n      'new',\n      'scheduled',\n      'inprogress',\n      'done',\n      'canceled',\n      'returned',\n      'cash',\n      'paid',\n    ]\n  }\n\n  /*\n  async postCreate(command) {\n    for (const item of command.items) {\n      if (item.product_id) {\n        const p = await productsApi.get(item.product_id);\n        p.count -= item.count;\n        await productsApi.save(p);\n      }\n    }\n  }\n  async postUpdate(oldC, newC) {\n    if (oldC.status !== 'canceled' && newC.status === 'canceled') {\n      for (const item of newC.items) {\n        if (item.product_id) {\n          const p = await productsApi.get(item.product_id);\n          p.count += item.count;\n          await productsApi.save(p);\n        }\n      }\n    }\n  }\n  */\n  status() {\n    return [\n      {\n        name: 'new',\n        displayName: 'Nouveaux',\n        icon: 'fa fa-shopping-cart',\n        backgroundColor: '#f6e06c',\n        date: 'created_at',\n      },\n      {\n        name: 'scheduled',\n        displayName: 'Réservés',\n        icon: 'fa fa-hourglass-half',\n        backgroundColor: 'rgb(255, 255, 210)',\n        date: 'scheduled_at',\n      },\n      {\n        name: 'inprogress',\n        displayName: 'En Cours',\n        icon: 'fa fa-truck',\n        backgroundColor: '#337ab7',\n        date: 'assigned_at',\n      },\n      {\n        name: 'done',\n        displayName: 'Délivrés',\n        icon: 'fa fa-check',\n        backgroundColor: '#89ff58',\n        date: 'completed_at',\n      },\n\n      {\n        name: 'canceled',\n        displayName: 'Annulés',\n        icon: 'fa fa-times',\n        backgroundColor: '#ff7b7b',\n        date: 'completed_at',\n      },\n\n      {\n        name: 'cash',\n        displayName: 'Encaisés',\n        icon: 'fa fa-bank',\n        backgroundColor: '#e6e6e6',\n        date: 'cash_at',\n      },\n      {\n        name: 'paid',\n        displayName: 'Payés',\n        icon: 'fa fa-money',\n        backgroundColor: 'rgb(32, 216, 223)',\n        date: 'paid_at',\n      },\n      {\n        name: 'returned',\n        displayName: 'Retourne Dépot',\n        icon: 'fa fa-cubes',\n        backgroundColor: '#000000',\n        color: 'white',\n        date: 'paid_at',\n        dark: true,\n      },\n    ]\n  }\n}\n\nconst api = new CommandsApi()\nexport default api\n","import BaseApi from '../core/base.js'\n\nclass ShipmentCompaniesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'shipment-companies'\n    this.model_name = 'shipment-company'\n    this.verbose_name = 'Shipment Company'\n    this.verbose_name_plural = 'Shipment Companies'\n    this.view_perm = 'shipment-company:view'\n    this.add_perm = 'shipment-company:add'\n    this.change_perm = 'shipment-company:change'\n    this.delete_perm = 'shipment-company:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      type: 'aramex',\n      attrs: {},\n      name: '',\n      done: 0,\n      canceled: 0,\n      phone: '',\n      email: '',\n      address: '',\n      is_active: true,\n    }\n  }\n\n  async rapport(query) {\n    return this.http('GET', `rapport`, query)\n  }\n\n  async primary() {\n    return (await this.list()).find((it) => it.is_primary)\n  }\n\n  toObj(o) {\n    if (!o.attrs) {\n      o.attrs = {}\n    }\n    this.updateAttrs(o)\n    return o\n  }\n\n  updateAttrs(o) {\n    if (!o.type) {\n      return\n    }\n    const attrs = this.typeAttrs(o.type)\n    for (const attr of attrs) {\n      if (o.attrs[attr.name] === undefined) {\n        o.attrs[attr.name] = attr.default\n      }\n    }\n  }\n\n  typeAttrs(type) {\n    const res = this.types().find((it) => it.ref === type)\n    if (res) {\n      return res.attrs\n    } else {\n      return []\n    }\n  }\n\n  types() {\n    return [\n      {\n        ref: 'aramex',\n        name: 'Aramex',\n        color: 'rgb(228, 51, 51)',\n        attrs: [\n          { name: 'number', type: 'text', default: '' },\n          { name: 'pin', type: 'password', default: '' },\n          { name: 'entity', type: 'text', default: 'TUN' },\n          { name: 'country_code', type: 'text', default: 'TN' },\n        ],\n      },\n      {\n        ref: 'fparcel',\n        name: 'FParcel',\n        color: 'rgb(23, 97, 39)',\n        attrs: [],\n      },\n      {\n        ref: '1delivery',\n        name: 'First Delivery',\n        color: 'rgb(0, 141, 76)',\n        attrs: [],\n      },\n      {\n        ref: 'tnexpress',\n        name: 'Tunisia Express',\n        color: 'rgb(0, 128, 255)',\n        attrs: [\n          { name: 'username', type: 'text', default: '' },\n          { name: 'password', type: 'password', default: '' },\n          { name: 'api_key', type: 'text', default: '' },\n        ],\n      },\n    ]\n  }\n\n  status() {\n    return [\n      {\n        name: 'new',\n        displayName: 'Nouveaux',\n        icon: 'fa fa-hourglass-half',\n        backgroundColor: 'rgb(255,255,210)',\n        color: 'black',\n      },\n      {\n        name: 'created',\n        displayName: 'Command Confirmée',\n        icon: 'fa fa-shopping-cart',\n        backgroundColor: 'rgb(246, 224, 108)',\n        color: 'black',\n      },\n      {\n        name: 'in_delivery_facility',\n        displayName: 'En Depot',\n        icon: 'fa fa-bank',\n        backgroundColor: 'rgb(212, 137, 69)',\n      },\n      {\n        name: 'out_for_delivery',\n        displayName: 'En Cours',\n        icon: 'fa fa-truck',\n        backgroundColor: '#337ab7',\n      },\n      {\n        name: 'returned_delivery_facility',\n        displayName: 'Echec',\n        icon: 'fa fa-warning',\n        backgroundColor: 'rgb(255, 123, 123)',\n      },\n      {\n        name: 'canceled',\n        displayName: 'Annulé',\n        icon: 'fa fa-times',\n        backgroundColor: 'rgb(228, 51, 51)',\n      },\n      {\n        name: 'delivered',\n        displayName: 'Délivré',\n        icon: 'fa fa-check',\n        backgroundColor: 'rgb(137, 255, 88)',\n      },\n      {\n        name: 'returned_shipper',\n        displayName: 'Retourne Definitif',\n        icon: 'fa fa-cubes',\n        backgroundColor: 'black',\n      },\n      {\n        name: 'paid',\n        displayName: 'Payé',\n        icon: 'fa fa-money',\n        backgroundColor: 'rgb(32, 216, 223)',\n      },\n    ]\n  }\n}\n\nconst api = new ShipmentCompaniesApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nclass StoresApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'stores'\n    this.model_name = 'store'\n    this.verbose_name = 'Store'\n    this.verbose_name_plural = 'Stores'\n    this.view_perm = 'store:view'\n    this.add_perm = 'store:add'\n    this.change_perm = 'store:change'\n    this.delete_perm = 'store:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      title: '',\n      thumbnail: undefined,\n      phone: '',\n      email: '',\n      address: '',\n      city: '',\n      country: 'TN',\n      state: 'Sfax',\n      company_name: '',\n      vat_number: '',\n      postal_code: 3000,\n      is_active: true,\n    }\n  }\n\n  async primary() {\n    return (await this.list()).find((it) => it.is_primary)\n  }\n}\n\nconst storesApi = new StoresApi()\n\nexport default storesApi\n","import BaseApi from '../core/base.js'\n\nexport class EntollsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'enrolls'\n    this.model_name = 'enroll'\n    this.verbose_name = 'Enroll'\n    this.verbose_name_plural = 'Enrolls'\n    this.view_perm = 'enroll:view'\n    this.add_perm = 'enroll:add'\n    this.change_perm = 'enroll:change'\n    this.delete_perm = 'enroll:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async registerOrder(\n    course_id,\n    provider,\n    settings\n    // { success_url, failure_url, coupon }\n  ) {\n    return await this.http('POST', `${course_id}/payment`, {\n      provider,\n      ...settings,\n    })\n  }\n\n  async orderSuccess(course_id, order_id) {\n    return await this.http('POST', `${course_id}/success`, {\n      order_id,\n    })\n  }\n\n  async orderFailure(course_id, order_id) {\n    return await this.http('POST', `${course_id}/failure`, {\n      order_id,\n    })\n  }\n\n  new() {\n    return {\n      user_id: null,\n      user: null,\n      course_id: null,\n      course: null,\n      deposit: 0,\n      paid: false,\n      completed_lessons: '',\n      order_id: null,\n      is_active: true,\n    }\n  }\n\n  toString(obj) {\n    return obj.id ? obj.id.toString().padStart(8, '0') : ''\n  }\n}\n\nconst api = new EntollsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class LessonsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'lessons'\n    this.model_name = 'lesson'\n    this.verbose_name = 'Lesson'\n    this.verbose_name_plural = 'Lessons'\n    this.view_perm = 'lesson:view'\n    this.add_perm = 'lesson:add'\n    this.change_perm = 'lesson:change'\n    this.delete_perm = 'lesson:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      resourcetype: null,\n      sku: '',\n      title: '',\n      thumbnail: null,\n      description: '',\n\n      free: false,\n      comments: 'visible',\n      published: false,\n\n      days: 1,\n      start_day: 0,\n      start_date: null,\n\n      chapter: null,\n      course: null,\n    }\n  }\n  types() {\n    return [\n      { name: 'VideoLesson', icon: 'video', display_text: 'Video Lesson' },\n      { name: 'PDFLesson', icon: 'file-pdf', display_text: 'PDF Lesson' },\n      {\n        name: 'RichTextLesson',\n        icon: 'align-justify',\n        display_text: 'Rich Text',\n      },\n      { name: 'EmbedLesson', icon: 'code', display_text: 'Embed' },\n      { name: 'Quiz', icon: 'list', display_text: 'Quiz' },\n      {\n        name: 'DownloadsContent',\n        icon: 'file-download',\n        display_text: 'Downloads Page',\n      },\n    ]\n  }\n}\n\nconst api = new LessonsApi()\n\nexport default api\n","import { UsersApi } from '../core/users.js'\n\nexport class InstructorsApi extends UsersApi {\n  constructor() {\n    super()\n    this.resource = 'instructors'\n    this.model_name = 'instructor'\n    this.verbose_name = 'Creator'\n    this.verbose_name_plural = 'Creators'\n    this.view_perm = 'instructor:view'\n    this.add_perm = 'instructor:add'\n    this.change_perm = 'instructor:change'\n    this.delete_perm = 'instructor:delete'\n\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async featured() {\n    return await this.http('GET', 'featured')\n  }\n\n  new() {\n    return {\n      first_name: '',\n      last_name: '',\n      full_name: '',\n      roles: ['instructor'],\n      phone: '',\n      email: '',\n      attrs: {\n        unlimited_access: true,\n        start_at: '08:00',\n        end_at: '18:00',\n        summary: '',\n        is_featured: false,\n        facebook_url: '',\n      },\n      description: '',\n      headline: '',\n      is_active: true,\n      is_staff: false,\n    }\n  }\n}\n\nconst api = new InstructorsApi()\n\nexport default api\n","import { SaasApiMixin } from './base'\nimport { UsersApi as TenantUsersApi } from '../core/users.js'\n\nexport class UsersApi extends SaasApiMixin(TenantUsersApi) {}\n\nconst api = new UsersApi()\nexport default api\n","export * from './src/index.js'\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","import BaseApi from '../core/base.js'\n\nexport class ClientsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'clients'\n    this.model_name = 'client'\n    this.verbose_name = 'Client'\n    this.verbose_name_plural = 'Clients'\n    this.view_perm = 'client:view'\n    this.add_perm = 'client:add'\n    this.change_perm = 'client:change'\n    this.delete_perm = 'client:delete'\n    this.configCache({ list: true }, 5 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      full_name: '',\n      first_name: '',\n      last_name: '',\n      attrs: {\n        type: 'detail',\n        facebook_url: '',\n      },\n      phone: '',\n      address: '',\n      country: 'TN',\n      state: 'Sfax',\n      postal_code: '',\n      email: '',\n      company_name: '',\n      vat_number: '',\n    }\n  }\n\n  toObj(o) {\n    if (!o.attrs) {\n      o.attrs = {}\n    }\n    Object.defineProperties(o, {\n      type: {\n        get() {\n          return this.attrs.type\n        },\n        set(val) {\n          this.attrs.type = val\n        },\n      },\n    })\n    return o\n  }\n\n  toString(obj) {\n    return `${obj.first_name || ''} ${obj.last_name || ''}`\n  }\n\n  async rapport(id) {\n    return this.http('GET', id + '/rapport')\n  }\n\n  async history(id) {\n    return this.http('GET', id + '/history')\n  }\n  typeAchat() {\n    return ['gros', 'detail']\n  }\n\n  states() {\n    return [\n      'Ariana',\n      'Beja',\n      'Ben Arous',\n      'Bizerte',\n      'Gabes',\n      'Gafsa',\n      'Jendouba',\n      'Kairouan',\n      'Kasserine',\n      'Kebili',\n      'Kef',\n      'Mahdia',\n      'Mannouba',\n      'Medenine',\n      'Monastir',\n      'Nabeul',\n      'Sfax',\n      'Sidi Bouzid',\n      'Siliana',\n      'Sousse',\n      'Tataouine',\n      'Tozeur',\n      'Tunis',\n      'Zaghouan',\n    ]\n  }\n}\n\nconst api = new ClientsApi()\nexport default api\n","import productsApi from './products.js'\nimport BaseApi from '../core/base.js'\n\nclass CollectionsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'collections'\n    this.model_name = 'collection'\n    this.verbose_name = 'Collection'\n    this.verbose_name_plural = 'Collections'\n    this.view_perm = 'collection:view'\n    this.add_perm = 'collection:add'\n    this.change_perm = 'collection:change'\n    this.delete_perm = 'collection:delete'\n    this.lookup_field = 'sku'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      sku: '',\n      title: '',\n      description: '',\n      delivery_id: null,\n      suivi_id: null,\n      items: [\n        {\n          product_id: null,\n          name: '',\n          price: 0,\n          count: 0,\n        },\n      ],\n      discount: 0,\n      price_net: 0,\n      thumbnail: '',\n      is_active: true,\n    }\n  }\n\n  itemPrice(item) {\n    if (item.product_id) {\n      if (item.product) {\n        return productsApi.price(item.product, item.count)\n      } else {\n        // FIXME\n        return parseFloat(item.price)\n      }\n    } else {\n      return parseFloat(item.price)\n    }\n  }\n\n  addItem(collection, product) {\n    let item\n    if (typeof product === 'object') {\n      item = collection.items.find((it) => it.product_id === product.id)\n      if (item) {\n        item.count++\n      } else {\n        item = {\n          title: product.title,\n          count: 1,\n          // price: product.price,\n          product_id: product.id,\n          max_count: product.count,\n          product,\n        }\n        collection.items.push(item)\n      }\n    } else {\n      item = {\n        title: '',\n        count: 0,\n        price: 0,\n        product_id: null,\n        max_count: 0,\n      }\n      collection.items.push(item)\n    }\n    item.price = this.itemPrice(item)\n    collection.price_net = this.price(collection)\n  }\n\n  changeItemProduct(collection, item, product) {\n    if (typeof product === 'string') {\n      item.product_id = null\n      item.product = null\n      item.title = product\n      item.max_count = 4294967295\n    } else {\n      item.product_id = product.id\n      item.product = product\n      item.title = product.title\n      item.max_count = product.count || 4294967295\n    }\n    item.price = 0\n    item.count = 1\n    item.price = this.itemPrice(item)\n    collection.price_net = this.price(collection)\n  }\n\n  removeItem(collection, item) {\n    collection.items.splice(collection.items.indexOf(item), 1)\n    collection.price_net = this.price(collection)\n  }\n\n  price(collection) {\n    const price =\n      collection.items.reduce((s, it) => this.itemPrice(it) + s, 0) -\n      parseFloat(collection.discount || 0)\n    return Math.round(price * 100) / 100\n  }\n}\n\nconst collectionsApi = new CollectionsApi()\nexport default collectionsApi\n","import { CommandsApi } from './commands.js'\n\nexport class OrdersApi extends CommandsApi {\n  constructor() {\n    super()\n    // this.resource = 'commands'\n    this.model_name = 'order'\n    this.verbose_name = 'Order'\n    this.verbose_name_plural = 'Orders'\n    this.view_perm = 'order:view'\n    this.add_perm = 'order:add'\n    this.change_perm = 'order:change'\n    this.delete_perm = 'order:delete'\n  }\n\n  async registerOrder(order_id, provider, settings) {\n    return await this.http('POST', `${order_id}/payment`, {\n      variant: provider,\n      ...settings,\n    })\n  }\n}\n\nconst api = new OrdersApi()\nexport default api\n","import BaseApi from '../core/base.js'\n\nclass StockApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'stock'\n    this.model_name = 'stock'\n    this.verbose_name = 'Stock'\n    this.verbose_name_plural = 'Stock'\n    this.view_perm = 'stock:view'\n    this.add_perm = 'stock:add'\n    this.change_perm = 'stock:change'\n    this.delete_perm = 'stock:delete'\n    this.configCache({ list: true }, 60 * 1000)\n  }\n\n  async report(assigned_at, suivi_id) {\n    return this.http('GET', 'report', {\n      assigned_at,\n      suivi_id,\n    })\n  }\n\n  async release(user_id, commands) {\n    return this.http('POST', 'release', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  toString(obj) {\n    return obj.id ? obj.id.toString().padStart(8, '0') : ''\n  }\n}\n\nconst stockApi = new StockApi()\nexport default stockApi\n","import BaseApi from '../core/base.js'\n\nexport class AttachmentsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'attachments'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new AttachmentsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\nimport enrollsApi from './enrolls'\nimport lessonsApi from './lessons'\nimport instructorsApi from './instructors'\nimport cache from '../utils/cache'\n\nexport class CoursesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'courses'\n    this.model_name = 'course'\n    this.verbose_name = 'Course'\n    this.verbose_name_plural = 'Courses'\n    this.view_perm = 'course:view'\n    this.add_perm = 'course:add'\n    this.change_perm = 'course:change'\n    this.delete_perm = 'course:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      sku: '',\n      title: '',\n      thumbnail: null,\n      description: '',\n      user_id: null,\n      user: null,\n\n      video: null,\n      video_url: null,\n\n      category_id: null,\n      category_title: '',\n\n      chapters: [],\n\n      level: 'beginner',\n      language: 'fr',\n      days: 30,\n      published: false,\n      is_active: true,\n      saleoffers: [],\n      price_net: 0,\n      tax_rate: 19,\n    }\n  }\n\n  async getCourse(id, forceCache = false) {\n    return await cache.fallbackCache(\n      'courses_get_' + id,\n      async () => await this.get(id),\n      forceCache\n    )\n  }\n\n  async listCourses(forceCache = false) {\n    return await cache.fallbackCache(\n      'courses_list',\n      async () => await this.list(),\n      forceCache\n    )\n  }\n\n  async getLesson(id, forceCache = false) {\n    return await cache.fallbackCache(\n      'lessons_get_' + id,\n      async () => await lessonsApi.get(id),\n      forceCache\n    )\n  }\n\n  async listEnrolledCourses() {\n    return await this.http('GET', `enrolled`)\n  }\n\n  getLessonChapter(lesson, course) {\n    return course.chapters.find((c) =>\n      c.lessons.some((l) => l.id === lesson.id)\n    )\n  }\n\n  setupCourseLessons(course) {\n    let count = 0\n    for (const m of course.chapters) {\n      for (const l of m.lessons) {\n        l.index = count\n        l.is_open = true\n        l.start_at = {\n          immediate: 0,\n          daily: 1,\n          weekly: 7,\n          custom: -1,\n        }[course.schedule]\n        l.start_at *= l.index\n        if (l.start_at === undefined || l.start_at < 0) {\n          l.start_at = l.start_date || l.start_day\n        }\n        count++\n      }\n    }\n    course.lessons_duration = course.days\n    course.lessons_days = course.days\n    course.lessons_count = count\n  }\n\n  setupCourseSchedule(course, enroll, moment) {\n    let created_at = null\n    if (enroll) {\n      created_at = moment(enroll.created_at)\n    }\n    const now = moment()\n    function lessonDeliveryDate(l) {\n      if (l.start_date) {\n        return moment(l.start_date)\n      } else if (enroll) {\n        return created_at.clone().add(l.start_at, 'days')\n        // .startOf('day')\n      } else {\n        return moment(l.start_at)\n      }\n    }\n    function canAccessLesson(l) {\n      if (enroll) {\n        return now > l.start_at\n      } else {\n        return !l.start_at\n      }\n    }\n    for (const ch of course.chapters) {\n      for (const l of ch.lessons) {\n        l.start_at = lessonDeliveryDate(l)\n        l.is_open = canAccessLesson(l)\n      }\n    }\n    return course\n  }\n\n  findLessonOnCourse(lesson, course) {\n    for (const ch of course.chapters) {\n      for (const l of ch.lessons) {\n        if (l.id === lesson.id) {\n          return l\n        }\n      }\n    }\n  }\n\n  getLessonsCount(course) {\n    let count = 0\n    for (const m of course.chapters) {\n      count += m.lessons.length\n    }\n    return count\n  }\n\n  getLessonsDuration(course) {\n    let count = 0\n    for (const m of course.chapters) {\n      for (const l of m.lessons) {\n        count += l.duration || 0\n      }\n    }\n    return count\n  }\n\n  getLessonTrainer(id) {\n    // FIXME\n    try {\n      return this.getLessonCourse(id).trainer\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  fixEnroll(enroll) {\n    if (enroll && typeof enroll.completed_lessons === 'string') {\n      enroll.completed_lessons = enroll.completed_lessons\n        .split(',')\n        .map((e) => e.trim())\n        .filter((e) => e)\n    }\n    return enroll\n  }\n\n  async getCourseEnroll(course_id, user_id, forceCache = false) {\n    // user_id = parseInt(user_id)\n\n    const enroll = await cache.fallbackCache(\n      'users_' + user_id + '_enrolls_' + course_id,\n      async () => await enrollsApi.get(course_id, true),\n      forceCache\n    )\n    if (enroll && enroll.id) {\n      return this.fixEnroll(enroll)\n    }\n  }\n\n  async getUserEnrolls() {\n    // user_id = parseInt(user_id)\n    return await enrollsApi.list()\n  }\n\n  getNextPrevLessons(course, lesson) {\n    let prev = null\n    let next = null\n    let found = false\n\n    for (const m of course.chapters) {\n      if (next) {\n        break\n      }\n      for (const l of m.lessons) {\n        if (found) {\n          next = l\n          break\n        }\n        if (lesson.id === l.id) {\n          found = true\n        }\n        if (!found) {\n          prev = l\n        }\n      }\n    }\n    return [prev, next]\n  }\n\n  async markCompleted(lesson_id, enroll) {\n    const completed_lessons = Array.from(enroll.completed_lessons)\n    if (!completed_lessons.includes(lesson_id)) {\n      completed_lessons.push(lesson_id)\n    }\n    enroll = await enrollsApi.save(\n      {\n        id: enroll.id,\n        course: enroll.course,\n        completed_lessons: completed_lessons.join(','),\n      },\n      enroll.id\n    )\n    return this.fixEnroll(enroll)\n  }\n\n  async enroll(course) {\n    // user_id = parseInt(user_id)\n    if (course.id) {\n      course = course.id\n    }\n    const enroll = await enrollsApi.save({\n      course,\n      completed_lessons: '',\n    })\n    return this.fixEnroll(enroll)\n  }\n\n  async getInstructor(id, forceCache) {\n    // id = parseInt(id)\n    return await cache.fallbackCache(\n      'instructors_get_' + id,\n      async () => await instructorsApi.get(id),\n      forceCache\n    )\n  }\n  status(obj) {\n    const disabled = {\n      display_text: 'Disabled',\n      color: 'secondary',\n    }\n    const draft = {\n      display_text: 'Draft',\n      color: 'warning',\n    }\n    const published = {\n      display_text: 'Published',\n      color: 'success',\n    }\n    return obj && obj.is_active ? (obj.published ? published : draft) : disabled\n  }\n}\n\nconst coursesApi = new CoursesApi()\n\nexport default coursesApi\n","import BaseApi from '../core/base.js'\n\nexport class ChaptersApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'chapters'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new ChaptersApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class QuizsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'quizs'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new QuizsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nclass CategoriesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'course-categories'\n    this.model_name = 'course-category'\n    this.verbose_name = 'Course Category'\n    this.verbose_name_plural = 'Course Categories'\n    this.view_perm = 'course-category:view'\n    this.add_perm = 'course-category:add'\n    this.change_perm = 'course-category:change'\n    this.delete_perm = 'course-category:delete'\n    this.configCache({ list: true }, 60 * 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      title: '',\n      thumbnail: undefined,\n      is_active: true,\n    }\n  }\n}\n\nconst categoriesApi = new CategoriesApi()\n\nexport default categoriesApi\n","import { UsersApi } from '../core/users.js'\n\nexport class StudentsApi extends UsersApi {\n  constructor() {\n    super()\n    this.resource = 'students'\n    this.model_name = 'student'\n    this.verbose_name = 'Learner'\n    this.verbose_name_plural = 'Learners'\n    this.view_perm = 'student:view'\n    this.add_perm = 'student:add'\n    this.change_perm = 'student:change'\n    this.delete_perm = 'student:delete'\n\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      first_name: '',\n      last_name: '',\n      full_name: '',\n      roles: ['student'],\n      phone: '',\n      email: '',\n      attrs: {\n        unlimited_access: false,\n        start_at: '08:00',\n        end_at: '18:00',\n        summary: '',\n        // is_featured: false,\n        facebook_url: '',\n      },\n      description: '',\n      headline: '',\n      is_active: true,\n      is_staff: false,\n    }\n  }\n}\n\nconst api = new StudentsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class MeetingsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'meetings'\n    this.model_name = 'meeting'\n    this.verbose_name = 'Meeting'\n    this.verbose_name_plural = 'Meetings'\n    this.view_perm = 'meeting:view'\n    this.add_perm = 'meeting:add'\n    this.change_perm = 'meeting:change'\n    this.delete_perm = 'meeting:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      sku: '',\n      title: '',\n      thumbnail: null,\n      description: '',\n      user_id: null,\n      user: null,\n\n      webinar: {\n        id: null,\n        sku: '',\n        title: '',\n        thumbnail: null,\n        description: '',\n        recorded: null,\n        max_participants: null,\n        hard_duration: null,\n      },\n\n      duration: null,\n      start_at: null,\n\n      guest_allowed: false,\n      registration_open: false,\n\n      // video: null,\n      // video_url: null,\n\n      // category_id: null,\n      // category_title: '',\n\n      published: false,\n      is_active: true,\n      saleoffers: [],\n      price_net: 0,\n      tax_rate: 19,\n    }\n  }\n\n  async join(id, username) {\n    const res = await this.http('POST', `${id}/join`, {\n      username,\n    })\n    return res.url\n  }\n  status(obj) {\n    const disabled = {\n      display_text: 'Disabled',\n      color: 'secondary',\n    }\n    const draft = {\n      display_text: 'Draft',\n      color: 'warning',\n    }\n    const published = {\n      display_text: 'Published',\n      color: 'success',\n    }\n    return obj && obj.is_active ? (obj.published ? published : draft) : disabled\n  }\n}\n\nconst api = new MeetingsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class AttendeesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'attendees'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async registerOrder(\n    webinar_id,\n    provider,\n    settings\n    // { success_url, failure_url, coupon }\n  ) {\n    return await this.http('POST', `${webinar_id}/payment`, {\n      provider,\n      ...settings,\n    })\n  }\n\n  async orderSuccess(webinar_id, order_id) {\n    return await this.http('POST', `${webinar_id}/success`, {\n      order_id,\n    })\n  }\n\n  async orderFailure(webinar_id, order_id) {\n    return await this.http('POST', `${webinar_id}/failure`, {\n      order_id,\n    })\n  }\n}\n\nconst api = new AttendeesApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class ReportsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'reports'\n  }\n\n  async course(id) {\n    return await this.http('GET', `courses/${id}`)\n  }\n}\n\nconst api = new ReportsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\nimport newslettersApi from './newsletters'\n\nexport class FormsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'forms'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  name(form) {\n    if ('name' in form) {\n      return form.name\n    } else if ('full_name' in form) {\n      return form.full_name\n    } else if ('first_name' in form) {\n      return `${form.first_name} ${form.last_name || ''}`\n    } else if ('fname' in form) {\n      return `${form.fname} ${form.lname || ''}`\n    } else {\n      return ''\n    }\n  }\n\n  async submit(form, id) {\n    if (!form) {\n      console.log('Ignore form...')\n      return\n    }\n    console.log('Submit form...')\n    form.status = 'inprogress'\n    let res\n    try {\n      res = await this.http('POST', `${id}/submit`, form, true)\n      form.status = 'success'\n      if (form.email) {\n        await newslettersApi.subscribe({\n          email: form.email,\n          full_name: this.name(form),\n        })\n      }\n    } catch (e) {\n      form.status = 'failure'\n      throw e\n    }\n  }\n}\n\nconst api = new FormsApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\nimport newslettersApi from './newsletters'\n\nexport class PagesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'pages'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new PagesApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nexport class PostsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'posts'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new PostsApi()\n\nexport default api\n","import newslettersApi from './newsletters'\n\nconst FORM_SPECIAL_KEYS = [\n  'email',\n  'status',\n  'fname',\n  'lname',\n  'first_name',\n  'name',\n  'full_name',\n  'last_name',\n  'phone',\n  'target',\n  'message',\n]\n\nexport class NotifyApi {\n  message(form) {\n    let r = ''\n    const keys = Object.keys(form).filter((k) => !FORM_SPECIAL_KEYS.includes(k))\n    for (const k of keys) {\n      const k_n = k.replace(/[_-]+/, ' ').toLowerCase()\n      const v = form[k]\n      if (v) {\n        v.toString().trim()\n      }\n      r += `${k_n}: ${v}\\n`\n    }\n    if ('message' in form) {\n      r += `\\nmessage:\\n${form.message}\\n`\n    }\n    return r\n  }\n\n  name(form) {\n    if ('name' in form) {\n      return form.name\n    } else if ('full_name' in form) {\n      return form.full_name\n    } else if ('first_name' in form) {\n      return `${form.first_name} ${form.last_name || ''}`\n    } else if ('fname' in form) {\n      return `${form.fname} ${form.lname || ''}`\n    } else {\n      return ''\n    }\n  }\n\n  async save(form) {\n    if (!form || !form.email) {\n      console.log('Ignore form...')\n      return\n    }\n    console.log('Submit form...')\n    form.status = 'inprogress'\n    return fetch('https://api.admin.tik.website/feedbacks/notify', {\n      method: 'POST',\n      redirect: 'manual',\n      credentials: 'omit',\n      refer: '',\n      body: JSON.stringify({\n        target: form.target || `New Submit - ${process.env.DISPLAY_NAME}`,\n        subject: '',\n        name: this.name(form),\n        phone: form.phone || '',\n        from: form.email,\n        to: process.env.EMAIL,\n        message: this.message(form),\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(async (res) => {\n        if (!res.ok) {\n          throw new Error('error')\n        }\n        form.status = 'success'\n        await newslettersApi.subscribe({\n          email: form.email,\n          full_name: this.name(form),\n        })\n      })\n      .catch((_) => {\n        form.status = 'failure'\n        throw new Error('error')\n      })\n  }\n}\n\nconst api = new NotifyApi()\nexport default api\n","/*eslint no-unused-vars: [\"error\", { \"args\": \"none\" }]*/\nimport { register, hasRole } from './base'\n\n// TODO: support all default permissions for all models (view, add, change/change, delete)\n\n/***************************************************/\n/*          Client Model Permissions               */\n/***************************************************/\n\nregister('client:view', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance'])\n)\n\nregister('client:add', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance', 'commercial'])\n)\n\nregister('client:change', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance', 'commercial'])\n)\n\nregister(\n  'client:delete',\n  ($org, user, obj) => hasRole(user, ['admin', 'manager']) && obj && obj.id\n)\n\n/***************************************************/\n/*          Staff Model Permissions                */\n/***************************************************/\n\nregister('staff:view', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance'])\n)\n\nregister('staff:add', ($org, user, obj) => hasRole(user, ['admin', 'manager']))\n\nregister('staff:change', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager'])\n)\n\nregister('staff:delete', ($org, user, obj) => false)\n\n/***************************************************/\n/*          Product Model Permissions              */\n/***************************************************/\n\nregister('product:view', ($org, user, obj) => true)\n\nregister('product:add', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager'])\n)\n\nregister('product:change', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager'])\n)\n\nregister('product:delete', ($org, user, obj) => false)\n\nregister(\n  'product:add-quantity',\n  ($org, user, obj) => hasRole(user, ['admin', 'manager']) && obj && obj.id\n)\n\n/***************************************************/\n/*          Collection Model Permissions           */\n/***************************************************/\n\nregister('collection:view', ($org, user, obj) => $org.hasModule('collections'))\n\nregister(\n  'collection:add',\n  ($org, user, obj) =>\n    $org.hasModule('collections') && hasRole(user, ['admin', 'manager'])\n)\n\nregister(\n  'collection:change',\n  ($org, user, obj) =>\n    $org.hasModule('collections') && hasRole(user, ['admin', 'manager'])\n)\n\nregister('collection:delete', ($org, user, obj) => false)\n\n/***************************************************/\n/*          Store Model Permissions                */\n/***************************************************/\n\nregister('store:view', ($org, user, obj) => hasRole(user, ['admin', 'manager']))\n\nregister('store:add', ($org, user, obj) => hasRole(user, ['admin', 'manager']))\n\nregister('store:change', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager'])\n)\n\nregister('store:delete', ($org, user, obj) => false)\n\n/***************************************************/\n/*          ShipmentCompanies Model Permissions    */\n/***************************************************/\n\nregister('shipment-company:view', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager'])\n)\n\nregister('shipment-company:add', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager'])\n)\n\nregister('shipment-company:change', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager'])\n)\n\nregister('shipment-company:delete', ($org, user, obj) => false)\n","/*eslint no-unused-vars: [\"error\", { \"args\": \"none\" }]*/\nimport { register, hasRole } from './base'\n\n// TODO: support all default permissions for all models (view, add, change/change, delete)\n\n/***************************************************/\n/*          Student Model Permissions              */\n/***************************************************/\n\nregister('student:view', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance'])\n)\n\nregister('student:add', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance', 'commercial'])\n)\n\nregister('student:change', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance', 'commercial'])\n)\n\nregister(\n  'student:delete',\n  ($org, user, obj) => hasRole(user, ['admin', 'manager']) && obj && obj.id\n)\n\n/***************************************************/\n/*          Instructor Model Permissions           */\n/***************************************************/\n\nregister('instructor:view', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance'])\n)\n\nregister('instructor:add', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager'])\n)\n\nregister('instructor:change', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager'])\n)\n\nregister('instructor:delete', ($org, user, obj) => false)\n\n/***************************************************/\n/*          Enrolls Model Permissions              */\n/***************************************************/\n\nregister('enroll:view', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance', 'instructor'])\n)\n\nregister('enroll:add', ($org, user, obj) => hasRole(user, ['admin', 'manager']))\n\nregister('enroll:change', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager'])\n)\n\nregister('enroll:delete', ($org, user, obj) => false)\n\n/***************************************************/\n/*          Course Model Permissions               */\n/***************************************************/\n\nregister('course:view', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'instructor'])\n)\n\nregister('course:add', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'instructor'])\n)\n\nregister('course:change', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'instructor'])\n)\n\nregister('course:delete', ($org, user, obj) => false)\n\n/***************************************************/\n/*          Lesson Model Permissions               */\n/***************************************************/\n\nregister('lesson:view', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'instructor'])\n)\n\nregister('lesson:add', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'instructor'])\n)\n\nregister('lesson:change', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'instructor'])\n)\n\nregister('lesson:delete', ($org, user, obj) => false)\n\n/***************************************************/\n/*          Meeting Model Permissions              */\n/***************************************************/\n\nregister('meeting:view', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'instructor'])\n)\n\nregister('meeting:add', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'instructor'])\n)\n\nregister('meeting:change', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'instructor'])\n)\n\nregister('meeting:change-webinar', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager'])\n)\n\nregister('meeting:delete', ($org, user, obj) => false)\n","/*eslint no-unused-vars: [\"error\", { \"args\": \"none\" }]*/\nimport { register, hasRole } from './base'\n\nregister('dashboard:view-tags', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'stock'])\n)\n\nregister('dashboard:edit-tags', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'stock', 'finance', 'suivi'])\n)\n\nregister(\n  'dashboard:view',\n  ($org, user, obj) =>\n    $org.hasModule('commands') &&\n    hasRole(user, [\n      'admin',\n      'manager',\n      'finance',\n      'suivi',\n      'stock',\n      'freelance',\n    ])\n)\n\nregister('dashboard:filter', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance'])\n)\n\nregister('dashboard:change', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance'])\n)\n\nregister('dashboard:view-products-chart', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance', 'stock'])\n)\n\nregister('dashboard:filter-stock-suivi', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager'])\n)\n","/*eslint no-unused-vars: [\"error\", { \"args\": \"none\" }]*/\nimport { register, hasRole } from './base'\n\nregister('command:view', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance'])\n)\n\nregister('command:add', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance', 'commercial'])\n)\n\nregister('command:change', ($org, user, obj) => false)\n\nregister(\n  'command:delete',\n  ($org, user, obj) => hasRole(user, ['admin', 'manager']) && obj && obj.id\n)\n\nregister(\n  'command:assign',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'suivi', 'manager', 'finance']) &&\n    (!obj || ['scheduled', 'new'].includes(obj.status))\n)\n\nregister(\n  'command:mark-new',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance', 'commercial']) &&\n    (!obj || obj.status === 'scheduled')\n)\n\nregister(\n  'command:mark-done',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance', 'suivi']) &&\n    (!obj || obj.status === 'inprogress')\n)\n\nregister(\n  'command:mark-canceled',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance', 'suivi']) &&\n    (!obj || obj.status === 'inprogress')\n)\n\nregister(\n  'command:mark-returned',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance', 'suivi', 'stock']) &&\n    (!obj || ['canceled', 'inprogress'].includes(obj.status))\n)\n\nregister(\n  'command:mark-cash',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance']) &&\n    (!obj || ['done', 'inprogress'].includes(obj.status))\n)\n\nregister(\n  'command:mark-paid',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance']) &&\n    (!obj || ['cash', 'inprogress'].includes(obj.status))\n)\n\nregister(\n  'command:print-quote',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance', 'stock', 'suivi']) &&\n    (!obj ||\n      (obj.id && ['inprogress', 'done', 'canceled'].includes(obj.status)))\n)\n\nregister(\n  'command:print-aramex-label',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance', 'stock']) &&\n    $org.hasDeliveryBackend('aramex') &&\n    ['aramex'].includes(obj.delivery_type) &&\n    ['inprogress', 'done', 'cash', 'paid'].includes(obj.status)\n)\n\nregister(\n  'command:print-fparcel-label',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance', 'stock']) &&\n    $org.hasDeliveryBackend('fparcel') &&\n    ['fparcel'].includes(obj.delivery_type) &&\n    ['inprogress', 'done', 'cash', 'paid'].includes(obj.status)\n)\n\nregister(\n  'command:export-fparcel',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance', 'stock']) &&\n    $org.hasDeliveryBackend('fparcel') &&\n    (!obj ||\n      (['fparcel'].includes(obj.delivery_type) &&\n        ['inprogress'].includes(obj.status)))\n)\n\nregister(\n  'command:export',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance', 'stock']) &&\n    $org.hasModule('export') &&\n    (!obj || ['inprogress'].includes(obj.status))\n)\n\nregister(\n  'command:view-history',\n  ($org, user, obj) => obj.id && hasRole(user, ['admin', 'manager', 'finance'])\n)\n\nregister(\n  'command:turnback-inprogress',\n  ($org, user, obj) =>\n    obj &&\n    obj.type === 'delivery' &&\n    ['done', 'canceled'].includes(obj.status) &&\n    hasRole(user, ['admin', 'manager'])\n)\n\nregister(\n  'command:view-shipment',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'suivi', 'manager', 'finance']) &&\n    $org.hasDeliveryBackend(obj.delivery_type) &&\n    ['inprogress', 'done', 'cash', 'paid', 'returned'].includes(obj.status)\n)\n\nregister(\n  'command:create-shipment',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'suivi', 'manager', 'finance']) &&\n    $org.hasDeliveryBackend(obj.delivery_type) &&\n    ['new'].includes(obj.status)\n)\n\nregister(\n  'command:assign-shipment',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance']) &&\n    $org.hasDeliveryBackend(obj.delivery_type) &&\n    ['aramex'].includes(obj.delivery_id) &&\n    !obj.shipment &&\n    ['inprogress'].includes(obj.status)\n)\n\nregister('command:mass-assign-shipment', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'finance'])\n)\n\nregister(\n  'command:track-shipment',\n  ($org, user, obj) =>\n    hasRole(user, ['admin', 'manager', 'finance']) &&\n    $org.hasDeliveryBackend(obj.delivery_type) &&\n    obj.shipment &&\n    obj.shipment.shipment_id &&\n    ['inprogress', 'done', 'cash'].includes(obj.status)\n)\n\nregister(\n  'command:view-cash',\n  ($org, user, obj) => hasRole(user, ['admin']) && obj.status === 'done'\n)\n\nregister(\n  'command:view-paid',\n  ($org, user, obj) =>\n    hasRole(user, ['admin']) && ['cash', 'paid'].includes(obj.status)\n)\n\nregister(\n  'command:view-returned',\n  ($org, user, obj) =>\n    hasRole(user, ['admin']) && ['canceled', 'returned'].includes(obj.status)\n)\n\nregister('command:mark-released', ($org, user, obj) =>\n  hasRole(user, ['admin', 'manager', 'stock'])\n)\n\nregister(\n  'command:invoice',\n  ($org, user, obj) =>\n    ['inprogress', 'done', 'cash', 'paid'].includes(obj.status) &&\n    hasRole(user, ['admin', 'manager', 'finance'])\n)\n\nregister(\n  'command:print-invoice',\n  ($org, user, obj) =>\n    ['inprogress', 'done', 'cash', 'paid'].includes(obj.status) &&\n    hasRole(user, ['admin', 'manager', 'finance'])\n)\n","import { SaasApiMixin } from './base'\nimport { AuthApi as TenantAuthApi } from '../core/auth.js'\nimport usersApi from './users'\n\nexport class AuthApi extends SaasApiMixin(TenantAuthApi) {\n  constructor() {\n    super()\n    this.ns = {\n      me: 'me',\n      token: 'token',\n      authToken: 'authToken',\n    }\n  }\n\n  async fetchMe() {\n    return await usersApi.me()\n  }\n}\n\nconst authApi = new AuthApi()\nexport default authApi\n","import BaseApi from './base'\n\nexport class OrganizationsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'organizations'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  toObj(object) {\n    if (!object.attrs) {\n      object.attrs = {}\n    }\n    if (!object.payment_providers) {\n      object.payment_providers = []\n    }\n    object._phone = object.phone\n    delete object.cover_file\n    delete object.picture_file\n    return object\n  }\n\n  async subscribe(id, plan_id) {\n    const res = await this.http('POST', `${id}/subscribe`, {\n      plan_id,\n    })\n    return res\n  }\n}\n\nconst api = new OrganizationsApi()\n\nexport default api\n","import BaseApi from './base'\n\nexport class SubscriptionsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'organizations/subscriptions'\n    // this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async registerOrder(\n    subscription_id,\n    provider,\n    settings\n    // { success_url, failure_url, coupon }\n  ) {\n    return await this.http('POST', `${subscription_id}/payment`, {\n      provider,\n      ...settings,\n    })\n  }\n\n  async orderSuccess(subscription_id, order_id) {\n    return await this.http('POST', `${subscription_id}/success`, {\n      order_id,\n    })\n  }\n\n  async orderFailure(subscription_id, order_id) {\n    return await this.http('POST', `${subscription_id}/failure`, {\n      order_id,\n    })\n  }\n}\n\nconst api = new SubscriptionsApi()\n\nexport default api\n","import BaseApi from './base'\n\nexport class OffersApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'offers'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n}\n\nconst api = new OffersApi()\n\nexport default api\n"],"sourceRoot":""}