{"version":3,"sources":["webpack://tikSDK.[name]/webpack/universalModuleDefinition","webpack://tikSDK.[name]/webpack/bootstrap","webpack://tikSDK.[name]/./src/core/base.js","webpack://tikSDK.[name]/./src/crm/products.js","webpack://tikSDK.[name]/./src/crm/categories.js","webpack://tikSDK.[name]/./src/config.js","webpack://tikSDK.[name]/./src/crm/commands.js","webpack://tikSDK.[name]/./src/crm/delivery.js","webpack://tikSDK.[name]/./src/crm/stores.js","webpack://tikSDK.[name]/external {\"commonjs\":\"@sentry/browser\",\"commonjs2\":\"@sentry/browser\",\"amd\":\"@sentry/browser\",\"root\":\"Sentry\"}","webpack://tikSDK.[name]/./node_modules/querystringify/index.js","webpack://tikSDK.[name]/./src/crm/clients.js","webpack://tikSDK.[name]/./src/crm/collections.js","webpack://tikSDK.[name]/./src/organization.js","webpack://tikSDK.[name]/./src/core/organization.js","webpack://tikSDK.[name]/./src/crm/orders.js","webpack://tikSDK.[name]/./src/crm/staffs.js","webpack://tikSDK.[name]/./src/core/users.js","webpack://tikSDK.[name]/./src/crm/stock.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__8__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","globalThis","tikSdkSession","authToken","instructorAuthToken","constructor","resource","model_name","verbose_name","verbose_name_plural","view_perm","add_perm","change_perm","delete_perm","lookup_field","useCache","list","validateCache","base_domain","base_url","get_url","path","configCache","cache","timeout","_cacheTimeout","clearInterval","cacheTimeout","setInterval","method","json","allow404","req","headers","url","qs","stringify","values","some","v","File","Blob","data","FormData","k","entries","Date","toISOString","Array","isArray","JSON","toString","append","undefined","extendedTracing","console","log","session","Authorization","fetch","body","redirect","referrer","ok","includes","status","error","Error","statusText","response","e","Sentry","captureException","toObj","obj","title","http","id","el","new","forceCreate","partial_update","instance","ProductsApi","BaseApi","super","stock_count","sku","category_id","category_title","is_active","saleoffers","price_net","tax_rate","cost_price","has_variants","is_shipping_required","is_digital","charge_taxes","charge_shipping","stockAdjustment","delta","query","categoriesApi","defaultPrice","product","parseFloat","offerPrice","price","count","offer","discount_type","discount_percentage","discount_amount","count_min","reduce","cp","stockColor","stock_alert_limit","stock_warning_limit","displayName","icon","backgroundColor","color","CategoriesApi","thumbnail","tikSdkConfig","$org","setConfig","API_BASE_URL","api_base_url","API_PREFIX","api_prefix","CACHE_PREFIX","cache_prefix","saas_base_domain","DEFAULT_CONFIG","FETCH_MODE","SAAS_API_BASE_URL","VERSION","version","PROTOCOL","keys","CommandsApi","client_id","client_attrs","full_name","phone","address","country","state","city","postal_code","type","delivery_id","deliveryCompaniesApi","primary","store_id","storesApi","store_name","commercial_id","suivi_id","customer_note","staff_notes","items","product_id","discount","total","padStart","setClient","command","client","itemPrice","item","productsApi","addItem","find","it","max_count","push","changeItemProduct","removeItem","splice","indexOf","Math","round","totalHT","cmd","$organization","tva","ttc","tax_stamp","shipment_id","command_id","user_id","commands","staff_id","map","commandTypes","commandStatus","date","dark","ShipmentCompaniesApi","attrs","done","canceled","email","is_primary","updateAttrs","typeAttrs","attr","default","res","types","ref","StoresApi","company_name","vat_number","has","decode","input","decodeURIComponent","replace","encode","encodeURIComponent","prefix","pairs","isNaN","length","join","parse","part","parser","result","exec","ClientsApi","first_name","last_name","facebook_url","defineProperties","set","val","typeAchat","states","CollectionsApi","description","collection","Organization","apply","fetch_mode","domain","organizationApi","get_site","refresh","domains","$domains","origins","$origins","env","html2txt","html","ctxt","hide_website","process","HIDE_WEBSITE","MODULES","split","installed_apps","INSTALLED_APPS","delivery_backends","DELIVERY_BACKENDS","description_txt","display_name","short_name","cover","static","picture","favicon","logo","background_image","location","slug","summary","about_us","about_us_fr","fb_url","twitter_url","youtube_url","instagram_url","linkedin_url","wiretransfer","mandat","payment_providers","config_attrs","permissions","default_currency","maintenance_mode","MAINTENANCE_MODE","maintenance_token","MAINTENANCE_TOKEN","api","webapp","BASE_URL","piwik_site_id","PIWIK_SITE_ID","fb_pixel_id","FB_PIXEL_ID","fb_page_id","FB_PAGE_ID","fb_app_id","google_analytics_id","GOOGLE_ANALYTICS_ID","google_gtag_id","GOOGLE_GTAG_ID","locales","LOCALES","default_locale","newsletter_default_subject","ENV","$env","envar","toUpperCase","startsWith","cdn","hasModule","md","hasDeliveryBackend","TikSdkOrganization","OrganizationApi","saas_base_url","cover_file","picture_file","background_image_file","origin","admin","$base_url","URL","http_protocol","protocol","http_port","port","CONFIG","OrdersApi","order_id","provider","settings","variant","StaffsApi","UsersApi","roles","unlimited_access","start_at","end_at","is_staff","code","role","is_admin","is_freelance","writable","token","StockApi","assigned_at"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,oBACR,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,CAAC,mBAAoBJ,GACF,iBAAZC,QACdA,QAAa,IAAID,EAAQG,QAAQ,qBAEjCJ,EAAa,OAAIA,EAAa,QAAK,GAAIA,EAAa,OAAO,IAAIC,EAAQD,EAAa,SARtF,CASGO,MAAM,SAASC,GAClB,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUT,QAGnC,IAAIC,EAASM,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHX,QAAS,IAUV,OANAY,EAAQH,GAAUI,KAAKZ,EAAOD,QAASC,EAAQA,EAAOD,QAASQ,GAG/DP,EAAOU,GAAI,EAGJV,EAAOD,QA0Df,OArDAQ,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAAShB,EAASiB,EAAMC,GAC3CV,EAAoBW,EAAEnB,EAASiB,IAClCG,OAAOC,eAAerB,EAASiB,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAASxB,GACX,oBAAXyB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAerB,EAASyB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAerB,EAAS,aAAc,CAAE2B,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAASlC,GAChC,IAAIiB,EAASjB,GAAUA,EAAO6B,WAC7B,WAAwB,OAAO7B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAO,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,G,2zBC9EhDC,WAAWC,gBACdD,WAAWC,cAAgB,CACzBC,UAAW,KACXC,oBAAqB,O,MAIzB,MACEC,cACEzC,KAAK0C,SAAW,KAChB1C,KAAK2C,WAAa,GAClB3C,KAAK4C,aAAe,GACpB5C,KAAK6C,oBAAsB,GAC3B7C,KAAK8C,UAAY,GACjB9C,KAAK+C,SAAW,GAChB/C,KAAKgD,YAAc,GACnBhD,KAAKiD,YAAc,GACnBjD,KAAKkD,aAAe,KAEpBlD,KAAKmD,SAAW,CACdC,MAAM,EACNlC,KAAK,GAEPlB,KAAKqD,eAAgB,EAGvB,kBACE,OAAO,IAAAC,eAGT,eACE,OAAO,IAAAC,YAGT,cACE,OAAOlB,WAAWC,cAGpBkB,QAAQC,GAMN,OAJEA,EADEA,EACM,GAAEzD,KAAK0C,YAAYe,IAEnB,GAAEzD,KAAK0C,SAET,GAAE1C,KAAKuD,WAAWE,KAG5BC,YAAYC,EAAOC,GACjB5D,KAAKmD,SAAWQ,EACZ3D,KAAK6D,eACPC,cAAc9D,KAAK6D,eAEjBD,IACF5D,KAAK+D,aAAeH,EACpB5D,KAAK6D,cAAgBG,YAAY,KAC/BhE,KAAKqD,eAAgB,GACpBrD,KAAK+D,eAIZ,WAAWE,EAAQR,EAAMS,EAAMC,GAAW,GACxC,IAEIC,EAFAC,EAAU,GACVC,EAAMtE,KAAKwD,QAAQC,GAEvB,GAAIS,GAAmB,QAAXD,EACVK,GAAOC,UAAGC,UAAUN,GAAM,GAC1BA,EAAO,UACF,GAAIA,EACT,GACEnD,OAAO0D,OAAOP,GAAMQ,KAAMC,GAAMA,aAAaC,MAAQD,aAAaE,MAClE,CACA,MAAMC,EAAO,IAAIC,SAEjB,IAAK,IAAKC,EAAGL,KAAM5D,OAAOkE,QAAQf,GAC5BS,QACFA,EAAI,GACKA,aAAaO,KACtBP,EAAIA,EAAEQ,cACGC,MAAMC,QAAQV,GACvBA,EAAIW,KAAKd,UAAUG,GACVA,aAAaC,MAAQD,aAAaE,OAI3CF,EADSA,aAAa5D,OAClBuE,KAAKd,UAAUG,GACG,kBAANA,EACZA,EAAI,OAAS,QAEbA,EAAEY,YAERT,EAAKU,OAAOR,EAAGL,GAEjBT,EAAOY,OAEPZ,EAAOoB,KAAKd,UAAUN,GACtBG,EAAU,CACR,eAAgB,wCAIpBH,OAAOuB,EAELpD,WAAWqD,gBACbC,QAAQC,IAAI,OAAQ3B,EAAQK,EAAKJ,GAAQ,IAEzCyB,QAAQC,IAAI3B,EAAQR,EAAMS,GAAQ,IAEpC,IAcE,GAbIlE,KAAK6F,QAAQtD,YACf8B,EAAQyB,cAAgB,UAAY9F,KAAK6F,QAAQtD,WAEnD6B,QAAY/B,WAAW0D,MAAMzB,EAAK,CAChCL,SACAI,UACA2B,KAAM9B,EACN1C,KAAM,OAENmC,MAAO,WACPsC,SAAU,SACVC,SAAU,kBAEP9B,EAAI+B,IAAQhC,GAAY,CAAC,IAAK,KAAKiC,SAAShC,EAAIiC,SAAU,CAC7D,MAAMC,EAAQ,IAAIC,MAAMnC,EAAIoC,YAAcpC,EAAIiC,QAE9C,MADAC,EAAMG,SAAWrC,EACXkC,EAER,GAAe,WAAXrC,EACF,aAAaG,EAAIF,OAEnB,MAAOwC,GAUP,MATAf,QAAQW,MACN,cACAhC,EAAIiB,WACJD,KAAKd,UAAUN,GACfE,GAAOA,EAAIiC,QAES,iBAAXM,GAAuB,qBAAsBA,GACtDA,EAAOC,iBAAiBF,GAEpBA,GAIVG,MAAM/F,GACJ,OAAOA,EAGTyE,SAASuB,GACP,OAAIA,EAAIC,MACCD,EAAIC,MACFD,EAAIlG,KACNkG,EAAIlG,KAEJ,GAIX,aACE,GAAIZ,KAAKmD,SAASC,OAASpD,KAAKqD,eAAiBrD,KAAK8E,KACpDa,QAAQC,IAAK,UAAS5F,KAAK0C,oCACtB,CACL,MAAM/B,QAAUX,KAAKgH,KAAK,MAAO,IACjChH,KAAK8E,KAAOnE,EACZX,KAAKqD,eAAgB,EAEvB,OAAOrD,KAAK8E,KAGd,UAAUmC,EAAI9C,GAAW,GACvB,GAAI8C,EAAI,CACN,MAAMC,QAAWlH,KAAKgH,KACpB,MACAC,EACY,KACI9C,GAElB,OAAOnE,KAAK6G,MAAMK,GAElB,OAAOlH,KAAKmH,MAahB,WACED,EACAD,EACAG,GAAc,EACdC,GAAiB,EACjBlD,GAAW,GAGX,GADAnE,KAAKqD,eAAgB,GAChB6D,EAAGlH,KAAKkD,gBAAiB+D,GAAQG,EAuBpC,aADuBpH,KAAKgH,KAAK,OAAQ,GAAIE,EAAI/C,GAtBA,CACjD,MAAMmD,QAAiBtH,KAAKgH,KAC1BK,EAAiB,QAAU,MAC3BJ,GAAMC,EAAGlH,KAAKkD,cACdgE,EACA/C,GAEF,OAAOnE,KAAK6G,MAAMS,IA+BtBH,MACE,OAAO,KAGT,aAAaF,GAEX,OADAjH,KAAKqD,eAAgB,EACdrD,KAAKgH,KAAK,SAAUC,K,kWCpP/B,MAAMM,UAAoBC,UACxB/E,cACEgF,QACAzH,KAAK0C,SAAW,WAChB1C,KAAK2C,WAAa,UAClB3C,KAAK4C,aAAe,UACpB5C,KAAK6C,oBAAsB,WAC3B7C,KAAK8C,UAAY,eACjB9C,KAAK+C,SAAW,cAChB/C,KAAKgD,YAAc,iBACnBhD,KAAKiD,YAAc,iBACnBjD,KAAKkD,aAAe,MACpBlD,KAAK0D,YAAY,CAAEN,MAAM,GAAQ,MAGnC+D,MACE,MAAO,CACLJ,MAAO,GACPW,YAAa,EACbC,IAAK,GAELC,YAAa,KACbC,eAAgB,GAChBC,WAAW,EACXC,WAAY,GACZC,UAAW,EACXC,SAAU,GACVC,WAAY,EACZC,cAAc,EACdC,sBAAsB,EACtBC,YAAY,EACZC,cAAc,EACdC,iBAAiB,GAKrB,eAAepG,EAAGqG,GAIhB,MAH+B,iBAApBA,IACTA,EAAkB,CAAEC,MAAOD,IAEtBxI,KAAKgH,KAAK,OAAW7E,EAAEwF,IAAJ,SAAiBa,GAG7C,cAAcE,GACZ,OAAO1I,KAAKgH,KAAK,MAAQ,UAAU0B,GAGrC,mBACE,OAAOC,UAAcvF,OAGvBwF,aAAaC,GACX,OAAOC,WAAWD,EAAQb,YAAc,EAAIa,EAAQZ,SAAW,KAGjEc,WAAWC,EAAOC,EAAOC,GAOvB,OANAF,EAAQF,WAAWE,GACS,MAAxBE,EAAMC,eAAyBD,EAAME,oBACvCJ,EAAQF,WAAWE,IAAU,EAAIE,EAAME,oBAAsB,KAC5B,MAAxBF,EAAMC,eAAyBD,EAAMG,kBAC9CL,EAAQF,WAAWE,GAASF,WAAWI,EAAMG,kBAExCL,EAAQC,EAGjBC,MAAML,EAASI,GACb,IAAIC,EAAQ,CAAEI,UAAW,EAAGF,oBAAqB,GAQjD,OAPIP,EAAQd,aACVmB,EAAQL,EAAQd,WAAWwB,OACzB,CAACC,EAAIrH,IACHA,EAAEmH,WAAaL,GAAS9G,EAAEmH,WAAaE,EAAGF,UAAYnH,EAAIqH,EAC5DN,IAGGA,EAGTF,MAAMH,EAASI,GACb,MAAMD,EAAQhJ,KAAK4I,aAAaC,GAC1BK,EAAQlJ,KAAKkJ,MAAML,EAASI,GAClC,OAAOjJ,KAAK+I,WAAWC,EAAOC,EAAOC,GAGvCO,WAAWZ,GACT,OAAIA,EAAQnB,YAAcmB,EAAQa,kBACzB,UACEb,EAAQnB,YAAcmB,EAAQc,oBAChC,UAEA,UAIXtD,SACE,MAAO,CACL,CACEzF,KAAM,QACNgJ,YAAa,QACbC,KAAM,cACNC,gBAAiB,qBAEnB,CACElJ,KAAM,MACNgJ,YAAa,WACbC,KAAM,sBACNC,gBAAiB,WAEnB,CACElJ,KAAM,YACNgJ,YAAa,WACbC,KAAM,uBACNC,gBAAiB,qBACjBC,MAAO,SAET,CACEnJ,KAAM,aACNgJ,YAAa,WACbC,KAAM,cACNC,gBAAiB,WAEnB,CACElJ,KAAM,OACNgJ,YAAa,WACbC,KAAM,cACNC,gBAAiB,WAGnB,CACElJ,KAAM,WACNgJ,YAAa,UACbC,KAAM,cACNC,gBAAiB,WAGnB,CACElJ,KAAM,OACNgJ,YAAa,QACbC,KAAM,cACNC,gBAAiB,qBAEnB,CACElJ,KAAM,WACNgJ,YAAa,iBACbC,KAAM,cACNC,gBAAiB,UACjBC,MAAO,SAET,CACEnJ,KAAM,WACNgJ,YAAa,UACbC,KAAM,cACNC,gBAAiB,a,MAML,IAAIvC,E,oUC/JxB,MAAMyC,UAAsBxC,UAC1B/E,cACEgF,QACAzH,KAAK0C,SAAW,aAChB1C,KAAK2C,WAAa,WAClB3C,KAAK4C,aAAe,WACpB5C,KAAK6C,oBAAsB,aAC3B7C,KAAK8C,UAAY,gBACjB9C,KAAK+C,SAAW,eAChB/C,KAAKgD,YAAc,kBACnBhD,KAAKiD,YAAc,kBACnBjD,KAAK0D,YAAY,CAAEN,MAAM,GAAQ,OAGnC+D,MACE,MAAO,CACLF,GAAI,GACJF,MAAO,GACPkD,eAAWxE,EACXqC,WAAW,I,MAKK,IAAIkC,E,2RCAnB,SAAwBhF,EAAGL,GAChCtC,WAAW6H,aAAalF,GAAKL,G,sCAWxB,SAA+BwF,GACpCC,EAAU,CACRC,aAAcF,EAAKG,aACnBC,WAAYJ,EAAKK,WACjBC,aAAcN,EAAKO,gB,2BAQhB,WACL,OAAOpH,IAAgBjB,WAAW6H,aAAaK,Y,qCAO1C,WACL,OAAOI,IAAqBtI,WAAW6H,aAAaK,Y,iBAzDtD,MAAMK,EAAiB,CAErBC,WAAY,eACZR,aAAc,GACdS,kBAAmB,GACnBP,WAAY,QACZE,aAAc,GACdM,QAASC,UACTC,SAAU,SAoBL,SAASb,EAAU1J,GACxB,IAAK,MAAMsE,KAAKjE,OAAOmK,KAAKN,GACtB5F,KAAKtE,IACP2B,WAAW6H,aAAalF,GAAKtE,EAAEsE,IAa9B,SAAS1B,IACd,OAAOjB,WAAW6H,aAAaG,aAO1B,SAASM,IACd,OAAOtI,WAAW6H,aAAaY,kBAzC5BzI,WAAW6H,eACd7H,WAAW6H,aAAe,IAG3B,WACC,IAAK,MAAMlF,KAAKjE,OAAOmK,KAAKN,GACpB5F,KAAK3C,WAAW6H,eACpB7H,WAAW6H,aAAalF,GAAK4F,EAAe5F,IAHjD,G,MA4Cc3C,WAAW6H,a,2ZCvDnB,MAAMiB,UAAoB3D,UAC/B/E,cACEgF,QACAzH,KAAK0C,SAAW,WAChB1C,KAAK2C,WAAa,UAClB3C,KAAK4C,aAAe,UACpB5C,KAAK6C,oBAAsB,WAC3B7C,KAAK8C,UAAY,eACjB9C,KAAK+C,SAAW,cAChB/C,KAAKgD,YAAc,iBACnBhD,KAAKiD,YAAc,iBACnBjD,KAAK0D,YAAY,CAAEN,MAAM,GAAQ,KAGnC,YACE,MAAO,CACLgI,UAAW,KACXC,aAAc,CACZC,UAAW,GACXC,MAAO,GACPC,QAAS,GACTC,QAAS,KACTC,MAAO,GACPC,KAAM,GACNC,YAAa,IAEfC,KAAM,WACNC,mBAAqBC,UAAqBC,WAAc,IAAI/E,GAC5DgF,gBAAkBC,UAAUF,WAAc,IAAI/E,GAC9CkF,kBAAoBD,UAAUF,WAAc,IAAIjF,MAChDqF,cAAe,KACfC,SAAU,KACVhG,OAAQ,MACRiG,cAAe,GACfC,YAAa,GACbC,MAAO,CACL,CACEC,WAAY,KACZ1F,MAAO,GACPiC,MAAO,EACPC,MAAO,IAGXyD,SAAU,EACVC,MAAO,GAIXpH,SAASuB,GACP,OAAOA,EAAIG,GAAKH,EAAIG,GAAG1B,WAAWqH,SAAS,EAAG,KAAO,GAGvDC,UAAUC,EAASC,GACbA,GACFD,EAAQ1B,UAAY2B,EAAO9F,GAC3B6F,EAAQzB,aAAaE,MAAQwB,EAAOxB,MACpCuB,EAAQzB,aAAaC,UAAYyB,EAAOzB,UACxCwB,EAAQzB,aAAaG,QAAUuB,EAAOvB,QACtCsB,EAAQzB,aAAaI,QAAUsB,EAAOtB,QACtCqB,EAAQzB,aAAaK,MAAQqB,EAAOrB,MACpCoB,EAAQzB,aAAaO,YAAcmB,EAAOnB,cAE1CkB,EAAQ1B,UAAY,KACpB0B,EAAQzB,aAAe,IAI3B2B,UAAUC,GACR,OAAIA,EAAKR,YACHQ,EAAKpE,QACAqE,UAAYlE,MAAMiE,EAAKpE,QAASoE,EAAKhE,OAMvCH,WAAWmE,EAAKjE,OAI3BmE,QAAQL,EAASjE,GACf,IAAIoE,EACmB,iBAAZpE,GACToE,EAAOH,EAAQN,MAAMY,KAAMC,GAAOA,EAAGZ,aAAe5D,EAAQ5B,IACxDgG,EACFA,EAAKhE,SAELgE,EAAO,CACLlG,MAAO8B,EAAQ9B,MACfkC,MAAO,EAEPwD,WAAY5D,EAAQ5B,GACpBqG,UAAWzE,EAAQI,MACnBJ,WAEFiE,EAAQN,MAAMe,KAAKN,MAGrBA,EAAO,CACLlG,MAAO,GACPkC,MAAO,EACPD,MAAO,EACPyD,WAAY,KACZa,UAAW,GAEbR,EAAQN,MAAMe,KAAKN,IAErBA,EAAKjE,MAAQhJ,KAAKgN,UAAUC,GAC5BH,EAAQH,MAAQ3M,KAAKgJ,MAAM8D,GAG7BU,kBAAkBV,EAASG,EAAMpE,GACR,iBAAZA,GACToE,EAAKR,WAAa,KAClBQ,EAAKpE,QAAU,KACfoE,EAAKlG,MAAQ8B,EACboE,EAAKK,UAAY,aAEjBL,EAAKR,WAAa5D,EAAQ5B,GAC1BgG,EAAKpE,QAAUA,EACfoE,EAAKlG,MAAQ8B,EAAQ9B,MACrBkG,EAAKK,UAAYzE,EAAQI,OAAS,YAEpCgE,EAAKjE,MAAQ,EACbiE,EAAKhE,MAAQ,EACbgE,EAAKjE,MAAQhJ,KAAKgN,UAAUC,GAC5BH,EAAQH,MAAQ3M,KAAKgJ,MAAM8D,GAG7BW,WAAWX,EAASG,GAClBH,EAAQN,MAAMkB,OAAOZ,EAAQN,MAAMmB,QAAQV,GAAO,GAClDH,EAAQH,MAAQ3M,KAAKgJ,MAAM8D,GAG7B9D,MAAM8D,GACJ,MAAM9D,EACJ8D,EAAQN,MAAMjD,OAAO,CAACnH,EAAGiL,IAAOrN,KAAKgN,UAAUK,GAAMjL,EAAG,GACxD0G,WAAWgE,EAAQJ,UAAY,GACjC,OAAOkB,KAAKC,MAAc,IAAR7E,GAAe,IAGnC8E,QAAQC,GACN,OAAIC,UAAc/F,UAEba,WAAWiF,EAAIpB,OAAS7D,WAAWiF,EAAIrB,UAAY,KACnD,EAAI5D,WAAWkF,UAAc/F,UAAY,KAGrCa,WAAWiF,EAAIpB,OAAS7D,WAAWiF,EAAIrB,UAAY,GAI9DuB,IAAIF,GACF,OAAIC,UAAc/F,SAEba,WAAWiF,EAAIpB,QACb,EAAI7D,WAAWkF,UAAc/F,UAAY,MAC3Ca,WAAWkF,UAAc/F,UAAY,KAGjC,EAIXiG,IAAIpB,GACF,OAAOhE,WAAWgE,EAAQH,OAAS7D,WAAWkF,UAAcG,WAAa,GAG3E,cAAczF,GACZ,OAAO1I,KAAKgH,KAAK,MAAO,UAAW0B,GAGrC,cAAcqF,EAAKK,EAAc,MAC/B,OAAIA,EACKpO,KAAKgH,KAAK,OAAW+G,EAAI9G,GAAN,WAAoB,CAC5CoH,WAAYN,EAAI9G,GAChBmH,gBAGKpO,KAAKgH,KAAK,OAAW+G,EAAI9G,GAAN,YAI9B,YAAY8G,GACV,OAAO/N,KAAKgH,KAAK,OAAW+G,EAAI9G,GAAN,UAG5B,eAAe8G,GACb,OAAO/N,KAAKgH,KAAK,MAAU+G,EAAI9G,GAAN,YAG3B,aAAaqH,EAASC,GACpB,OAAOvO,KAAKgH,KAAK,OAAQ,SAAU,CACjCwH,SAAUF,EACVC,SAAUA,EAASE,IAAK/N,GAAMA,EAAEuG,MAIpC,cAAcqH,EAASC,GACrB,OAAOvO,KAAKgH,KAAK,OAAQ,MAAO,CAC9BwH,SAAUF,EACVC,SAAUA,EAASE,IAAK/N,GAAMA,EAAEuG,MAIpC,WAAWqH,EAASC,GAClB,OAAOvO,KAAKgH,KAAK,OAAQ,OAAQ,CAC/BwH,SAAUF,EACVC,SAAUA,EAASE,IAAK/N,GAAMA,EAAEuG,MAIpC,WAAWqH,EAASC,GAClB,OAAOvO,KAAKgH,KAAK,OAAQ,OAAQ,CAC/BwH,SAAUF,EACVC,SAAUA,EAASE,IAAK/N,GAAMA,EAAEuG,MAIpC,eAAeqH,EAASC,GACtB,OAAOvO,KAAKgH,KAAK,OAAQ,WAAY,CACnCwH,SAAUF,EACVC,SAAUA,EAASE,IAAK/N,GAAMA,EAAEuG,MAIpCyH,eACE,MAAO,CAAC,SAAU,YAGpBC,gBACE,MAAO,CACL,MACA,YACA,aACA,OACA,WACA,WACA,OACA,QA0BJtI,SACE,MAAO,CACL,CACEzF,KAAM,MACNgJ,YAAa,WACbC,KAAM,sBACNC,gBAAiB,UACjB8E,KAAM,cAER,CACEhO,KAAM,YACNgJ,YAAa,WACbC,KAAM,uBACNC,gBAAiB,qBACjB8E,KAAM,gBAER,CACEhO,KAAM,aACNgJ,YAAa,WACbC,KAAM,cACNC,gBAAiB,UACjB8E,KAAM,eAER,CACEhO,KAAM,OACNgJ,YAAa,WACbC,KAAM,cACNC,gBAAiB,UACjB8E,KAAM,gBAGR,CACEhO,KAAM,WACNgJ,YAAa,UACbC,KAAM,cACNC,gBAAiB,UACjB8E,KAAM,gBAGR,CACEhO,KAAM,OACNgJ,YAAa,WACbC,KAAM,aACNC,gBAAiB,UACjB8E,KAAM,WAER,CACEhO,KAAM,OACNgJ,YAAa,QACbC,KAAM,cACNC,gBAAiB,oBACjB8E,KAAM,WAER,CACEhO,KAAM,WACNgJ,YAAa,iBACbC,KAAM,cACNC,gBAAiB,UACjBC,MAAO,QACP6E,KAAM,UACNC,MAAM,K,sBAMF,IAAI1D,E,oUChVhB,MAAM2D,UAA6BtH,UACjC/E,cACEgF,QACAzH,KAAK0C,SAAW,qBAChB1C,KAAK2C,WAAa,mBAClB3C,KAAK4C,aAAe,mBACpB5C,KAAK6C,oBAAsB,qBAC3B7C,KAAK8C,UAAY,wBACjB9C,KAAK+C,SAAW,uBAChB/C,KAAKgD,YAAc,0BACnBhD,KAAKiD,YAAc,0BACnBjD,KAAK0D,YAAY,CAAEN,MAAM,GAAQ,MAGnC+D,MACE,MAAO,CACLF,GAAI,GACJ4E,KAAM,SACNkD,MAAO,GACPnO,KAAM,GACNoO,KAAM,EACNC,SAAU,EACV1D,MAAO,GACP2D,MAAO,GACP1D,QAAS,GACT1D,WAAW,GAIf,cAAcY,GACZ,OAAO1I,KAAKgH,KAAK,MAAQ,UAAU0B,GAGrC,gBACE,aAAc1I,KAAKoD,QAAQgK,KAAMC,GAAOA,EAAG8B,YAG7CtI,MAAM/F,GAKJ,OAJKA,EAAEiO,QACLjO,EAAEiO,MAAQ,IAEZ/O,KAAKoP,YAAYtO,GACVA,EAGTsO,YAAYtO,GACV,IAAKA,EAAE+K,KACL,OAEF,MAAMkD,EAAQ/O,KAAKqP,UAAUvO,EAAE+K,MAC/B,IAAK,MAAMyD,KAAQP,OACUtJ,IAAvB3E,EAAEiO,MAAMO,EAAK1O,QACfE,EAAEiO,MAAMO,EAAK1O,MAAQ0O,EAAKC,SAKhCF,UAAUxD,GACR,MAAM2D,EAAMxP,KAAKyP,QAAQrC,KAAMC,GAAOA,EAAGqC,MAAQ7D,GACjD,OAAI2D,EACKA,EAAIT,MAEJ,GAIXU,QACE,MAAO,CACL,CACEC,IAAK,SACL9O,KAAM,SACNmJ,MAAO,mBACPgF,MAAO,CACL,CAAEnO,KAAM,SAAUiL,KAAM,OAAQ0D,QAAS,IACzC,CAAE3O,KAAM,MAAOiL,KAAM,WAAY0D,QAAS,IAC1C,CAAE3O,KAAM,SAAUiL,KAAM,OAAQ0D,QAAS,OACzC,CAAE3O,KAAM,eAAgBiL,KAAM,OAAQ0D,QAAS,QAGnD,CACEG,IAAK,UACL9O,KAAM,UACNmJ,MAAO,kBACPgF,MAAO,IAET,CACEW,IAAK,YACL9O,KAAM,iBACNmJ,MAAO,kBACPgF,MAAO,IAET,CACEW,IAAK,YACL9O,KAAM,kBACNmJ,MAAO,mBACPgF,MAAO,CACL,CAAEnO,KAAM,WAAYiL,KAAM,OAAQ0D,QAAS,IAC3C,CAAE3O,KAAM,WAAYiL,KAAM,WAAY0D,QAAS,IAC/C,CAAE3O,KAAM,UAAWiL,KAAM,OAAQ0D,QAAS,OAMlDlJ,SACE,MAAO,CACL,CACEzF,KAAM,MACNgJ,YAAa,WACbC,KAAM,uBACNC,gBAAiB,mBACjBC,MAAO,SAET,CACEnJ,KAAM,UACNgJ,YAAa,oBACbC,KAAM,sBACNC,gBAAiB,qBACjBC,MAAO,SAET,CACEnJ,KAAM,uBACNgJ,YAAa,WACbC,KAAM,aACNC,gBAAiB,qBAEnB,CACElJ,KAAM,mBACNgJ,YAAa,WACbC,KAAM,cACNC,gBAAiB,WAEnB,CACElJ,KAAM,6BACNgJ,YAAa,QACbC,KAAM,gBACNC,gBAAiB,sBAEnB,CACElJ,KAAM,WACNgJ,YAAa,SACbC,KAAM,cACNC,gBAAiB,oBAEnB,CACElJ,KAAM,YACNgJ,YAAa,UACbC,KAAM,cACNC,gBAAiB,qBAEnB,CACElJ,KAAM,mBACNgJ,YAAa,qBACbC,KAAM,cACNC,gBAAiB,SAEnB,CACElJ,KAAM,OACNgJ,YAAa,OACbC,KAAM,cACNC,gBAAiB,uB,MAMb,IAAIgF,E,oUCtKhB,MAAMa,UAAkBnI,UACtB/E,cACEgF,QACAzH,KAAK0C,SAAW,SAChB1C,KAAK2C,WAAa,QAClB3C,KAAK4C,aAAe,QACpB5C,KAAK6C,oBAAsB,SAC3B7C,KAAK8C,UAAY,aACjB9C,KAAK+C,SAAW,YAChB/C,KAAKgD,YAAc,eACnBhD,KAAKiD,YAAc,eACnBjD,KAAK0D,YAAY,CAAEN,MAAM,GAAQ,MAGnC+D,MACE,MAAO,CACLF,GAAI,GACJF,MAAO,GACPkD,eAAWxE,EACX8F,MAAO,GACP2D,MAAO,GACP1D,QAAS,GACTG,KAAM,GACNF,QAAS,KACTC,MAAO,OACPkE,aAAc,GACdC,WAAY,GACZjE,YAAa,IACb9D,WAAW,GAIf,gBACE,aAAc9H,KAAKoD,QAAQgK,KAAMC,GAAOA,EAAG8B,a,MAI7B,IAAIQ,E,m0CCvCtB/P,EAAOD,QAAUM,G,6BCEjB,IAAI6P,EAAM/O,OAAOkB,UAAUC,eAU3B,SAAS6N,EAAOC,GACd,IACE,OAAOC,mBAAmBD,EAAME,QAAQ,MAAO,MAC/C,MAAOxJ,GACP,OAAO,MAWX,SAASyJ,EAAOH,GACd,IACE,OAAOI,mBAAmBJ,GAC1B,MAAOtJ,GACP,OAAO,MAqFX/G,EAAQ6E,UA1CR,SAAwBsC,EAAKuJ,GAC3BA,EAASA,GAAU,GAEnB,IACI/O,EACAM,EAFA0O,EAAQ,GASZ,IAAK1O,IAFD,iBAAoByO,IAAQA,EAAS,KAE7BvJ,EACV,GAAIgJ,EAAItP,KAAKsG,EAAKlF,GAAM,CAkBtB,IAjBAN,EAAQwF,EAAIlF,KAMGN,UAAqCiP,MAAMjP,KACxDA,EAAQ,IAGVM,EAAMuO,EAAOvO,GACbN,EAAQ6O,EAAO7O,GAMH,OAARM,GAA0B,OAAVN,EAAgB,SACpCgP,EAAM/C,KAAK3L,EAAK,IAAKN,GAIzB,OAAOgP,EAAME,OAASH,EAASC,EAAMG,KAAK,KAAO,IAOnD9Q,EAAQ+Q,MA3ER,SAAqBhI,GAKnB,IAJA,IAEIiI,EAFAC,EAAS,uBACTC,EAAS,GAGNF,EAAOC,EAAOE,KAAKpI,IAAQ,CAChC,IAAI9G,EAAMmO,EAAOY,EAAK,IAClBrP,EAAQyO,EAAOY,EAAK,IAUZ,OAAR/O,GAA0B,OAAVN,GAAkBM,KAAOiP,IAC7CA,EAAOjP,GAAON,GAGhB,OAAOuP,I,m4DC7DF,MAAME,UAAmBvJ,UAC9B/E,cACEgF,QACAzH,KAAK0C,SAAW,UAChB1C,KAAK2C,WAAa,SAClB3C,KAAK4C,aAAe,SACpB5C,KAAK6C,oBAAsB,UAC3B7C,KAAK8C,UAAY,cACjB9C,KAAK+C,SAAW,aAChB/C,KAAKgD,YAAc,gBACnBhD,KAAKiD,YAAc,gBACnBjD,KAAK0D,YAAY,CAAEN,MAAM,GAAQ,KAGnC+D,MACE,MAAO,CACLmE,UAAW,GACX0F,WAAY,GACZC,UAAW,GACXlC,MAAO,CACLlD,KAAM,SACNqF,aAAc,IAEhB3F,MAAO,GACPC,QAAS,GACTC,QAAS,KACTC,MAAO,OACPE,YAAa,GACbsD,MAAO,GACPU,aAAc,GACdC,WAAY,IAIhBhJ,MAAM/F,GAcJ,OAbKA,EAAEiO,QACLjO,EAAEiO,MAAQ,IAEZhO,OAAOoQ,iBAAiBrQ,EAAG,CACzB+K,KAAM,CACJ3K,MACE,OAAOlB,KAAK+O,MAAMlD,MAEpBuF,IAAIC,GACFrR,KAAK+O,MAAMlD,KAAOwF,MAIjBvQ,EAGTyE,SAASuB,GACP,MAAQ,GAAEA,EAAIkK,YAAc,MAAMlK,EAAImK,WAAa,KAGrD,cAAchK,GACZ,OAAOjH,KAAKgH,KAAK,MAAOC,EAAK,YAG/B,cAAcA,GACZ,OAAOjH,KAAKgH,KAAK,MAAOC,EAAK,YAE/BqK,YACE,MAAO,CAAC,OAAQ,UAGlBC,SACE,MAAO,CACL,SACA,OACA,YACA,UACA,QACA,QACA,WACA,WACA,YACA,SACA,MACA,SACA,WACA,WACA,WACA,SACA,OACA,cACA,UACA,SACA,YACA,SACA,QACA,a,qBAKM,IAAIR,E,kWC/FhB,MAAMS,UAAuBhK,UAC3B/E,cACEgF,QACAzH,KAAK0C,SAAW,cAChB1C,KAAK2C,WAAa,aAClB3C,KAAK4C,aAAe,aACpB5C,KAAK6C,oBAAsB,cAC3B7C,KAAK8C,UAAY,kBACjB9C,KAAK+C,SAAW,iBAChB/C,KAAKgD,YAAc,oBACnBhD,KAAKiD,YAAc,oBACnBjD,KAAKkD,aAAe,MACpBlD,KAAK0D,YAAY,CAAEN,MAAM,GAAQ,MAGnC+D,MACE,MAAO,CACLQ,IAAK,GACLZ,MAAO,GACP0K,YAAa,GACb3F,YAAa,KACbO,SAAU,KACVG,MAAO,CACL,CACEC,WAAY,KACZ7L,KAAM,GACNoI,MAAO,EACPC,MAAO,IAGXyD,SAAU,EACV1E,UAAW,EACXiC,UAAW,GACXnC,WAAW,GAIfkF,UAAUC,GACR,OAAIA,EAAKR,YACHQ,EAAKpE,QACAqE,UAAYlE,MAAMiE,EAAKpE,QAASoE,EAAKhE,OAMvCH,WAAWmE,EAAKjE,OAI3BmE,QAAQuE,EAAY7I,GAClB,IAAIoE,EACmB,iBAAZpE,GACToE,EAAOyE,EAAWlF,MAAMY,KAAMC,GAAOA,EAAGZ,aAAe5D,EAAQ5B,IAC3DgG,EACFA,EAAKhE,SAELgE,EAAO,CACLlG,MAAO8B,EAAQ9B,MACfkC,MAAO,EAEPwD,WAAY5D,EAAQ5B,GACpBqG,UAAWzE,EAAQI,MACnBJ,WAEF6I,EAAWlF,MAAMe,KAAKN,MAGxBA,EAAO,CACLlG,MAAO,GACPkC,MAAO,EACPD,MAAO,EACPyD,WAAY,KACZa,UAAW,GAEboE,EAAWlF,MAAMe,KAAKN,IAExBA,EAAKjE,MAAQhJ,KAAKgN,UAAUC,GAC5ByE,EAAW1J,UAAYhI,KAAKgJ,MAAM0I,GAGpClE,kBAAkBkE,EAAYzE,EAAMpE,GACX,iBAAZA,GACToE,EAAKR,WAAa,KAClBQ,EAAKpE,QAAU,KACfoE,EAAKlG,MAAQ8B,EACboE,EAAKK,UAAY,aAEjBL,EAAKR,WAAa5D,EAAQ5B,GAC1BgG,EAAKpE,QAAUA,EACfoE,EAAKlG,MAAQ8B,EAAQ9B,MACrBkG,EAAKK,UAAYzE,EAAQI,OAAS,YAEpCgE,EAAKjE,MAAQ,EACbiE,EAAKhE,MAAQ,EACbgE,EAAKjE,MAAQhJ,KAAKgN,UAAUC,GAC5ByE,EAAW1J,UAAYhI,KAAKgJ,MAAM0I,GAGpCjE,WAAWiE,EAAYzE,GACrByE,EAAWlF,MAAMkB,OAAOgE,EAAWlF,MAAMmB,QAAQV,GAAO,GACxDyE,EAAW1J,UAAYhI,KAAKgJ,MAAM0I,GAGpC1I,MAAM0I,GACJ,MAAM1I,EACJ0I,EAAWlF,MAAMjD,OAAO,CAACnH,EAAGiL,IAAOrN,KAAKgN,UAAUK,GAAMjL,EAAG,GAC3D0G,WAAW4I,EAAWhF,UAAY,GACpC,OAAOkB,KAAKC,MAAc,IAAR7E,GAAe,K,MAId,IAAIwI,E,+/BC9GpB,MAAMG,EACXlP,YAAYqC,GACNA,GACF9E,KAAK4R,MAAM9M,GAIf,cAAc+M,EAAYC,GACxB,MAAMhN,QAAaiN,UAAgBC,SAASH,EAAYC,GACpDhN,GACF9E,KAAK4R,MAAM9M,GAIf,sCACQ9E,KAAKiS,QAAQ,gBAGrB,wBAAwBH,SAChB9R,KAAKiS,QAAQ,SAAUH,GAG/B,iCACQ9R,KAAKiS,QAAQ,WAGrBL,MAAM9M,GACJA,EAAOiN,UAAgBlL,MAAM/B,GAC7B9E,KAAK8E,KAAOA,EACZ9E,KAAKkS,QAAUpN,EAAKqN,SACpBnS,KAAKoS,QAAUtN,EAAKuN,SACpBrS,KAAKsS,IAAItS,MAGXuS,SAASC,GACP,OAAIA,EACKA,EAAKtC,QAAQ,WAAY,IAEzB,GAIXoC,IAAIG,GAuEF,OAtEKA,IACHA,EAAO,IAETA,EAAKC,gBAAkB1S,KAAK8E,KAAK4N,eAAgBC,GAAYC,cAC7DH,EAAKlS,SAAWP,KAAK8E,KAAKvE,SAAWoS,GAAYE,SAAW,IAAIC,MAAM,KACtEL,EAAKM,gBACH/S,KAAK8E,KAAKiO,gBACVJ,GAAYK,gBACZ,IACAF,MAAM,KACRL,EAAKQ,mBACHjT,KAAK8E,KAAKmO,mBACVN,GAAYO,mBACZ,IACAJ,MAAM,KACRL,EAAKhB,YAAczR,KAAK8E,KAAK2M,aAAe,GAC5CgB,EAAKU,gBACHnT,KAAK8E,KAAKqO,iBAAmBnT,KAAKuS,SAASvS,KAAK8E,KAAK2M,cAAgB,GACvEgB,EAAKW,aAAepT,KAAK8E,KAAKsO,cAAgBpT,KAAK8E,KAAKlE,KACxD6R,EAAKY,WAAarT,KAAK8E,KAAKlE,KAC5B6R,EAAKa,MAAQtT,KAAKuT,OAAOvT,KAAK8E,KAAKwO,OACnCb,EAAKe,QAAUxT,KAAKuT,OAAOvT,KAAK8E,KAAK0O,SACrCf,EAAKgB,QAAUzT,KAAKuT,OAAOvT,KAAK8E,KAAK2O,SACrChB,EAAKiB,KAAO1T,KAAKuT,OAAOvT,KAAK8E,KAAK0O,SAClCf,EAAKkB,iBAAmB3T,KAAKuT,OAAOvT,KAAK8E,KAAK6O,kBAC9ClB,EAAKvD,MAAQlP,KAAK8E,KAAKoK,MACvBuD,EAAKmB,SAAW5T,KAAK8E,KAAK8O,SAC1BnB,EAAKlH,MAAQvL,KAAK8E,KAAKyG,MACvBkH,EAAKoB,KAAO7T,KAAK8E,KAAK+O,KACtBpB,EAAK/H,aAAe1K,KAAK8E,KAAK+O,KAC9BpB,EAAKqB,QAAU9T,KAAK8E,KAAKgP,QACzBrB,EAAKsB,SAAW/T,KAAK8E,KAAKgP,QAC1BrB,EAAKuB,YAAchU,KAAK8E,KAAKgP,QAC7BrB,EAAKvB,aAAelR,KAAK8E,KAAKoM,aAC9BuB,EAAKwB,OAASjU,KAAK8E,KAAKoM,aACxBuB,EAAKyB,YAAclU,KAAK8E,KAAKoP,YAC7BzB,EAAK0B,YAAcnU,KAAK8E,KAAKqP,YAC7B1B,EAAK2B,cAAgBpU,KAAK8E,KAAKsP,cAC/B3B,EAAK4B,aAAerU,KAAK8E,KAAKuP,aAC9B5B,EAAK6B,aAAetU,KAAK8E,KAAKwP,aAC9B7B,EAAK8B,OAASvU,KAAK8E,KAAKyP,OACxB9B,EAAK+B,kBAAoBxU,KAAK8E,KAAK0P,kBACnC/B,EAAK1D,MAAQ/O,KAAK8E,KAAKiK,MACvB0D,EAAKgC,aAAezU,KAAK8E,KAAK2P,aAC9BhC,EAAKiC,YAAc1U,KAAK8E,KAAK4P,YAC7BjC,EAAKkC,iBAAmB3U,KAAK8E,KAAK6P,iBAClClC,EAAKxK,SAAWjI,KAAK8E,KAAKmD,SAC1BwK,EAAKtE,UAAYnO,KAAK8E,KAAKqJ,UAC3BsE,EAAKjI,WAAamI,GAAYpI,YAAc,QAC5CkI,EAAKmC,iBACH5U,KAAK8E,KAAK8P,kBAAoBjC,GAAYkC,iBAC5CpC,EAAKqC,kBACH9U,KAAK8E,KAAKgQ,mBAAqBnC,GAAYoC,kBAC7CtC,EAAKnI,aAAetK,KAAK8E,KAAKuN,SAAS2C,IACnChV,KAAK8E,KAAKuN,SAAS4C,OACrBxC,EAAKlP,SAAWvD,KAAK8E,KAAKuN,SAAS4C,OAEnCxC,EAAKlP,SAAWoP,GAAYuC,SAG9BzC,EAAK0C,cAAgBnV,KAAK8E,KAAKqQ,eAAiBxC,GAAYyC,cAC5D3C,EAAK4C,YAAcrV,KAAK8E,KAAKuQ,aAAe1C,GAAY2C,YACxD7C,EAAK8C,WAAavV,KAAK8E,KAAKyQ,YAAc5C,GAAY6C,WACtD/C,EAAKgD,UAAYzV,KAAK8E,KAAK2Q,UAC3BhD,EAAKiD,oBACH1V,KAAK8E,KAAK4Q,qBAAuB/C,GAAYgD,oBAC/ClD,EAAKmD,eAAiB5V,KAAK8E,KAAK8Q,gBAAkBjD,GAAYkD,eAC9DpD,EAAKqD,SAAWnD,GAAYoD,SAAW,eAAejD,MAAM,KAC5DL,EAAKuD,eAAiBhW,KAAK8E,KAAKkR,eAChCvD,EAAKwD,2BAA6B,UAC3BxD,EAGTyD,IAAIzD,GAIF,SAASnR,EAAM+P,GACb,OAAOA,QAAoC,GAAKA,EAJ7CoB,IACHA,EAAO,IAKT,MAAM0D,EAAOnW,KAAKsS,MAClB,IAAK,MAAM8D,KAASrV,OAAOmK,KAAKiL,GAAO,CACrC,MAAM9E,EAAM/P,EAAM6U,EAAKC,IACvB,GAAIhR,MAAMC,QAAQgM,GAChBoB,EAAK2D,EAAMC,eAAiBhF,EAAIZ,KAAK,UAChC,GAAIY,GAAsB,iBAARA,EACvB,IAAK,MAAMrM,KAAKjE,OAAOmK,KAAKmG,GAAM,CAChC,MAAM1M,EAAIrD,EAAM+P,EAAIrM,IACpByN,EAAM,GAAE2D,KAASpR,IAAIqR,eAAiB1R,OAGxC8N,EAAK2D,EAAMC,eAAiBhF,EAGhC,OAAOoB,EAGTc,OAAO9P,GACL,OAAIA,GAAQA,EAAK6S,WAAW,KAAc,GAAEtW,KAAK8E,KAAKuN,SAASkE,MAAM9S,IACzDA,EAEd+S,UAAUC,GACR,OAAOzW,KAAKO,QAAQ6F,SAASqQ,GAE/BC,mBAAmBD,GACjB,OAAOzW,KAAKiT,kBAAkB7M,SAASqQ,I,iBAItCpU,WAAWsU,qBACdtU,WAAWsU,mBAAqB,IAAIhF,G,MAEhBtP,WAAWsU,mB,k3BCvJ1B,MAAMC,UAAwBpP,UACnC/E,cACEgF,QACAzH,KAAK0C,SAAW,OAIlB,kBACE,OAAOL,WAAW6H,aAAaG,cAC3B,IAAA/G,gBACA,IAAAqH,oBAGN,eACE,OAAOtI,WAAW6H,aAAaG,cAAe,IAAA9G,aAAa,IAAAsT,iBAG7DhQ,MAAM9E,GACCA,EAAOgN,QACVhN,EAAOgN,MAAQ,IAEZhN,EAAO0S,eACV1S,EAAO0S,aAAe,IAEnB1S,EAAO2S,cACV3S,EAAO2S,YAAc,IAElB3S,EAAOyS,oBACVzS,EAAOyS,kBAAoB,WAEtBzS,EAAO+U,kBACP/U,EAAOgV,oBACPhV,EAAOiV,sBAEd,MAAM9E,EAAU,GACVE,EAAU,GAChB,IAAK,MAAMN,KAAU/P,EAAOmQ,QAC1BA,EAAQJ,EAAOjG,MAAQiG,EAAOA,OAC9BM,EAAQN,EAAOjG,MAAQiG,EAAOmF,OAE3B/E,EAAQ8C,MACX9C,EAAQ8C,IAAM9C,EAAQgF,MACtB9E,EAAQ4C,IAAM5C,EAAQ8E,OAEnBhF,EAAQgF,QACXhF,EAAQgF,MAAQhF,EAAQ8C,IACxB5C,EAAQ8E,MAAQ9E,EAAQ4C,KAErB9C,EAAQqE,MACXrE,EAAQqE,IAAMrE,EAAQ8C,IACtB5C,EAAQmE,IAAMnE,EAAQ4C,KAGxBjT,EAAOoQ,SAAWD,EAClBnQ,EAAOsQ,SAAWD,EAElB,MAAM+E,EAAY,IAAIC,IAAIrV,EAAOsQ,SAAS2C,KAI1C,OAHAjT,EAAOsV,eAAiBF,EAAUG,UAAY,UAAY,KAC1DvV,EAAOwV,UAAYJ,EAAUK,KAAQ,IAAGL,EAAUK,KAAS,GAEpDzV,EAGT,eAAe8P,EAAYC,GACzB,IAAIhN,EAWJ,OAVK+M,IACHA,EAAa4F,UAAO5M,YAEH,iBAAfgH,EACF/M,QAAa9E,KAAKoD,OACM,YAAfyO,EACT/M,QAAa9E,KAAKgH,KAAK,MAAO,YACN,WAAf6K,IACT/M,QAAa9E,KAAKgH,KAAK,MAAO8K,IAEzB9R,KAAK6G,MAAM/B,GAGpB,yBAAyBgN,GACvB,aAAa9R,KAAKgS,SAAS,SAAUF,GAGvC,4BACE,aAAa9R,KAAKgS,SAAS,Y,0BAInB,IAAI4E,E,sSC9FT,MAAMc,UAAkBvM,cAC7B1I,cACEgF,QAEAzH,KAAK2C,WAAa,QAClB3C,KAAK4C,aAAe,QACpB5C,KAAK6C,oBAAsB,SAC3B7C,KAAK8C,UAAY,aACjB9C,KAAK+C,SAAW,YAChB/C,KAAKgD,YAAc,eACnBhD,KAAKiD,YAAc,eAGrB,oBAAoB0U,EAAUC,EAAUC,GACtC,aAAa7X,KAAKgH,KAAK,OAAW2Q,EAAF,WAAsB,CACpDG,QAASF,KACNC,K,oBAKG,IAAIH,E,2RCrBhB,MAAMK,UAAkBC,WACtBvV,cACEgF,QACAzH,KAAK0C,SAAW,SAChB1C,KAAK2C,WAAa,QAClB3C,KAAK4C,aAAe,QACpB5C,KAAK6C,oBAAsB,SAC3B7C,KAAK8C,UAAY,aACjB9C,KAAK+C,SAAW,YAChB/C,KAAKgD,YAAc,eACnBhD,KAAKiD,YAAc,eAEnBjD,KAAK0D,YAAY,CAAEN,MAAM,GAAQ,MAGnC+D,MACE,MAAO,CACL6J,WAAY,GACZC,UAAW,GACX3F,UAAW,GAEX2M,MAAO,CAAC,cACR1M,MAAO,GACP2D,MAAO,GACPH,MAAO,CACLmJ,kBAAkB,EAClBC,SAAU,QACVC,OAAQ,SAEVtQ,WAAW,EACXuQ,UAAU,GAIdxR,MAAM/F,GACJ,OAAKA,GAAgB,mBAAXA,EAAEwX,MACPxX,EAAEiO,QACLjO,EAAEiO,MAAQ,IAEZhO,OAAOoQ,iBAAiBrQ,EAAG,CACzByX,KAAM,CACJrX,MACE,OAAOlB,KAAKiY,MAAM,KAGtBO,SAAU,CACRtX,MACE,OAAOlB,KAAKiY,MAAM7R,SAAS,WAG/BqS,aAAc,CACZvX,MACE,OAAOlB,KAAKiY,MAAM7R,SAAS,eAG/B+R,SAAU,CACR7W,MAAO,QACPoX,UAAU,GAEZN,OAAQ,CACN9W,MAAO,QACPoX,UAAU,GAEZR,iBAAkB,CAChBhX,MACE,OAAOlB,KAAK+O,MAAMmJ,kBAEpB9G,IAAIC,GACFrR,KAAK+O,MAAMmJ,iBAAmB7G,MAI7BvQ,GArCuC,KAwChDyE,SAASuB,GACP,MAAQ,GAAEA,EAAIkK,YAAc,MAAMlK,EAAImK,WAAa,KAGrD,kBACE,OAAOjR,KAAKgH,KAAK,MAAO,aAG1BiR,QACE,MAAO,CACL,QACA,UACA,UACA,QACA,aACA,WACKtF,GAAYE,QAAQzM,SAAS,QAAU,CAAC,QAAW,K,MAK5C,IAAI2R,E,+UChGf,MAAMC,UAAiBxQ,UAC5B/E,cACEgF,QACAzH,KAAK0C,SAAW,QAChB1C,KAAK2C,WAAa,OAClB3C,KAAK4C,aAAe,OACpB5C,KAAK6C,oBAAsB,QAC3B7C,KAAK8C,UAAY,YACjB9C,KAAK+C,SAAW,WAChB/C,KAAKgD,YAAc,cACnBhD,KAAKiD,YAAc,cACnBjD,KAAK0D,YAAY,CAAEN,MAAM,GAAQ,MAGnC,WACE,MAAM0D,QAAY9G,KAAKgH,KAAK,MAAO,KAAM,MAAM,GAC/C,OAAOhH,KAAK6G,MAAMC,GAGpB,eAAeG,EAAI0R,GACjB,aAAa3Y,KAAKgH,KAAK,OAAWC,EAAF,YAAiB,CAAE0R,UAAS,GAG9D,mBAAmBzJ,GACjB,aAAalP,KAAKgH,KAAK,OAAQ,QAAS,CAAEkI,UAAS,GAGrD3J,SAASuB,GACP,MAAQ,GAAEA,EAAIkK,YAAc,MAAMlK,EAAImK,WAAa,M,mBAI3C,IAAI+G,E,oUChChB,MAAMY,UAAiBpR,UACrB/E,cACEgF,QACAzH,KAAK0C,SAAW,QAChB1C,KAAK2C,WAAa,QAClB3C,KAAK4C,aAAe,QACpB5C,KAAK6C,oBAAsB,QAC3B7C,KAAK8C,UAAY,aACjB9C,KAAK+C,SAAW,YAChB/C,KAAKgD,YAAc,eACnBhD,KAAKiD,YAAc,eACnBjD,KAAK0D,YAAY,CAAEN,MAAM,GAAQ,KAGnC,aAAayV,EAAaxM,GACxB,OAAOrM,KAAKgH,KAAK,MAAO,SAAU,CAChC6R,cACAxM,aAIJ,cAAciC,EAASC,GACrB,OAAOvO,KAAKgH,KAAK,OAAQ,UAAW,CAClCwH,SAAUF,EACVC,SAAUA,EAASE,IAAK/N,GAAMA,EAAEuG,MAIpC1B,SAASuB,GACP,OAAOA,EAAIG,GAAKH,EAAIG,GAAG1B,WAAWqH,SAAS,EAAG,KAAO,I,MAIxC,IAAIgM,E","file":"tik-sdk.crm.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@sentry/browser\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@sentry/browser\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"crm\"] = factory(require(\"@sentry/browser\"));\n\telse\n\t\troot[\"tikSDK\"] = root[\"tikSDK\"] || {}, root[\"tikSDK\"][\"crm\"] = factory(root[\"Sentry\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__8__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","import * as Sentry from '@sentry/browser'\nimport qs from 'querystringify'\nimport { base_url, base_domain } from '../config.js'\n\nif (!globalThis.tikSdkSession) {\n  globalThis.tikSdkSession = {\n    authToken: null,\n    instructorAuthToken: null,\n  }\n}\n\nclass BaseApi {\n  constructor() {\n    this.resource = null\n    this.model_name = ''\n    this.verbose_name = ''\n    this.verbose_name_plural = ''\n    this.view_perm = ''\n    this.add_perm = ''\n    this.change_perm = ''\n    this.delete_perm = ''\n    this.lookup_field = 'id'\n\n    this.useCache = {\n      list: false,\n      get: false,\n    }\n    this.validateCache = true\n  }\n\n  get base_domain() {\n    return base_domain()\n  }\n\n  get base_url() {\n    return base_url()\n  }\n\n  get session() {\n    return globalThis.tikSdkSession\n  }\n\n  get_url(path) {\n    if (path) {\n      path = `${this.resource}/${path}`\n    } else {\n      path = `${this.resource}`\n    }\n    return `${this.base_url}${path}/`\n  }\n\n  configCache(cache, timeout) {\n    this.useCache = cache\n    if (this._cacheTimeout) {\n      clearInterval(this._cacheTimeout)\n    }\n    if (timeout) {\n      this.cacheTimeout = timeout\n      this._cacheTimeout = setInterval(() => {\n        this.validateCache = true\n      }, this.cacheTimeout)\n    }\n  }\n\n  async http(method, path, json, allow404 = false) {\n    let headers = {}\n    let url = this.get_url(path)\n    let req\n    if (json && method === 'GET') {\n      url += qs.stringify(json, true)\n      json = null\n    } else if (json) {\n      if (\n        Object.values(json).some((v) => v instanceof File || v instanceof Blob)\n      ) {\n        const data = new FormData()\n        // eslint-disable-next-line prefer-const\n        for (let [k, v] of Object.entries(json)) {\n          if (v === null || v === undefined) {\n            v = ''\n          } else if (v instanceof Date) {\n            v = v.toISOString()\n          } else if (Array.isArray(v)) {\n            v = JSON.stringify(v)\n          } else if (v instanceof File || v instanceof Blob) {\n            // pass : v = v\n            // DO NOT DELETE, next conditions depend on it\n          } else if (v instanceof Object) {\n            v = JSON.stringify(v)\n          } else if (typeof v === 'boolean') {\n            v = v ? 'True' : 'False'\n          } else {\n            v = v.toString()\n          }\n          data.append(k, v)\n        }\n        json = data\n      } else {\n        json = JSON.stringify(json)\n        headers = {\n          'Content-Type': 'application/json; charset=utf-8',\n        }\n      }\n    } else {\n      json = undefined\n    }\n    if (globalThis.extendedTracing) {\n      console.log('HTTP', method, url, json || '')\n    } else {\n      console.log(method, path, json || '')\n    }\n    try {\n      if (this.session.authToken) {\n        headers.Authorization = 'Bearer ' + this.session.authToken\n      }\n      req = await globalThis.fetch(url, {\n        method,\n        headers,\n        body: json,\n        mode: 'cors',\n        // credentials: 'include',\n        cache: 'no-cache',\n        redirect: 'follow',\n        referrer: 'no-referrer',\n      })\n      if (!req.ok && !(allow404 && [404, 401].includes(req.status))) {\n        const error = new Error(req.statusText || req.status)\n        error.response = req\n        throw error\n      }\n      if (method !== 'DELETE') {\n        return await req.json()\n      }\n    } catch (e) {\n      console.error(\n        'HTTP Error:',\n        url.toString(),\n        JSON.stringify(json),\n        req && req.status\n      )\n      if (typeof Sentry === 'object' && 'captureException' in Sentry) {\n        Sentry.captureException(e)\n      }\n      throw e\n    }\n  }\n\n  toObj(o) {\n    return o\n  }\n\n  toString(obj) {\n    if (obj.title) {\n      return obj.title\n    } else if (obj.name) {\n      return obj.name\n    } else {\n      return ''\n    }\n  }\n\n  async list() {\n    if (this.useCache.list && !this.validateCache && this.data) {\n      console.log(`[HTTP] ${this.resource}.list(): using cache`)\n    } else {\n      const d = await this.http('GET', '')\n      this.data = d\n      this.validateCache = false\n    }\n    return this.data\n  }\n\n  async get(id, allow404 = false) {\n    if (id) {\n      const el = await this.http(\n        'GET',\n        id,\n        /* json= */ null,\n        /* allow404= */ allow404\n      )\n      return this.toObj(el)\n    } else {\n      return this.new()\n    }\n    /*\n    // const el = this.data.filter((el) => el[this.lookup_field] === id);\n    if (el.length === 1) {\n      return el[0];\n    } else {\n      console.log(\"GET NEW\");\n      return this.new();\n    }\n    */\n  }\n\n  async save(\n    el,\n    id,\n    forceCreate = false,\n    partial_update = false,\n    allow404 = false\n  ) {\n    this.validateCache = true\n    if ((el[this.lookup_field] || id) && !forceCreate) {\n      const instance = await this.http(\n        partial_update ? 'PATCH' : 'PUT',\n        id || el[this.lookup_field],\n        el,\n        allow404\n      )\n      return this.toObj(instance)\n      /*\n      const instance = this.get(el[this.lookup_field]);\n      if (instance) {\n        const old = Object.assign({}, instance);\n        Object.assign(instance, el);\n        if (this.preUpdate) {\n          await this.preUpdate(old, instance);\n        }\n        if (this.postUpdate) {\n          await this.postUpdate(old, instance);\n        }\n      }\n      */\n    } else {\n      const instance = await this.http('POST', '', el, allow404)\n      return instance\n      /*\n      const nextId = Math.max(...this.data.map((c) => c[this.lookup_field])) + 1;\n      el[this.lookup_field] = nextId;\n      if (this.preCreate) {\n        await this.preCreate(el);\n      }\n      this.data.push(el);\n      if (this.postCreate) {\n        await this.postCreate(el);\n      }\n      */\n    }\n  }\n\n  new() {\n    return null\n  }\n\n  async delete(id) {\n    this.validateCache = true\n    return this.http('DELETE', id)\n  }\n}\n\nexport default BaseApi\n","import BaseApi from '../core/base.js'\nimport categoriesApi from './categories.js'\n\nclass ProductsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'products'\n    this.model_name = 'product'\n    this.verbose_name = 'Product'\n    this.verbose_name_plural = 'Products'\n    this.view_perm = 'product:view'\n    this.add_perm = 'product:add'\n    this.change_perm = 'product:change'\n    this.delete_perm = 'product:delete'\n    this.lookup_field = 'sku'\n    this.configCache({ list: true }, 15 * 1000)\n  }\n\n  new() {\n    return {\n      title: '',\n      stock_count: 0,\n      sku: '',\n      // status: \"In Stock\",\n      category_id: null,\n      category_title: '',\n      is_active: true,\n      saleoffers: [],\n      price_net: 0,\n      tax_rate: 19,\n      cost_price: 0,\n      has_variants: false,\n      is_shipping_required: true,\n      is_digital: false,\n      charge_taxes: true,\n      charge_shipping: false,\n      // weight:,\n    }\n  }\n\n  async addStock(p, stockAdjustment) {\n    if (typeof stockAdjustment === 'number') {\n      stockAdjustment = { delta: stockAdjustment }\n    }\n    return this.http('POST', `${p.sku}/stock`, stockAdjustment)\n  }\n\n  async rapport(query) {\n    return this.http('GET', `rapport`, query)\n  }\n\n  async categories() {\n    return categoriesApi.list()\n  }\n\n  defaultPrice(product) {\n    return parseFloat(product.price_net) * (1 + product.tax_rate / 100)\n  }\n\n  offerPrice(price, count, offer) {\n    price = parseFloat(price)\n    if (offer.discount_type === '%' && offer.discount_percentage) {\n      price = parseFloat(price) * (1 - offer.discount_percentage / 100)\n    } else if (offer.discount_type === 'n' && offer.discount_amount) {\n      price = parseFloat(price) - parseFloat(offer.discount_amount)\n    }\n    return price * count\n  }\n\n  offer(product, count) {\n    let offer = { count_min: 0, discount_percentage: 0 }\n    if (product.saleoffers) {\n      offer = product.saleoffers.reduce(\n        (cp, p) =>\n          p.count_min <= count && p.count_min >= cp.count_min ? p : cp,\n        offer\n      )\n    }\n    return offer\n  }\n\n  price(product, count) {\n    const price = this.defaultPrice(product)\n    const offer = this.offer(product, count)\n    return this.offerPrice(price, count, offer)\n  }\n\n  stockColor(product) {\n    if (product.stock_count < product.stock_alert_limit) {\n      return '#dd4b39'\n    } else if (product.stock_count < product.stock_warning_limit) {\n      return '#f39c12'\n    } else {\n      return '#00a65a'\n    }\n  }\n\n  status() {\n    return [\n      {\n        name: 'stock',\n        displayName: 'Stock',\n        icon: 'fa fa-cubes',\n        backgroundColor: 'rgb(137, 255, 88)',\n      },\n      {\n        name: 'new',\n        displayName: 'Nouveaux',\n        icon: 'fa fa-shopping-cart',\n        backgroundColor: '#f6e06c',\n      },\n      {\n        name: 'scheduled',\n        displayName: 'Réservés',\n        icon: 'fa fa-hourglass-half',\n        backgroundColor: 'rgb(255, 255, 210)',\n        color: 'white',\n      },\n      {\n        name: 'inprogress',\n        displayName: 'En Cours',\n        icon: 'fa fa-truck',\n        backgroundColor: '#337ab7',\n      },\n      {\n        name: 'done',\n        displayName: 'Délivrés',\n        icon: 'fa fa-check',\n        backgroundColor: '#89ff58',\n      },\n\n      {\n        name: 'canceled',\n        displayName: 'Annulés',\n        icon: 'fa fa-times',\n        backgroundColor: '#ff7b7b',\n      },\n\n      {\n        name: 'paid',\n        displayName: 'Payés',\n        icon: 'fa fa-money',\n        backgroundColor: 'rgb(32, 216, 223)',\n      },\n      {\n        name: 'returned',\n        displayName: 'Retourne Dépot',\n        icon: 'fa fa-cubes',\n        backgroundColor: '#000000',\n        color: 'white',\n      },\n      {\n        name: 'released',\n        displayName: 'Libérés',\n        icon: 'fa fa-truck',\n        backgroundColor: '#131654',\n      },\n    ]\n  }\n}\n\nconst productsApi = new ProductsApi()\nexport default productsApi\n","import BaseApi from '../core/base.js'\n\nclass CategoriesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'categories'\n    this.model_name = 'category'\n    this.verbose_name = 'Category'\n    this.verbose_name_plural = 'Categories'\n    this.view_perm = 'category:view'\n    this.add_perm = 'category:add'\n    this.change_perm = 'category:change'\n    this.delete_perm = 'category:delete'\n    this.configCache({ list: true }, 60 * 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      title: '',\n      thumbnail: undefined,\n      is_active: true,\n    }\n  }\n}\n\nconst categoriesApi = new CategoriesApi()\n\nexport default categoriesApi\n","import { version } from '../package.json'\n\nconst DEFAULT_CONFIG = {\n  // env: 'production',\n  FETCH_MODE: 'API_BASE_URL', // 'REFERER', 'DOMAIN',\n  API_BASE_URL: '',\n  SAAS_API_BASE_URL: '',\n  API_PREFIX: '/api/',\n  CACHE_PREFIX: '',\n  VERSION: version,\n  PROTOCOL: 'https',\n  // LANG: 'fr',\n}\n\nif (!globalThis.tikSdkConfig) {\n  globalThis.tikSdkConfig = {}\n}\n\n;(function setDefaultConfig() {\n  for (const k of Object.keys(DEFAULT_CONFIG)) {\n    if (!(k in globalThis.tikSdkConfig)) {\n      globalThis.tikSdkConfig[k] = DEFAULT_CONFIG[k]\n    }\n  }\n})()\n\nexport function setConfigValue(k, v) {\n  globalThis.tikSdkConfig[k] = v\n}\n\nexport function setConfig(c) {\n  for (const k of Object.keys(DEFAULT_CONFIG)) {\n    if (k in c) {\n      globalThis.tikSdkConfig[k] = c[k]\n    }\n  }\n}\n\nexport function setConfigOrganization($org) {\n  setConfig({\n    API_BASE_URL: $org.api_base_url,\n    API_PREFIX: $org.api_prefix,\n    CACHE_PREFIX: $org.cache_prefix,\n  })\n}\n\nexport function base_domain() {\n  return globalThis.tikSdkConfig.API_BASE_URL\n}\n\nexport function base_url() {\n  return base_domain() + globalThis.tikSdkConfig.API_PREFIX\n}\n\nexport function saas_base_domain() {\n  return globalThis.tikSdkConfig.SAAS_API_BASE_URL\n}\n\nexport function saas_base_url() {\n  return saas_base_domain() + globalThis.tikSdkConfig.API_PREFIX\n}\n\nexport default globalThis.tikSdkConfig\n","import BaseApi from '../core/base.js'\n\nimport deliveryCompaniesApi from './delivery.js'\nimport storesApi from './stores.js'\nimport productsApi from './products.js'\nimport $organization from '../organization'\n\nexport class CommandsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'commands'\n    this.model_name = 'command'\n    this.verbose_name = 'Command'\n    this.verbose_name_plural = 'Commands'\n    this.view_perm = 'command:view'\n    this.add_perm = 'command:add'\n    this.change_perm = 'command:change'\n    this.delete_perm = 'command:delete'\n    this.configCache({ list: true }, 60 * 1000)\n  }\n\n  async new() {\n    return {\n      client_id: null,\n      client_attrs: {\n        full_name: '',\n        phone: '',\n        address: '',\n        country: 'TN',\n        state: '',\n        city: '',\n        postal_code: '',\n      },\n      type: 'delivery',\n      delivery_id: ((await deliveryCompaniesApi.primary()) || {}).id,\n      store_id: ((await storesApi.primary()) || {}).id,\n      store_name: ((await storesApi.primary()) || {}).title,\n      commercial_id: null,\n      suivi_id: null,\n      status: 'new',\n      customer_note: '',\n      staff_notes: [],\n      items: [\n        {\n          product_id: null,\n          title: '',\n          price: 0,\n          count: 0,\n        },\n      ],\n      discount: 0,\n      total: 0,\n    }\n  }\n\n  toString(obj) {\n    return obj.id ? obj.id.toString().padStart(8, '0') : ''\n  }\n\n  setClient(command, client) {\n    if (client) {\n      command.client_id = client.id\n      command.client_attrs.phone = client.phone\n      command.client_attrs.full_name = client.full_name\n      command.client_attrs.address = client.address\n      command.client_attrs.country = client.country\n      command.client_attrs.state = client.state\n      command.client_attrs.postal_code = client.postal_code\n    } else {\n      command.client_id = null\n      command.client_attrs = {}\n    }\n  }\n\n  itemPrice(item) {\n    if (item.product_id) {\n      if (item.product) {\n        return productsApi.price(item.product, item.count)\n      } else {\n        // FIXME\n        return parseFloat(item.price)\n      }\n    } else {\n      return parseFloat(item.price)\n    }\n  }\n\n  addItem(command, product) {\n    let item\n    if (typeof product === 'object') {\n      item = command.items.find((it) => it.product_id === product.id)\n      if (item) {\n        item.count++\n      } else {\n        item = {\n          title: product.title,\n          count: 1,\n          // price: product.price,\n          product_id: product.id,\n          max_count: product.count,\n          product,\n        }\n        command.items.push(item)\n      }\n    } else {\n      item = {\n        title: '',\n        count: 0,\n        price: 0,\n        product_id: null,\n        max_count: 0,\n      }\n      command.items.push(item)\n    }\n    item.price = this.itemPrice(item)\n    command.total = this.price(command)\n  }\n\n  changeItemProduct(command, item, product) {\n    if (typeof product === 'string') {\n      item.product_id = null\n      item.product = null\n      item.title = product\n      item.max_count = 4294967295\n    } else {\n      item.product_id = product.id\n      item.product = product\n      item.title = product.title\n      item.max_count = product.count || 4294967295\n    }\n    item.price = 0\n    item.count = 1\n    item.price = this.itemPrice(item)\n    command.total = this.price(command)\n  }\n\n  removeItem(command, item) {\n    command.items.splice(command.items.indexOf(item), 1)\n    command.total = this.price(command)\n  }\n\n  price(command) {\n    const price =\n      command.items.reduce((s, it) => this.itemPrice(it) + s, 0) -\n      parseFloat(command.discount || 0)\n    return Math.round(price * 100) / 100\n  }\n\n  totalHT(cmd) {\n    if ($organization.tax_rate) {\n      return (\n        (parseFloat(cmd.total) + parseFloat(cmd.discount || 0)) /\n        (1 + parseFloat($organization.tax_rate) / 100)\n      )\n    } else {\n      return parseFloat(cmd.total) + parseFloat(cmd.discount || 0)\n    }\n  }\n\n  tva(cmd) {\n    if ($organization.tax_rate) {\n      return (\n        (parseFloat(cmd.total) /\n          (1 + parseFloat($organization.tax_rate) / 100)) *\n        (parseFloat($organization.tax_rate) / 100)\n      )\n    } else {\n      return 0 // parseFloat(cmd.total)\n    }\n  }\n\n  ttc(command) {\n    return parseFloat(command.total) + parseFloat($organization.tax_stamp || 0)\n  }\n\n  async rapport(query) {\n    return this.http('GET', 'rapport', query)\n  }\n\n  async deliver(cmd, shipment_id = null) {\n    if (shipment_id) {\n      return this.http('POST', `${cmd.id}/deliver`, {\n        command_id: cmd.id,\n        shipment_id,\n      })\n    } else {\n      return this.http('POST', `${cmd.id}/deliver`)\n    }\n  }\n\n  async track(cmd) {\n    return this.http('POST', `${cmd.id}/track`)\n  }\n\n  async shipment(cmd) {\n    return this.http('GET', `${cmd.id}/deliver`)\n  }\n\n  async assign(user_id, commands) {\n    return this.http('POST', 'assign', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async makeNew(user_id, commands) {\n    return this.http('POST', 'new', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async cash(user_id, commands) {\n    return this.http('POST', 'cash', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async paid(user_id, commands) {\n    return this.http('POST', 'paid', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  async returned(user_id, commands) {\n    return this.http('POST', 'returned', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  commandTypes() {\n    return ['direct', 'delivery']\n  }\n\n  commandStatus() {\n    return [\n      'new',\n      'scheduled',\n      'inprogress',\n      'done',\n      'canceled',\n      'returned',\n      'cash',\n      'paid',\n    ]\n  }\n\n  /*\n  async postCreate(command) {\n    for (const item of command.items) {\n      if (item.product_id) {\n        const p = await productsApi.get(item.product_id);\n        p.count -= item.count;\n        await productsApi.save(p);\n      }\n    }\n  }\n  async postUpdate(oldC, newC) {\n    if (oldC.status !== 'canceled' && newC.status === 'canceled') {\n      for (const item of newC.items) {\n        if (item.product_id) {\n          const p = await productsApi.get(item.product_id);\n          p.count += item.count;\n          await productsApi.save(p);\n        }\n      }\n    }\n  }\n  */\n  status() {\n    return [\n      {\n        name: 'new',\n        displayName: 'Nouveaux',\n        icon: 'fa fa-shopping-cart',\n        backgroundColor: '#f6e06c',\n        date: 'created_at',\n      },\n      {\n        name: 'scheduled',\n        displayName: 'Réservés',\n        icon: 'fa fa-hourglass-half',\n        backgroundColor: 'rgb(255, 255, 210)',\n        date: 'scheduled_at',\n      },\n      {\n        name: 'inprogress',\n        displayName: 'En Cours',\n        icon: 'fa fa-truck',\n        backgroundColor: '#337ab7',\n        date: 'assigned_at',\n      },\n      {\n        name: 'done',\n        displayName: 'Délivrés',\n        icon: 'fa fa-check',\n        backgroundColor: '#89ff58',\n        date: 'completed_at',\n      },\n\n      {\n        name: 'canceled',\n        displayName: 'Annulés',\n        icon: 'fa fa-times',\n        backgroundColor: '#ff7b7b',\n        date: 'completed_at',\n      },\n\n      {\n        name: 'cash',\n        displayName: 'Encaisés',\n        icon: 'fa fa-bank',\n        backgroundColor: '#e6e6e6',\n        date: 'cash_at',\n      },\n      {\n        name: 'paid',\n        displayName: 'Payés',\n        icon: 'fa fa-money',\n        backgroundColor: 'rgb(32, 216, 223)',\n        date: 'paid_at',\n      },\n      {\n        name: 'returned',\n        displayName: 'Retourne Dépot',\n        icon: 'fa fa-cubes',\n        backgroundColor: '#000000',\n        color: 'white',\n        date: 'paid_at',\n        dark: true,\n      },\n    ]\n  }\n}\n\nconst api = new CommandsApi()\nexport default api\n","import BaseApi from '../core/base.js'\n\nclass ShipmentCompaniesApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'shipment-companies'\n    this.model_name = 'shipment-company'\n    this.verbose_name = 'Shipment Company'\n    this.verbose_name_plural = 'Shipment Companies'\n    this.view_perm = 'shipment-company:view'\n    this.add_perm = 'shipment-company:add'\n    this.change_perm = 'shipment-company:change'\n    this.delete_perm = 'shipment-company:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      type: 'aramex',\n      attrs: {},\n      name: '',\n      done: 0,\n      canceled: 0,\n      phone: '',\n      email: '',\n      address: '',\n      is_active: true,\n    }\n  }\n\n  async rapport(query) {\n    return this.http('GET', `rapport`, query)\n  }\n\n  async primary() {\n    return (await this.list()).find((it) => it.is_primary)\n  }\n\n  toObj(o) {\n    if (!o.attrs) {\n      o.attrs = {}\n    }\n    this.updateAttrs(o)\n    return o\n  }\n\n  updateAttrs(o) {\n    if (!o.type) {\n      return\n    }\n    const attrs = this.typeAttrs(o.type)\n    for (const attr of attrs) {\n      if (o.attrs[attr.name] === undefined) {\n        o.attrs[attr.name] = attr.default\n      }\n    }\n  }\n\n  typeAttrs(type) {\n    const res = this.types().find((it) => it.ref === type)\n    if (res) {\n      return res.attrs\n    } else {\n      return []\n    }\n  }\n\n  types() {\n    return [\n      {\n        ref: 'aramex',\n        name: 'Aramex',\n        color: 'rgb(228, 51, 51)',\n        attrs: [\n          { name: 'number', type: 'text', default: '' },\n          { name: 'pin', type: 'password', default: '' },\n          { name: 'entity', type: 'text', default: 'TUN' },\n          { name: 'country_code', type: 'text', default: 'TN' },\n        ],\n      },\n      {\n        ref: 'fparcel',\n        name: 'FParcel',\n        color: 'rgb(23, 97, 39)',\n        attrs: [],\n      },\n      {\n        ref: '1delivery',\n        name: 'First Delivery',\n        color: 'rgb(0, 141, 76)',\n        attrs: [],\n      },\n      {\n        ref: 'tnexpress',\n        name: 'Tunisia Express',\n        color: 'rgb(0, 128, 255)',\n        attrs: [\n          { name: 'username', type: 'text', default: '' },\n          { name: 'password', type: 'password', default: '' },\n          { name: 'api_key', type: 'text', default: '' },\n        ],\n      },\n    ]\n  }\n\n  status() {\n    return [\n      {\n        name: 'new',\n        displayName: 'Nouveaux',\n        icon: 'fa fa-hourglass-half',\n        backgroundColor: 'rgb(255,255,210)',\n        color: 'black',\n      },\n      {\n        name: 'created',\n        displayName: 'Command Confirmée',\n        icon: 'fa fa-shopping-cart',\n        backgroundColor: 'rgb(246, 224, 108)',\n        color: 'black',\n      },\n      {\n        name: 'in_delivery_facility',\n        displayName: 'En Depot',\n        icon: 'fa fa-bank',\n        backgroundColor: 'rgb(212, 137, 69)',\n      },\n      {\n        name: 'out_for_delivery',\n        displayName: 'En Cours',\n        icon: 'fa fa-truck',\n        backgroundColor: '#337ab7',\n      },\n      {\n        name: 'returned_delivery_facility',\n        displayName: 'Echec',\n        icon: 'fa fa-warning',\n        backgroundColor: 'rgb(255, 123, 123)',\n      },\n      {\n        name: 'canceled',\n        displayName: 'Annulé',\n        icon: 'fa fa-times',\n        backgroundColor: 'rgb(228, 51, 51)',\n      },\n      {\n        name: 'delivered',\n        displayName: 'Délivré',\n        icon: 'fa fa-check',\n        backgroundColor: 'rgb(137, 255, 88)',\n      },\n      {\n        name: 'returned_shipper',\n        displayName: 'Retourne Definitif',\n        icon: 'fa fa-cubes',\n        backgroundColor: 'black',\n      },\n      {\n        name: 'paid',\n        displayName: 'Payé',\n        icon: 'fa fa-money',\n        backgroundColor: 'rgb(32, 216, 223)',\n      },\n    ]\n  }\n}\n\nconst api = new ShipmentCompaniesApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nclass StoresApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'stores'\n    this.model_name = 'store'\n    this.verbose_name = 'Store'\n    this.verbose_name_plural = 'Stores'\n    this.view_perm = 'store:view'\n    this.add_perm = 'store:add'\n    this.change_perm = 'store:change'\n    this.delete_perm = 'store:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      id: '',\n      title: '',\n      thumbnail: undefined,\n      phone: '',\n      email: '',\n      address: '',\n      city: '',\n      country: 'TN',\n      state: 'Sfax',\n      company_name: '',\n      vat_number: '',\n      postal_code: 3000,\n      is_active: true,\n    }\n  }\n\n  async primary() {\n    return (await this.list()).find((it) => it.is_primary)\n  }\n}\n\nconst storesApi = new StoresApi()\n\nexport default storesApi\n","module.exports = __WEBPACK_EXTERNAL_MODULE__8__;","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","import BaseApi from '../core/base.js'\n\nexport class ClientsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'clients'\n    this.model_name = 'client'\n    this.verbose_name = 'Client'\n    this.verbose_name_plural = 'Clients'\n    this.view_perm = 'client:view'\n    this.add_perm = 'client:add'\n    this.change_perm = 'client:change'\n    this.delete_perm = 'client:delete'\n    this.configCache({ list: true }, 5 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      full_name: '',\n      first_name: '',\n      last_name: '',\n      attrs: {\n        type: 'detail',\n        facebook_url: '',\n      },\n      phone: '',\n      address: '',\n      country: 'TN',\n      state: 'Sfax',\n      postal_code: '',\n      email: '',\n      company_name: '',\n      vat_number: '',\n    }\n  }\n\n  toObj(o) {\n    if (!o.attrs) {\n      o.attrs = {}\n    }\n    Object.defineProperties(o, {\n      type: {\n        get() {\n          return this.attrs.type\n        },\n        set(val) {\n          this.attrs.type = val\n        },\n      },\n    })\n    return o\n  }\n\n  toString(obj) {\n    return `${obj.first_name || ''} ${obj.last_name || ''}`\n  }\n\n  async rapport(id) {\n    return this.http('GET', id + '/rapport')\n  }\n\n  async history(id) {\n    return this.http('GET', id + '/history')\n  }\n  typeAchat() {\n    return ['gros', 'detail']\n  }\n\n  states() {\n    return [\n      'Ariana',\n      'Beja',\n      'Ben Arous',\n      'Bizerte',\n      'Gabes',\n      'Gafsa',\n      'Jendouba',\n      'Kairouan',\n      'Kasserine',\n      'Kebili',\n      'Kef',\n      'Mahdia',\n      'Mannouba',\n      'Medenine',\n      'Monastir',\n      'Nabeul',\n      'Sfax',\n      'Sidi Bouzid',\n      'Siliana',\n      'Sousse',\n      'Tataouine',\n      'Tozeur',\n      'Tunis',\n      'Zaghouan',\n    ]\n  }\n}\n\nconst api = new ClientsApi()\nexport default api\n","import productsApi from './products.js'\nimport BaseApi from '../core/base.js'\n\nclass CollectionsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'collections'\n    this.model_name = 'collection'\n    this.verbose_name = 'Collection'\n    this.verbose_name_plural = 'Collections'\n    this.view_perm = 'collection:view'\n    this.add_perm = 'collection:add'\n    this.change_perm = 'collection:change'\n    this.delete_perm = 'collection:delete'\n    this.lookup_field = 'sku'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      sku: '',\n      title: '',\n      description: '',\n      delivery_id: null,\n      suivi_id: null,\n      items: [\n        {\n          product_id: null,\n          name: '',\n          price: 0,\n          count: 0,\n        },\n      ],\n      discount: 0,\n      price_net: 0,\n      thumbnail: '',\n      is_active: true,\n    }\n  }\n\n  itemPrice(item) {\n    if (item.product_id) {\n      if (item.product) {\n        return productsApi.price(item.product, item.count)\n      } else {\n        // FIXME\n        return parseFloat(item.price)\n      }\n    } else {\n      return parseFloat(item.price)\n    }\n  }\n\n  addItem(collection, product) {\n    let item\n    if (typeof product === 'object') {\n      item = collection.items.find((it) => it.product_id === product.id)\n      if (item) {\n        item.count++\n      } else {\n        item = {\n          title: product.title,\n          count: 1,\n          // price: product.price,\n          product_id: product.id,\n          max_count: product.count,\n          product,\n        }\n        collection.items.push(item)\n      }\n    } else {\n      item = {\n        title: '',\n        count: 0,\n        price: 0,\n        product_id: null,\n        max_count: 0,\n      }\n      collection.items.push(item)\n    }\n    item.price = this.itemPrice(item)\n    collection.price_net = this.price(collection)\n  }\n\n  changeItemProduct(collection, item, product) {\n    if (typeof product === 'string') {\n      item.product_id = null\n      item.product = null\n      item.title = product\n      item.max_count = 4294967295\n    } else {\n      item.product_id = product.id\n      item.product = product\n      item.title = product.title\n      item.max_count = product.count || 4294967295\n    }\n    item.price = 0\n    item.count = 1\n    item.price = this.itemPrice(item)\n    collection.price_net = this.price(collection)\n  }\n\n  removeItem(collection, item) {\n    collection.items.splice(collection.items.indexOf(item), 1)\n    collection.price_net = this.price(collection)\n  }\n\n  price(collection) {\n    const price =\n      collection.items.reduce((s, it) => this.itemPrice(it) + s, 0) -\n      parseFloat(collection.discount || 0)\n    return Math.round(price * 100) / 100\n  }\n}\n\nconst collectionsApi = new CollectionsApi()\nexport default collectionsApi\n","import {\n  default as organizationApi,\n  OrganizationApi,\n} from './core/organization'\n\nexport class Organization {\n  constructor(data) {\n    if (data) {\n      this.apply(data)\n    }\n  }\n\n  async refresh(fetch_mode, domain) {\n    const data = await organizationApi.get_site(fetch_mode, domain)\n    if (data) {\n      this.apply(data)\n    }\n  }\n\n  async refresh_by_api_base_url() {\n    await this.refresh('API_BASE_URL')\n  }\n\n  async refresh_by_domain(domain) {\n    await this.refresh('DOMAIN', domain)\n  }\n\n  async refresh_by_referer() {\n    await this.refresh('REFERER')\n  }\n\n  apply(data) {\n    data = organizationApi.toObj(data)\n    this.data = data\n    this.domains = data.$domains\n    this.origins = data.$origins\n    this.env(this)\n  }\n\n  html2txt(html) {\n    if (html) {\n      return html.replace(/<[^>]+>/g, '')\n    } else {\n      return ''\n    }\n  }\n\n  env(ctxt) {\n    if (!ctxt) {\n      ctxt = {}\n    }\n    ctxt.hide_website = !!(this.data.hide_website || process.env.HIDE_WEBSITE)\n    ctxt.modules = (this.data.modules || process.env.MODULES || '').split(',')\n    ctxt.installed_apps = (\n      this.data.installed_apps ||\n      process.env.INSTALLED_APPS ||\n      ''\n    ).split(',')\n    ctxt.delivery_backends = (\n      this.data.delivery_backends ||\n      process.env.DELIVERY_BACKENDS ||\n      ''\n    ).split(',')\n    ctxt.description = this.data.description || ''\n    ctxt.description_txt =\n      this.data.description_txt || this.html2txt(this.data.description) || ''\n    ctxt.display_name = this.data.display_name || this.data.name\n    ctxt.short_name = this.data.name\n    ctxt.cover = this.static(this.data.cover)\n    ctxt.picture = this.static(this.data.picture)\n    ctxt.favicon = this.static(this.data.favicon)\n    ctxt.logo = this.static(this.data.picture)\n    ctxt.background_image = this.static(this.data.background_image)\n    ctxt.email = this.data.email\n    ctxt.location = this.data.location\n    ctxt.phone = this.data.phone\n    ctxt.slug = this.data.slug\n    ctxt.cache_prefix = this.data.slug\n    ctxt.summary = this.data.summary\n    ctxt.about_us = this.data.summary\n    ctxt.about_us_fr = this.data.summary\n    ctxt.facebook_url = this.data.facebook_url\n    ctxt.fb_url = this.data.facebook_url\n    ctxt.twitter_url = this.data.twitter_url\n    ctxt.youtube_url = this.data.youtube_url\n    ctxt.instagram_url = this.data.instagram_url\n    ctxt.linkedin_url = this.data.linkedin_url\n    ctxt.wiretransfer = this.data.wiretransfer\n    ctxt.mandat = this.data.mandat\n    ctxt.payment_providers = this.data.payment_providers\n    ctxt.attrs = this.data.attrs\n    ctxt.config_attrs = this.data.config_attrs\n    ctxt.permissions = this.data.permissions\n    ctxt.default_currency = this.data.default_currency\n    ctxt.tax_rate = this.data.tax_rate\n    ctxt.tax_stamp = this.data.tax_stamp\n    ctxt.api_prefix = process.env.API_PREFIX || '/api/'\n    ctxt.maintenance_mode =\n      this.data.maintenance_mode || process.env.MAINTENANCE_MODE\n    ctxt.maintenance_token =\n      this.data.maintenance_token || process.env.MAINTENANCE_TOKEN\n    ctxt.api_base_url = this.data.$origins.api\n    if (this.data.$origins.webapp) {\n      ctxt.base_url = this.data.$origins.webapp\n    } else {\n      ctxt.base_url = process.env.BASE_URL\n    }\n\n    ctxt.piwik_site_id = this.data.piwik_site_id || process.env.PIWIK_SITE_ID\n    ctxt.fb_pixel_id = this.data.fb_pixel_id || process.env.FB_PIXEL_ID\n    ctxt.fb_page_id = this.data.fb_page_id || process.env.FB_PAGE_ID\n    ctxt.fb_app_id = this.data.fb_app_id\n    ctxt.google_analytics_id =\n      this.data.google_analytics_id || process.env.GOOGLE_ANALYTICS_ID\n    ctxt.google_gtag_id = this.data.google_gtag_id || process.env.GOOGLE_GTAG_ID\n    ctxt.locales = (process.env.LOCALES || 'en-US,fr-FR').split(',')\n    ctxt.default_locale = this.data.default_locale\n    ctxt.newsletter_default_subject = 'default'\n    return ctxt\n  }\n\n  ENV(ctxt) {\n    if (!ctxt) {\n      ctxt = {}\n    }\n    function value(val) {\n      return val === null || val === undefined ? '' : val\n    }\n    const $env = this.env()\n    for (const envar of Object.keys($env)) {\n      const val = value($env[envar])\n      if (Array.isArray(val)) {\n        ctxt[envar.toUpperCase()] = val.join(',')\n      } else if (val && typeof val === 'object') {\n        for (const k of Object.keys(val)) {\n          const v = value(val[k])\n          ctxt[`${envar}_${k}`.toUpperCase()] = v\n        }\n      } else {\n        ctxt[envar.toUpperCase()] = val\n      }\n    }\n    return ctxt\n  }\n\n  static(path) {\n    if (path && path.startsWith('/')) return `${this.data.$origins.cdn}${path}`\n    else return path\n  }\n  hasModule(md) {\n    return this.modules.includes(md)\n  }\n  hasDeliveryBackend(md) {\n    return this.delivery_backends.includes(md)\n  }\n}\n\nif (!globalThis.TikSdkOrganization) {\n  globalThis.TikSdkOrganization = new Organization()\n}\nconst $organization = globalThis.TikSdkOrganization\n\nexport { organizationApi, OrganizationApi }\nexport default $organization\n","import BaseApi from './base'\nimport {\n  base_url,\n  base_domain,\n  saas_base_url,\n  saas_base_domain,\n  default as CONFIG,\n} from '../config.js'\n\nexport class OrganizationApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'site'\n    // this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  get base_domain() {\n    return globalThis.tikSdkConfig.API_BASE_URL\n      ? base_domain()\n      : saas_base_domain()\n  }\n\n  get base_url() {\n    return globalThis.tikSdkConfig.API_BASE_URL ? base_url() : saas_base_url()\n  }\n\n  toObj(object) {\n    if (!object.attrs) {\n      object.attrs = {}\n    }\n    if (!object.config_attrs) {\n      object.config_attrs = {}\n    }\n    if (!object.permissions) {\n      object.permissions = []\n    }\n    if (!object.payment_providers) {\n      object.payment_providers = []\n    }\n    delete object.cover_file\n    delete object.picture_file\n    delete object.background_image_file\n\n    const domains = {}\n    const origins = {}\n    for (const domain of object.domains) {\n      domains[domain.type] = domain.domain\n      origins[domain.type] = domain.origin\n    }\n    if (!domains.api) {\n      domains.api = domains.admin\n      origins.api = origins.admin\n    }\n    if (!domains.admin) {\n      domains.admin = domains.api\n      origins.admin = origins.api\n    }\n    if (!domains.cdn) {\n      domains.cdn = domains.api\n      origins.cdn = origins.api\n    }\n\n    object.$domains = domains\n    object.$origins = origins\n\n    const $base_url = new URL(object.$origins.api)\n    object.http_protocol = ($base_url.protocol || 'https:') + '//'\n    object.http_port = $base_url.port ? `:${$base_url.port}` : ''\n\n    return object\n  }\n\n  async get_site(fetch_mode, domain) {\n    let data\n    if (!fetch_mode) {\n      fetch_mode = CONFIG.FETCH_MODE\n    }\n    if (fetch_mode === 'API_BASE_URL') {\n      data = await this.list()\n    } else if (fetch_mode === 'REFERER') {\n      data = await this.http('GET', 'hostname')\n    } else if (fetch_mode === 'DOMAIN') {\n      data = await this.http('GET', domain)\n    }\n    return this.toObj(data)\n  }\n\n  async get_site_by_domain(domain) {\n    return await this.get_site('DOMAIN', domain)\n  }\n\n  async get_site_by_referer() {\n    return await this.get_site('REFERER')\n  }\n}\n\nconst api = new OrganizationApi()\nexport default api\n","import { CommandsApi } from './commands.js'\n\nexport class OrdersApi extends CommandsApi {\n  constructor() {\n    super()\n    // this.resource = 'commands'\n    this.model_name = 'order'\n    this.verbose_name = 'Order'\n    this.verbose_name_plural = 'Orders'\n    this.view_perm = 'order:view'\n    this.add_perm = 'order:add'\n    this.change_perm = 'order:change'\n    this.delete_perm = 'order:delete'\n  }\n\n  async registerOrder(order_id, provider, settings) {\n    return await this.http('POST', `${order_id}/payment`, {\n      variant: provider,\n      ...settings,\n    })\n  }\n}\n\nconst api = new OrdersApi()\nexport default api\n","import { UsersApi } from '../core/users.js'\n\nclass StaffsApi extends UsersApi {\n  constructor() {\n    super()\n    this.resource = 'staffs'\n    this.model_name = 'staff'\n    this.verbose_name = 'Staff'\n    this.verbose_name_plural = 'Staffs'\n    this.view_perm = 'staff:view'\n    this.add_perm = 'staff:add'\n    this.change_perm = 'staff:change'\n    this.delete_perm = 'staff:delete'\n\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      first_name: '',\n      last_name: '',\n      full_name: '',\n      // status: 'indoor',\n      roles: ['commercial'],\n      phone: '',\n      email: '',\n      attrs: {\n        unlimited_access: false,\n        start_at: '08:00',\n        end_at: '18:00',\n      },\n      is_active: true,\n      is_staff: true,\n    }\n  }\n\n  toObj(o) {\n    if (!o || o.code === 'user_not_found') return null\n    if (!o.attrs) {\n      o.attrs = {}\n    }\n    Object.defineProperties(o, {\n      role: {\n        get() {\n          return this.roles[0]\n        },\n      },\n      is_admin: {\n        get() {\n          return this.roles.includes('admin')\n        },\n      },\n      is_freelance: {\n        get() {\n          return this.roles.includes('freelance')\n        },\n      },\n      start_at: {\n        value: '08:00',\n        writable: false,\n      },\n      end_at: {\n        value: '18:00',\n        writable: false,\n      },\n      unlimited_access: {\n        get() {\n          return this.attrs.unlimited_access\n        },\n        set(val) {\n          this.attrs.unlimited_access = val\n        },\n      },\n    })\n    return o\n  }\n\n  toString(obj) {\n    return `${obj.first_name || ''} ${obj.last_name || ''}`\n  }\n\n  async unlimited() {\n    return this.http('GET', 'unlimited')\n  }\n\n  roles() {\n    return [\n      'admin',\n      'manager',\n      'finance',\n      'suivi',\n      'commercial',\n      'stock',\n      ...((process.env.MODULES.includes('pos') && ['pos']) || []),\n    ]\n  }\n}\n\nconst staffsApi = new StaffsApi()\nexport default staffsApi\n","import BaseApi from './base'\n\nexport class UsersApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'users'\n    this.model_name = 'user'\n    this.verbose_name = 'User'\n    this.verbose_name_plural = 'Users'\n    this.view_perm = 'user:view'\n    this.add_perm = 'user:add'\n    this.change_perm = 'user:change'\n    this.delete_perm = 'user:delete'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async me() {\n    const obj = await this.http('GET', 'me', null, true)\n    return this.toObj(obj)\n  }\n\n  async activate(id, token) {\n    return await this.http('POST', `${id}/activate`, { token }, true)\n  }\n\n  async get_by_email(email) {\n    return await this.http('POST', 'email', { email }, true)\n  }\n\n  toString(obj) {\n    return `${obj.first_name || ''} ${obj.last_name || ''}`\n  }\n}\n\nconst api = new UsersApi()\n\nexport default api\n","import BaseApi from '../core/base.js'\n\nclass StockApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'stock'\n    this.model_name = 'stock'\n    this.verbose_name = 'Stock'\n    this.verbose_name_plural = 'Stock'\n    this.view_perm = 'stock:view'\n    this.add_perm = 'stock:add'\n    this.change_perm = 'stock:change'\n    this.delete_perm = 'stock:delete'\n    this.configCache({ list: true }, 60 * 1000)\n  }\n\n  async report(assigned_at, suivi_id) {\n    return this.http('GET', 'report', {\n      assigned_at,\n      suivi_id,\n    })\n  }\n\n  async release(user_id, commands) {\n    return this.http('POST', 'release', {\n      staff_id: user_id,\n      commands: commands.map((c) => c.id),\n    })\n  }\n\n  toString(obj) {\n    return obj.id ? obj.id.toString().padStart(8, '0') : ''\n  }\n}\n\nconst stockApi = new StockApi()\nexport default stockApi\n"],"sourceRoot":""}