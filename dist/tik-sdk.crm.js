!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@sentry/browser")):"function"==typeof define&&define.amd?define(["@sentry/browser"],t):"object"==typeof exports?exports.crm=t(require("@sentry/browser")):(e.tikSDK=e.tikSDK||{},e.tikSDK.crm=t(e.Sentry))}(this,(function(e){return function(e){var t={};function a(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=6)}([function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(7),a(8),a(3)],void 0===(r="function"==typeof(i=function(e,t,a,i){"use strict";function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,t&&t.set(e,a),a}(t),a=(r=a)&&r.__esModule?r:{default:r},globalThis.tikSdkSession||(globalThis.tikSdkSession={authToken:null,instructorAuthToken:null});var s=class{constructor(){this.lookup_field="id",this.useCache={list:!1,get:!1},this.validateCache=!0}get base_domain(){return(0,i.base_domain)()}get base_url(){return(0,i.base_url)()}get session(){return globalThis.tikSdkSession}configCache(e,t){this.useCache=e,this._cacheTimeout&&clearInterval(this._cacheTimeout),t&&(this.cacheTimeout=t,this._cacheTimeout=setInterval(()=>{this.validateCache=!0},this.cacheTimeout))}async http(e,i,n,r=!1){i=i?`${this.resource}/${i}`:""+this.resource;let s,o={},l=`${this.base_url}${i}/`;if(n&&"GET"===e)l+=a.default.stringify(n,!0),n=null;else if(n)if(Object.values(n).some(e=>e instanceof File)){const e=new FormData;for(let[t,a]of Object.entries(n))null===a&&(a=""),e.append(t,a);n=e}else n=JSON.stringify(n),o={"Content-Type":"application/json; charset=utf-8"};else n=void 0;console.log(e,i,n||"");try{if(this.session.authToken&&(o.Authorization="Bearer "+this.session.authToken),s=await fetch(l,{method:e,headers:o,body:n,mode:"cors",cache:"no-cache",redirect:"follow",referrer:"no-referrer"}),!(s.ok||r&&[404,401].includes(s.status))){const e=new Error(s.statusText||s.status);throw e.response=s,e}if("DELETE"!==e)return await s.json()}catch(e){throw console.error("HTTP Error:",l.toString(),JSON.stringify(n),s&&s.status),console.log("Sentry",typeof t,t,Object.keys(t)),"object"==typeof t&&"captureException"in t&&t.captureException(e),e}}toObj(e){return e}async list(){if(this.useCache.list&&!this.validateCache&&this.data)console.log(`[HTTP] ${this.resource}.list(): using cache`);else{const e=await this.http("GET","");this.data=e,this.validateCache=!1}return this.data}async get(e,t=!1){if(e){const a=await this.http("GET",e,null,t);return this.toObj(a)}return this.new()}async save(e,t,a=!1,i=!1,n=!1){if(this.validateCache=!0,!e.id&&!t||a)return await this.http("POST","",e,n);{const a=await this.http(i?"PATCH":"PUT",t||e.id,e,n);return this.toObj(a)}}new(){return null}async delete(e){return this.validateCache=!0,this.http("DELETE",e)}};e.default=s})?i.apply(t,n):i)||(e.exports=r)},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(0),a(2)],void 0===(r="function"==typeof(i=function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=i(t),a=i(a);class n extends t.default{constructor(){super(),this.resource="products",this.configCache({list:!0},15e3)}new(){return{title:"",count:0,sku:"",category_id:null,category_title:"",is_active:!0,saleoffers:[],price_net:0,tax_rate:19,cost_price:0,has_variants:!1,is_shipping_required:!0,is_digital:!1,charge_taxes:!0,charge_shipping:!1}}async addStock(e,t){return this.http("POST",e.sku+"/stock",{count:t})}async rapport(e){return this.http("GET","rapport",e)}async categories(){return a.default.list()}defaultPrice(e){return parseFloat(e.price_net)*(1+e.tax_rate/100)}offerPrice(e,t,a){return e=parseFloat(e),"%"===a.discount_type&&a.discount_percentage?e=parseFloat(e)*(1-a.discount_percentage/100):"n"===a.discount_type&&a.discount_amount&&(e=parseFloat(e)-parseFloat(a.discount_amount)),e*t}offer(e,t){let a={count_min:0,discount_percentage:0};return e.saleoffers&&(a=e.saleoffers.reduce((e,a)=>a.count_min<=t&&a.count_min>=e.count_min?a:e,a)),a}price(e,t){const a=this.defaultPrice(e),i=this.offer(e,t);return this.offerPrice(a,t,i)}stockColor(e){return e.count<300?"#dd4b39":e.count<500?"#f39c12":"#00a65a"}status(){return[{name:"stock",displayName:"Stock",icon:"fa fa-cubes",backgroundColor:"rgb(137, 255, 88)"},{name:"new",displayName:"Nouveaux",icon:"fa fa-shopping-cart",backgroundColor:"#f6e06c"},{name:"scheduled",displayName:"Réservés",icon:"fa fa-hourglass-half",backgroundColor:"rgb(255, 255, 210)",color:"white"},{name:"inprogress",displayName:"En Cours",icon:"fa fa-truck",backgroundColor:"#337ab7"},{name:"done",displayName:"Délivrés",icon:"fa fa-check",backgroundColor:"#89ff58"},{name:"canceled",displayName:"Annulés",icon:"fa fa-times",backgroundColor:"#ff7b7b"},{name:"paid",displayName:"Payés",icon:"fa fa-money",backgroundColor:"rgb(32, 216, 223)"},{name:"returned",displayName:"Retourne Dépot",icon:"fa fa-cubes",backgroundColor:"#000000",color:"white"},{name:"released",displayName:"Libérés",icon:"fa fa-truck",backgroundColor:"#131654"}]}}var r=new n;e.default=r})?i.apply(t,n):i)||(e.exports=r)},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(0)],void 0===(r="function"==typeof(i=function(e,t){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=(a=t)&&a.__esModule?a:{default:a};class i extends t.default{constructor(){super(),this.resource="categories",this.configCache({list:!0},216e6)}new(){return{id:"",title:"",thumbnail:void 0,is_active:!0}}}var n=new i;e.default=n})?i.apply(t,n):i)||(e.exports=r)},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(9)],void 0===(r="function"==typeof(i=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setConfigValue=function(e,t){globalThis.tikSdkConfig[e]=t},e.setConfig=i,e.setConfigOrganization=function(e){i({API_BASE_URL:e.api_base_url,API_PREFIX:e.api_prefix,CACHE_PREFIX:e.cache_prefix})},e.base_domain=n,e.base_url=function(){return n()+globalThis.tikSdkConfig.API_PREFIX},e.saas_base_domain=r,e.saas_base_url=function(){return r()+globalThis.tikSdkConfig.API_PREFIX},e.default=void 0;const a={API_BASE_URL:"",SAAS_API_BASE_URL:"",API_PREFIX:"/api/",CACHE_PREFIX:"",VERSION:t.version,PROTOCOL:"https"};function i(e){for(const t of Object.keys(a))t in e&&(globalThis.tikSdkConfig[t]=e[t])}function n(){return globalThis.tikSdkConfig.API_BASE_URL}function r(){return globalThis.tikSdkConfig.SAAS_API_BASE_URL}globalThis.tikSdkConfig||(globalThis.tikSdkConfig={}),function(){for(const e of Object.keys(a))e in globalThis.tikSdkConfig||(globalThis.tikSdkConfig[e]=a[e])}();var s=globalThis.tikSdkConfig;e.default=s})?i.apply(t,n):i)||(e.exports=r)},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(0)],void 0===(r="function"==typeof(i=function(e,t){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=(a=t)&&a.__esModule?a:{default:a};class i extends t.default{constructor(){super(),this.resource="delivery-companies",this.configCache({list:!0},36e5)}new(){return{id:"",type:"aramex",attrs:{},name:"",done:0,canceled:0,phone:"",email:"",address:"",is_active:!0}}async rapport(e){return this.http("GET","rapport",e)}async primary(){return(await this.list()).find(e=>e.is_primary)}toObj(e){return e.attrs||(e.attrs={}),this.updateAttrs(e),e}updateAttrs(e){if(!e.type)return;const t=this.typeAttrs(e.type);for(const a of t)void 0===e.attrs[a.name]&&(e.attrs[a.name]=a.default)}typeAttrs(e){const t=this.types().find(t=>t.ref===e);return t?t.attrs:[]}types(){return[{ref:"aramex",name:"Aramex",color:"rgb(228, 51, 51)",attrs:[{name:"number",type:"text",default:""},{name:"pin",type:"password",default:""},{name:"entity",type:"text",default:"TUN"},{name:"country_code",type:"text",default:"TN"}]},{ref:"fparcel",name:"FParcel",color:"rgb(23, 97, 39)",attrs:[]},{ref:"1delivery",name:"First Delivery",color:"rgb(0, 141, 76)",attrs:[]},{ref:"tnexpress",name:"Tunisia Express",color:"rgb(0, 128, 255)",attrs:[{name:"username",type:"text",default:""},{name:"password",type:"password",default:""},{name:"api_key",type:"text",default:""}]}]}status(){return[{name:"new",displayName:"Nouveaux",icon:"fa fa-hourglass-half",backgroundColor:"rgb(255,255,210)",color:"black"},{name:"created",displayName:"Command Confirmée",icon:"fa fa-shopping-cart",backgroundColor:"rgb(246, 224, 108)",color:"black"},{name:"in_delivery_facility",displayName:"En Depot",icon:"fa fa-bank",backgroundColor:"rgb(212, 137, 69)"},{name:"out_for_delivery",displayName:"En Cours",icon:"fa fa-truck",backgroundColor:"#337ab7"},{name:"returned_delivery_facility",displayName:"Echec",icon:"fa fa-warning",backgroundColor:"rgb(255, 123, 123)"},{name:"canceled",displayName:"Annulé",icon:"fa fa-times",backgroundColor:"rgb(228, 51, 51)"},{name:"delivered",displayName:"Délivré",icon:"fa fa-check",backgroundColor:"rgb(137, 255, 88)"},{name:"returned_shipper",displayName:"Retourne Definitif",icon:"fa fa-cubes",backgroundColor:"black"},{name:"paid",displayName:"Payé",icon:"fa fa-money",backgroundColor:"rgb(32, 216, 223)"}]}}var n=new i;e.default=n})?i.apply(t,n):i)||(e.exports=r)},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(0)],void 0===(r="function"==typeof(i=function(e,t){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=(a=t)&&a.__esModule?a:{default:a};class i extends t.default{constructor(){super(),this.resource="stores",this.configCache({list:!0},36e5)}new(){return{id:"",title:"",thumbnail:void 0,phone:"",email:"",address:"",city:"",country:"TN",state:"Sfax",company_name:"",vat_number:"",postal_code:3e3,is_active:!0}}async primary(){return(await this.list()).find(e=>e.is_primary)}}var n=new i;e.default=n})?i.apply(t,n):i)||(e.exports=r)},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(2),a(10),a(11),a(12),a(4),a(1),a(14),a(16),a(5)],void 0===(r="function"==typeof(i=function(e,t,a,i,n,r,s,o,l,u){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"categories",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"clients",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"collections",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"commands",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"delivery",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"products",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"staffs",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"stock",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"stores",{enumerable:!0,get:function(){return u.default}}),t=c(t),a=c(a),i=c(i),n=c(n),r=c(r),s=c(s),o=c(o),l=c(l),u=c(u)})?i.apply(t,n):i)||(e.exports=r)},function(t,a){t.exports=e},function(e,t,a){"use strict";var i=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function r(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var a,n,s=[];for(n in"string"!=typeof t&&(t="?"),e)if(i.call(e,n)){if((a=e[n])||null!=a&&!isNaN(a)||(a=""),n=r(n),a=r(a),null===n||null===a)continue;s.push(n+"="+a)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,a=/([^=?#&]+)=?([^&]*)/g,i={};t=a.exec(e);){var r=n(t[1]),s=n(t[2]);null===r||null===s||r in i||(i[r]=s)}return i}},function(e){e.exports=JSON.parse('{"name":"tik-sdk","version":"2020.09.09","main":"index.js","module":"index.js","browser":"dist/tik-sdk.full.js","types":"types/tik-sdk.full.d.ts","exports":{".":"./index.js","./src/":"./src/"},"description":"TIK SDK","license":" GPL-3.0-only","author":{"name":"TIK (Technology Innovation Network)","email":"contact@tik.tn","url":"https://tik.tn"},"homepage":"https://tik.tn","private":true,"scripts":{"test":"jest","build:webpack":"webpack","build:babel":"babel index.js -d lib","lint":"eslint --ext .js,.vue,.ts --ignore-path .gitignore --ignore-pattern **/*.min.js . --ignore-pattern dist/"},"browserslist":["last 2 versions AND last 2 years AND supports es6-module","not IE 11","not IE_Mob 11","not dead"],"dependencies":{"@sentry/browser":"^5.5.0","@sentry/integrations":"^5.5.0","querystringify":"^2.1.1"},"devDependencies":{"@babel/cli":"^7.11.6","@babel/core":"^7.11.6","@babel/plugin-transform-modules-umd":"^7.10.4","@babel/preset-env":"^7.11.5","babel-eslint":"^10.0.1","babel-jest":"^26.3.0","babel-loader":"^8.1.0","clean-webpack-plugin":"^3.0.0","eslint":"^7.2.0","eslint-config-prettier":"^6.0.0","eslint-config-standard":">=12.0.0","eslint-loader":"^4.0.2","eslint-plugin-import":">=2.16.0","eslint-plugin-jest":">=24.0.0","eslint-plugin-node":">=8.0.1","eslint-plugin-prettier":"^3.0.1","eslint-plugin-promise":">=4.0.1","eslint-plugin-standard":">=4.0.0","husky":"^4.0.1","jest":"^26.4.2","lint-staged":"^10.3.0","nodemon":"^2.0.4","prettier":"^2.0.5","stylelint":"^13.1.0","ts-loader":"^8.0.3","typescript":"^4.0.2","webpack":"^4.44.1","webpack-cli":"^3.3.12"}}')},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(0)],void 0===(r="function"==typeof(i=function(e,t){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=(a=t)&&a.__esModule?a:{default:a};class i extends t.default{constructor(){super(),this.resource="clients",this.configCache({list:!0},3e5),this.model_name="Client",this.model_name_plural="Clients"}new(){return{full_name:"",first_name:"",last_name:"",attrs:{type:"detail",facebook_url:""},phone:"",address:"",country:"TN",state:"Sfax",postal_code:"",email:"",company_name:"",vat_number:""}}toObj(e){return e.attrs||(e.attrs={}),Object.defineProperties(e,{type:{get(){return this.attrs.type},set(e){this.attrs.type=e}}}),e}async rapport(e){return this.http("GET",e+"/rapport")}async history(e){return this.http("GET",e+"/history")}typeAchat(){return["gros","detail"]}states(){return["Ariana","Beja","Ben Arous","Bizerte","Gabes","Gafsa","Jendouba","Kairouan","Kasserine","Kebili","Kef","Mahdia","Mannouba","Medenine","Monastir","Nabeul","Sfax","Sidi Bouzid","Siliana","Sousse","Tataouine","Tozeur","Tunis","Zaghouan"]}}var n=new i;e.default=n})?i.apply(t,n):i)||(e.exports=r)},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(1),a(0)],void 0===(r="function"==typeof(i=function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=i(t),a=i(a);class n extends a.default{constructor(){super(),this.resource="collections",this.configCache({list:!0},36e5)}new(){return{sku:"",title:"",description:"",delivery_id:null,suivi_id:null,items:[{product_id:null,name:"",price:0,count:0}],discount:0,price_net:0,thumbnail:"",is_active:!0}}itemPrice(e){return e.product_id?e.product?t.default.price(e.product,e.count):void 0:parseFloat(e.price)}addItem(e,t){let a;"object"==typeof t?(a=e.items.find(e=>e.product_id===t.id),a?a.count++:(a={title:t.title,count:1,product_id:t.id,max_count:t.count,product:t},e.items.push(a))):(a={title:"",count:0,price:0,product_id:null,max_count:0},e.items.push(a)),a.price=this.itemPrice(a),e.price_net=this.price(e)}changeItemProduct(e,t,a){"string"==typeof a?(t.product_id=null,t.product=null,t.title=a,t.max_count=4294967295):(t.product_id=a.id,t.product=a,t.title=a.title,t.max_count=a.count||4294967295),t.price=0,t.count=1,t.price=this.itemPrice(t),e.price_net=this.price(e)}removeItem(e,t){e.items.splice(e.items.indexOf(t),1),e.price_net=this.price(e)}price(e){const t=e.items.reduce((e,t)=>this.itemPrice(t)+e,0)-parseFloat(e.discount);return Math.round(100*t)/100}}var r=new n;e.default=r})?i.apply(t,n):i)||(e.exports=r)},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(0),a(4),a(5),a(1),a(13)],void 0===(r="function"==typeof(i=function(e,t,a,i,n,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=s(t),a=s(a),i=s(i),n=s(n),r=s(r);class o extends t.default{constructor(){super(),this.resource="commands",this.configCache({list:!0},6e4)}async new(){return{client_id:null,client_attrs:{full_name:"",phone:"",address:"",country:"TN",state:"",city:"",postal_code:""},type:"delivery",delivery_id:(await a.default.primary()||{}).id,store_id:(await i.default.primary()||{}).id,store_name:(await i.default.primary()||{}).title,commercial_id:null,suivi_id:null,status:"new",customer_note:"",staff_notes:[],items:[{product_id:null,title:"",price:0,count:0}],discount:0,total:0}}setClient(e,t){t?(e.client_id=t.id,e.client_attrs.phone=t.phone,e.client_attrs.full_name=t.full_name,e.client_attrs.address=t.address,e.client_attrs.country=t.country,e.client_attrs.state=t.state,e.client_attrs.postal_code=t.postal_code):(e.client_id=null,e.client_attrs={})}itemPrice(e){return e.product_id?e.product?n.default.price(e.product,e.count):void 0:parseFloat(e.price)}addItem(e,t){let a;"object"==typeof t?(a=e.items.find(e=>e.product_id===t.id),a?a.count++:(a={title:t.title,count:1,product_id:t.id,max_count:t.count,product:t},e.items.push(a))):(a={title:"",count:0,price:0,product_id:null,max_count:0},e.items.push(a)),a.price=this.itemPrice(a),e.total=this.price(e)}changeItemProduct(e,t,a){"string"==typeof a?(t.product_id=null,t.product=null,t.title=a,t.max_count=4294967295):(t.product_id=a.id,t.product=a,t.title=a.title,t.max_count=a.count||4294967295),t.price=0,t.count=1,t.price=this.itemPrice(t),e.total=this.price(e)}removeItem(e,t){e.items.splice(e.items.indexOf(t),1),e.total=this.price(e)}price(e){const t=e.items.reduce((e,t)=>this.itemPrice(t)+e,0)-parseFloat(e.discount||0);return Math.round(100*t)/100}totalHT(e){return r.default.tax_rate?(parseFloat(e.total)+parseFloat(e.discount||0))/(1+parseFloat(r.default.tax_rate)/100):parseFloat(e.total)+parseFloat(e.discount||0)}tva(e){return r.default.tax_rate?parseFloat(e.total)/(1+parseFloat(r.default.tax_rate)/100)*(parseFloat(r.default.tax_rate)/100):0}ttc(e){return parseFloat(e.total)+parseFloat(r.default.tax_stamp||0)}async rapport(e){return this.http("GET","rapport",e)}async deliver(e,t=null){return t?this.http("POST",e.id+"/deliver",{command_id:e.id,shipment_id:t}):this.http("POST",e.id+"/deliver")}async track(e){return this.http("POST",e.id+"/track")}async shipment(e){return this.http("GET",e.id+"/deliver")}async assign(e,t){return this.http("POST","assign",{staff_id:e,commands:t.map(e=>e.id)})}async makeNew(e,t){return this.http("POST","new",{staff_id:e,commands:t.map(e=>e.id)})}async cash(e,t){return this.http("POST","cash",{staff_id:e,commands:t.map(e=>e.id)})}async paid(e,t){return this.http("POST","paid",{staff_id:e,commands:t.map(e=>e.id)})}async returned(e,t){return this.http("POST","returned",{staff_id:e,commands:t.map(e=>e.id)})}commandTypes(){return["direct","delivery"]}commandStatus(){return["new","scheduled","inprogress","done","canceled","returned","cash","paid"]}status(){return[{name:"new",displayName:"Nouveaux",icon:"fa fa-shopping-cart",backgroundColor:"#f6e06c",date:"created_at"},{name:"scheduled",displayName:"Réservés",icon:"fa fa-hourglass-half",backgroundColor:"rgb(255, 255, 210)",date:"scheduled_at"},{name:"inprogress",displayName:"En Cours",icon:"fa fa-truck",backgroundColor:"#337ab7",date:"assigned_at"},{name:"done",displayName:"Délivrés",icon:"fa fa-check",backgroundColor:"#89ff58",date:"completed_at"},{name:"canceled",displayName:"Annulés",icon:"fa fa-times",backgroundColor:"#ff7b7b",date:"completed_at"},{name:"cash",displayName:"Encaisés",icon:"fa fa-bank",backgroundColor:"#e6e6e6",date:"cash_at"},{name:"paid",displayName:"Payés",icon:"fa fa-money",backgroundColor:"rgb(32, 216, 223)",date:"paid_at"},{name:"returned",displayName:"Retourne Dépot",icon:"fa fa-cubes",backgroundColor:"#000000",color:"white",date:"paid_at",dark:!0}]}}var l=new o;e.default=l})?i.apply(t,n):i)||(e.exports=r)},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(0),a(3)],void 0===(r="function"==typeof(i=function(e,t,a){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Organization=e.organizationApi=void 0,t=(i=t)&&i.__esModule?i:{default:i};class n extends t.default{constructor(){super(),this.resource="site"}toObj(e){return e.attrs||(e.attrs={}),e.payment_providers||(e.payment_providers=[]),e._phone=e.phone,delete e.cover_file,delete e.picture_file,delete e.background_image_file,e}}const r=new n;e.organizationApi=r;class s{constructor(e){e&&this.apply(e)}async refresh(){const e=await r.list();e&&this.apply(e)}apply(e){this.data=e;const t=new URL((0,a.base_url)());this.http_protocol=(t.protocol||"https:")+"//",this.http_port=t.port?":"+t.port:"";const i={};for(const t of e.domains)i[t.type]=t.domain;i.api||(i.api=i.admin),i.admin||(i.admin=i.api),i.cdn||(i.cdn=i.api),this.domains=i,this.env(this)}html2txt(e){return e?e.replace(/<[^>]+>/g,""):""}env(e){return e||(e={}),e.hide_website=!(!this.data.hide_website&&!process.env.HIDE_WEBSITE),e.modules=(this.data.modules||process.env.MODULES||"").split(","),e.installed_apps=(this.data.installed_apps||process.env.INSTALLED_APPS||"").split(","),e.delivery_backends=(this.data.delivery_backends||process.env.DELIVERY_BACKENDS||"").split(","),e.description=this.data.description||"",e.description_txt=this.data.description_txt||this.html2txt(this.data.description)||"",e.display_name=this.data.display_name||this.data.name,e.short_name=this.data.name,e.cover=this.static(this.data.cover),e.picture=this.static(this.data.picture),e.favicon=this.static(this.data.favicon),e.logo=this.static(this.data.picture),e.background_image=this.static(this.data.background_image),e.email=this.data.email,e.location=this.data.location,e.phone=this.data.phone,e.slug=this.data.slug,e.cache_prefix=this.data.slug,e.about_us=this.data.summary,e.about_us_fr=this.data.summary,e.fb_url=this.data.facebook_url,e.twitter_url=this.data.twitter_url,e.youtube_url=this.data.youtube_url,e.instagram_url=this.data.instagram_url,e.linkedin_url=this.data.linkedin_url,e.wiretransfer=this.data.wiretransfer,e.mandat=this.data.mandat,e.payment_providers=this.data.payment_providers,e.default_currency=this.data.default_currency,e.tax_rate=this.data.tax_rate,e.tax_stamp=this.data.tax_stamp,e.api_prefix=process.env.API_PREFIX||"/api/",e.maintenance_mode=this.data.maintenance_mode||process.env.MAINTENANCE_MODE,e.maintenance_token=this.data.maintenance_token||process.env.MAINTENANCE_TOKEN,e.api_base_url=`${this.http_protocol}${this.domains.api}${this.http_port}`,this.domains.webapp?e.base_url=`${this.http_protocol}${this.domains.webapp}`:e.base_url=process.env.BASE_URL,e.piwik_site_id=this.data.piwik_site_id||process.env.PIWIK_SITE_ID,e.fb_pixel_id=this.data.fb_pixel_id||process.env.FB_PIXEL_ID,e.fb_page_id=this.data.fb_page_id||process.env.FB_PAGE_ID,e.fb_app_id=this.data.fb_app_id,e.google_analytics_id=this.data.google_analytics_id||process.env.GOOGLE_ANALYTICS_ID,e.google_gtag_id=this.data.google_gtag_id||process.env.GOOGLE_GTAG_ID,e.locales=(process.env.LOCALES||"en-US,fr-FR").split(","),e.default_locale=this.data.default_locale,e.newsletter_default_subject="default",e}ENV(e){function t(e){return null==e?"":e}e||(e={});const a=this.env();for(const i of Object.keys(a)){const n=t(a[i]);if(Array.isArray(n))e[i.toUpperCase()]=n.join(",");else if(n&&"object"==typeof n)for(const a of Object.keys(n)){const r=t(n[a]);e[`${i}_${a}`.toUpperCase()]=r}else e[i.toUpperCase()]=n}return e}static(e){return e&&e.startsWith("/")?`${this.http_protocol}${this.domains.cdn}${this.http_port}${e}`:e}hasModule(e){return this.modules.includes(e)}hasDeliveryBackend(e){return this.delivery_backends.includes(e)}}e.Organization=s,globalThis.TikSdkOrganization||(globalThis.TikSdkOrganization=new s);var o=globalThis.TikSdkOrganization;e.default=o})?i.apply(t,n):i)||(e.exports=r)},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(15)],void 0===(r="function"==typeof(i=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;class a extends t.UsersApi{constructor(){super(),this.resource="staffs",this.configCache({list:!0},36e5)}new(){return{full_name:"",status:"indoor",roles:["commercial"],phone:"",email:"",attrs:{unlimited_access:!1,start_at:"08:00",end_at:"18:00"},is_active:!0}}toObj(e){return e&&"user_not_found"!==e.code?(e.roles=["admin","manager","finance","suivi","commercial","stock","freelance"].filter(t=>e.roles.includes(t)),Object.defineProperties(e,{role:{get(){return this.roles[0]}},is_admin:{get(){return this.roles.includes("admin")}},is_freelance:{get(){return this.roles.includes("freelance")}},start_at:{value:"08:00",writable:!1},end_at:{value:"18:00",writable:!1},unlimited_access:{get(){return this.attrs.unlimited_access},set(e){this.attrs.unlimited_access=e}}}),e):null}async unlimited(){return this.http("GET","unlimited")}roles(){return["admin","manager","finance","suivi","commercial","stock",...process.env.MODULES.includes("pos")&&["pos"]||[]]}}var i=new a;e.default=i})?i.apply(t,n):i)||(e.exports=r)},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(0)],void 0===(r="function"==typeof(i=function(e,t){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.UsersApi=void 0,t=(a=t)&&a.__esModule?a:{default:a};class i extends t.default{constructor(){super(),this.resource="users",this.configCache({list:!0},36e5)}async me(){const e=await this.http("GET","me",null,!0);return this.toObj(e)}async activate(e,t){return await this.http("POST",e+"/activate",{token:t},!0)}async get_by_email(e){return await this.http("POST","email",{email:e},!0)}}e.UsersApi=i;var n=new i;e.default=n})?i.apply(t,n):i)||(e.exports=r)},function(e,t,a){var i,n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[t,a(0)],void 0===(r="function"==typeof(i=function(e,t){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=(a=t)&&a.__esModule?a:{default:a};class i extends t.default{constructor(){super(),this.resource="stock",this.configCache({list:!0},6e4)}async report(e,t){return this.http("GET","report",{assigned_at:e,suivi_id:t})}async release(e,t){return this.http("POST","release",{staff_id:e,commands:t.map(e=>e.id)})}}var n=new i;e.default=n})?i.apply(t,n):i)||(e.exports=r)}])}));
//# sourceMappingURL=tik-sdk.crm.js.map