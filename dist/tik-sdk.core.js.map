{"version":3,"sources":["webpack://tikSDK.[name]/webpack/universalModuleDefinition","webpack://tikSDK.[name]/webpack/bootstrap","webpack://tikSDK.[name]/./src/core/base.js","webpack://tikSDK.[name]/external {\"commonjs\":\"@sentry/browser\",\"commonjs2\":\"@sentry/browser\",\"amd\":\"@sentry/browser\",\"root\":\"Sentry\"}","webpack://tikSDK.[name]/./src/config.js","webpack://tikSDK.[name]/./src/core/auth.js","webpack://tikSDK.[name]/./node_modules/querystringify/index.js","webpack://tikSDK.[name]/./src/crm/staffs.js","webpack://tikSDK.[name]/./src/utils/cache.js","webpack://tikSDK.[name]/(webpack)/buildin/global.js","webpack://tikSDK.[name]/./src/core/users.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__1__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","session","authToken","instructorAuthToken","base_domain","config","API_BASE_URL","base_url","API_PREFIX","constructor","lookup_field","useCache","list","validateCache","configCache","cache","timeout","_cacheTimeout","clearInterval","cacheTimeout","setInterval","method","path","json","allow404","resource","headers","values","some","v","File","data","FormData","k","entries","append","JSON","stringify","undefined","console","log","req","url","qs","Authorization","fetch","body","redirect","referrer","ok","includes","status","error","Error","statusText","response","e","toString","Sentry","keys","captureException","toObj","http","id","el","new","forceCreate","partial_update","instance","DEFAULT_CONFIG","CACHE_PREFIX","VERSION","version","PROTOCOL","assign","AuthApi","BaseApi","super","me","token","staffsApi","resp","has","navigator","onLine","fetchMe","set","configureScope","scope","setUser","email","logout","password","access","code","del","decode","input","decodeURIComponent","replace","encode","encodeURIComponent","obj","prefix","pairs","isNaN","push","length","join","parse","query","part","parser","result","exec","StaffsApi","full_name","roles","phone","attrs","unlimited_access","start_at","end_at","is_active","filter","defineProperties","role","is_admin","is_freelance","writable","val","process","env","MODULES","Cache","global","localStorage","use_cache","res","fn","forceCache","message","g","Function","window","UsersApi"],"mappings":"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","file":"tik-sdk.core.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@sentry/browser\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@sentry/browser\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"core\"] = factory(require(\"@sentry/browser\"));\n\telse\n\t\troot[\"tikSDK\"] = root[\"tikSDK\"] || {}, root[\"tikSDK\"][\"core\"] = factory(root[\"Sentry\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import * as Sentry from '@sentry/browser'\nimport qs from 'querystringify'\nimport config from '../config.js'\n\nexport const session = {\n  authToken: null,\n  instructorAuthToken: null,\n}\n\nexport function base_domain() {\n  return config.API_BASE_URL\n  /*\n  if (process.env.NODE_ENV !== 'production') {\n    return process.env.API_BASE_URL_DEV || process.env.API_BASE_URL\n  } else {\n    return process.env.API_BASE_URL\n  }\n  */\n}\n\nexport function base_url() {\n  return base_domain() + config.API_PREFIX\n  /*\n  if (process.env.NODE_ENV !== 'production') {\n    return (\n      (process.env.API_BASE_URL_DEV || process.env.API_BASE_URL) +\n      (process.env.API_PREFIX_DEV || process.env.API_PREFIX || '/api/')\n    )\n  } else {\n    return process.env.API_BASE_URL + (process.env.API_PREFIX || '/api/')\n  }\n  */\n}\n\nclass BaseApi {\n  constructor() {\n    // this.base_domain = base_domain()\n    // this.base_url = base_url()\n    this.lookup_field = 'id'\n    this.useCache = {\n      list: false,\n      get: false,\n    }\n    this.validateCache = true\n  }\n  get base_domain() {\n    return base_domain()\n  }\n  get base_url() {\n    return base_url()\n  }\n\n  configCache(cache, timeout) {\n    this.useCache = cache\n    if (this._cacheTimeout) {\n      clearInterval(this._cacheTimeout)\n    }\n    if (timeout) {\n      this.cacheTimeout = timeout\n      this._cacheTimeout = setInterval(() => {\n        this.validateCache = true\n      }, this.cacheTimeout)\n    }\n  }\n\n  async http(method, path, json, allow404 = false) {\n    if (path) {\n      path = `${this.resource}/${path}`\n    } else {\n      path = `${this.resource}`\n    }\n    let headers = {}\n    if (json) {\n      if (Object.values(json).some((v) => v instanceof File)) {\n        const data = new FormData()\n        for (let [k, v] of Object.entries(json)) {\n          if (v === null) {\n            v = ''\n          }\n          data.append(k, v)\n        }\n        json = data\n      } else {\n        json = JSON.stringify(json)\n        headers = {\n          'Content-Type': 'application/json; charset=utf-8',\n        }\n      }\n    } else {\n      json = undefined\n    }\n    console.log(method, path, json || '')\n    let url = `${this.base_url}${path}/`\n    if (json && method === 'GET') {\n      url += qs.stringify(json, true)\n      json = null\n    }\n    let req\n    try {\n      if (session.authToken) {\n        headers.Authorization = 'Bearer ' + session.authToken\n      }\n      req = await fetch(url, {\n        method,\n        headers,\n        body: json,\n        mode: 'cors',\n        // credentials: 'include',\n        cache: 'no-cache',\n        redirect: 'follow',\n        referrer: 'no-referrer',\n      })\n      if (!req.ok && !(allow404 && [404, 401].includes(req.status))) {\n        const error = new Error(req.statusText || req.status)\n        error.response = req\n        throw error\n      }\n      if (method !== 'DELETE') {\n        return await req.json()\n      }\n    } catch (e) {\n      console.error(\n        'HTTP Error:',\n        url.toString(),\n        JSON.stringify(json),\n        req && req.status\n      )\n      console.log(\"Sentry\", typeof Sentry, Sentry, Object.keys(Sentry))\n      if (typeof Sentry === 'object' && \"captureException\" in Sentry) {\n        Sentry.captureException(e)\n      }\n      throw e\n    }\n  }\n\n  toObj(o) {\n    return o\n  }\n\n  async list() {\n    if (this.useCache.list && !this.validateCache && this.data) {\n      console.log(`[HTTP] ${this.resource}.list(): using cache`)\n    } else {\n      const d = await this.http('GET', '')\n      this.data = d\n      this.validateCache = false\n    }\n    return this.data\n  }\n\n  async get(id, allow404 = false) {\n    if (id) {\n      const el = await this.http(\n        'GET',\n        id,\n        /* json= */ null,\n        /* allow404= */ allow404\n      )\n      return this.toObj(el)\n    } else {\n      return this.new()\n    }\n    /*\n    // const el = this.data.filter((el) => el.id === id);\n    if (el.length === 1) {\n      return el[0];\n    } else {\n      console.log(\"GET NEW\");\n      return this.new();\n    }\n    */\n  }\n\n  async save(\n    el,\n    id,\n    forceCreate = false,\n    partial_update = false,\n    allow404 = false\n  ) {\n    this.validateCache = true\n    if ((el.id || id) && !forceCreate) {\n      const instance = await this.http(\n        partial_update ? 'PATCH' : 'PUT',\n        id || el.id,\n        el,\n        allow404\n      )\n      return this.toObj(instance)\n      /*\n      const instance = this.get(el.id);\n      if (instance) {\n        const old = Object.assign({}, instance);\n        Object.assign(instance, el);\n        if (this.preUpdate) {\n          await this.preUpdate(old, instance);\n        }\n        if (this.postUpdate) {\n          await this.postUpdate(old, instance);\n        }\n      }\n      */\n    } else {\n      const instance = await this.http('POST', '', el, allow404)\n      return instance\n      /*\n      const nextId = Math.max(...this.data.map((c) => c.id)) + 1;\n      el.id = nextId;\n      if (this.preCreate) {\n        await this.preCreate(el);\n      }\n      this.data.push(el);\n      if (this.postCreate) {\n        await this.postCreate(el);\n      }\n      */\n    }\n  }\n\n  new() {\n    return null\n  }\n\n  async delete(id) {\n    this.validateCache = true\n    return this.http('DELETE', id)\n  }\n}\n\nexport default BaseApi\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","import { version } from '../package.json'\n\nconst DEFAULT_CONFIG = {\n  // env: 'production',\n  API_BASE_URL: '',\n  API_PREFIX: '/api/',\n  CACHE_PREFIX: '',\n  VERSION: version,\n  PROTOCOL: 'https',\n  // LANG: 'fr',\n}\n\nconst config = Object.assign({}, DEFAULT_CONFIG)\n\nexport function setConfigValue(k, v) {\n  config[k] = v\n}\n\nexport function setConfig(c) {\n  for (const k of Object.keys(DEFAULT_CONFIG)) {\n    if (k in c) {\n      config[k] = c[k]\n    }\n  }\n}\n\nexport default config\n","import * as Sentry from '@sentry/browser'\nimport BaseApi, { session } from './base.js'\n// import usersApi from './users.js'\nimport staffsApi from '../crm/staffs.js'\nimport cache from '../utils/cache.js'\n\nexport class AuthApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'token'\n    // this.configCache({ list: true }, 60 * 60 * 1000)\n    this.me = {}\n    this.ns = {\n      me: 'me',\n      token: 'token',\n      authToken: 'authToken',\n    }\n  }\n\n  async fetchMe() {\n    // return await usersApi.me()\n    return await staffsApi.me()\n  }\n\n  async currentUser() {\n    if (this.me && this.me.id) {\n      return this.me\n    } else {\n      let resp\n      if (cache.has(this.ns.me)) {\n        resp = cache.get(this.ns.me)\n      }\n      if (navigator.onLine) {\n        try {\n          resp = await this.fetchMe()\n        } catch (e) {}\n      }\n      if (!resp) {\n        await this.logout()\n        return null\n      }\n      cache.set(this.ns.me, resp)\n      this.me = resp\n\n      Sentry.configureScope((scope) => {\n        scope.setUser({ id: this.me.email })\n      })\n      return this.me\n    }\n  }\n\n  async login(email, password) {\n    const resp = await this.http('POST', '', { email, password }, true)\n    if (resp.access) {\n      session[this.ns.authToken] = resp.access\n      cache.set(this.ns.token, { token: resp.access })\n      return true\n    } else {\n      return false\n    }\n  }\n\n  async isLoggedin() {\n    const token = cache.get(this.ns.token)\n    if (token) {\n      let resp = true\n      if (navigator.onLine) {\n        resp = await this.http('POST', 'verify', token, true)\n        resp = resp && resp.code !== 'token_not_valid'\n      }\n      if (resp) {\n        session[this.ns.authToken] = token.token\n        console.log(session)\n        return true\n      }\n    }\n    cache.del(this.ns.token)\n    return false\n  }\n\n  async logout() {\n    this.me = {}\n    session[this.ns.authToken] = null\n    cache.del(this.ns.token)\n    cache.del(this.ns.me)\n    Sentry.configureScope((scope) => {\n      scope.setUser({})\n    })\n  }\n}\n\nconst authApi = new AuthApi()\nexport default authApi\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","import BaseApi from '../core/base.js'\n\nclass StaffsApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'staffs'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  new() {\n    return {\n      full_name: '',\n      status: 'indoor',\n      roles: ['commercial'],\n      phone: '',\n      email: '',\n      attrs: {\n        unlimited_access: false,\n        // is_freelance: false,\n        start_at: '08:00',\n        end_at: '18:00',\n      },\n      is_active: true,\n    }\n  }\n\n  async me() {\n    const obj = await this.http('GET', 'me', null, true)\n    return this.toObj(obj)\n  }\n\n  toObj(o) {\n    const ALL_ROLES = [\n      'admin',\n      'manager',\n      'finance',\n      'suivi',\n      'commercial',\n      'stock',\n      'freelance',\n    ]\n    o.roles = ALL_ROLES.filter((r) => o.roles.includes(r))\n    Object.defineProperties(o, {\n      role: {\n        get() {\n          return this.roles[0]\n        },\n      },\n      is_admin: {\n        get() {\n          return this.roles.includes('admin')\n        },\n      },\n      is_freelance: {\n        get() {\n          return this.roles.includes('freelance')\n        },\n      },\n      start_at: {\n        value: '08:00',\n        writable: false,\n      },\n      end_at: {\n        value: '18:00',\n        writable: false,\n      },\n      unlimited_access: {\n        get() {\n          return this.attrs.unlimited_access\n        },\n        set(val) {\n          this.attrs.unlimited_access = val\n        },\n      },\n    })\n    return o\n  }\n\n  async unlimited() {\n    return this.http('GET', 'unlimited')\n  }\n\n  roles() {\n    return [\n      'admin',\n      'manager',\n      'finance',\n      'suivi',\n      'commercial',\n      'stock',\n      ...((process.env.MODULES.includes('pos') && ['pos']) || []),\n    ]\n  }\n}\n\nconst staffsApi = new StaffsApi()\nexport default staffsApi\n","import config from '../config'\n\nexport class Cache {\n  has(n) {\n    return (\n      global.localStorage &&\n      global.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n    )\n  }\n\n  del(n) {\n    if (global.localStorage) {\n      delete global.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n    }\n  }\n\n  get(n, use_cache = true) {\n    if (use_cache && this.has(n)) {\n      try {\n        return JSON.parse(\n          global.localStorage[`${config.CACHE_PREFIX}_cache_${n}`]\n        )\n      } catch (e) {}\n    }\n  }\n\n  set(n, res) {\n    if (global.localStorage) {\n      const k = `${config.CACHE_PREFIX}_cache_${n}`\n      global.localStorage[k] = JSON.stringify(res)\n    }\n  }\n\n  async withCache(n, fn, use_cache = false) {\n    const cache = this.get(n, use_cache)\n    if (cache) return cache\n    const res = await fn()\n    this.set(n, res)\n    return res\n  }\n\n  async fallbackCache(n, fn, forceCache = false) {\n    let res\n    if (forceCache) {\n      return this.get(n, true)\n    }\n    try {\n      res = await fn()\n      this.set(n, res)\n    } catch (e) {\n      if (e.message !== 'Forbidden') {\n        res = this.get(n, true)\n      } else {\n        throw e\n      }\n    }\n    return res\n  }\n}\n\nexport default new Cache()\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import BaseApi from './base'\n\nexport class UsersApi extends BaseApi {\n  constructor() {\n    super()\n    this.resource = 'users'\n    this.configCache({ list: true }, 60 * 60 * 1000)\n  }\n\n  async me() {\n    return await this.http('GET', 'me', null, true)\n  }\n\n  async activate(id, token) {\n    return await this.http('POST', `${id}/activate`, { token }, true)\n  }\n\n  async get_by_email(email) {\n    return await this.http('POST', 'email', { email }, true)\n  }\n}\n\nconst api = new UsersApi()\n\nexport default api\n"],"sourceRoot":""}